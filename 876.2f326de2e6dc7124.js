"use strict";(self.webpackChunktemplate_rpm_adnare=self.webpackChunktemplate_rpm_adnare||[]).push([[876],{46876:(E,h,a)=>{a.r(h),a.d(h,{UserSearchModule:()=>L});var c=a(36895),m=a(62510),U=a(91083),g=a(90433),p=a(46773),Z=a(29193),f=a(49671),C=a(88938),T=a(35226),l=a.n(T),z=a(54641),b=a(58493),e=a(94650),y=a(39503),x=a(50016),D=a(47044),A=a(73679),M=a(36704),w=a(47423),v=a(48521),J=a(21243),d=a(40269),P=a(31237),F=a(80728),O=a(70827);const I=function(){return{standalone:!0}};function Q(i,u){if(1&i){const n=e.EpF();e.TgZ(0,"tbody")(1,"tr"),e.ynx(2),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td")(19,"div"),e.ynx(20),e.TgZ(21,"nz-switch",44),e.NdJ("ngModelChange",function(o){const s=e.CHM(n).$implicit;return e.KtG(s.active_switch=o)}),e.qZA(),e.BQk(),e.qZA()(),e.TgZ(22,"td")(23,"div",45)(24,"i",46),e.NdJ("click",function(){const r=e.CHM(n).$implicit,s=e.oxw();return e.KtG(s.deleteUser(r))}),e.qZA(),e.TgZ(25,"i",47),e.NdJ("click",function(){const r=e.CHM(n).$implicit,s=e.oxw();return e.KtG(s.editUser(r))}),e.qZA()()(),e.BQk(),e.qZA()()}if(2&i){const n=u.$implicit;e.xp6(4),e.AsE("",n.first_name," ",n.last_name,""),e.xp6(2),e.Oqu(n.email),e.xp6(2),e.Oqu(n.address),e.xp6(2),e.Oqu(n.data_role),e.xp6(2),e.Oqu(n.menu_role),e.xp6(2),e.Oqu(e.xi3(15,12,n.created_on,"MM/dd/yyyy hh:mm:ss")),e.xp6(3),e.AsE("",n.created_by_first_name," ",n.created_by_last_name,""),e.xp6(4),e.Q6J("ngModel",n.active_switch)("ngModelOptions",e.DdM(15,I))("nzDisabled",!0)}}function R(i,u){1&i&&e._UZ(0,"tbody")}z.vfs=b.I.vfs;const N=[{path:"",component:(()=>{class i{constructor(n,t,o,r){this.patientService=n,this.userService=t,this.router=o,this.datepipe=r,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[10,15,20,25,30],this.get_all_data=!1,this.totalUsers=0,this.changePageSize=10}ngOnInit(){this.is_active="",this.getDataRoleSearchDropdown(),this.getMenuRoleSearchDropdown(),this.getProviderTypeDropdown()}buildTableBody(n,t){var o=[];return o.push(t),n.forEach(r=>{var s=[];t.forEach(function(S){s.push(r[S.text])}),o.push(s)}),o}table(n,t){return{table:{headerRows:1,body:this.buildTableBody(n,t),dontBreakRows:!0,fontSize:7,widths:[42,42,42,42,42,42,42,32,32,42,42]}}}downloadAllUserData(n){var t=this;return(0,f.Z)(function*(){if(t.user_name){const o=t.user_name.split(" ");o.length>1?(t.user_first_name=o[0].toLowerCase(),t.user_last_name=o[o.length-1].toLowerCase()):t.user_name=t.user_name.toLowerCase()}t.search_model={user_id:localStorage.getItem("user_id"),sort_order:t.sortOrder??"",sort_coloumn:t.sortField??"",page_number:t.pageIndex,page_size:t.pageSize,username:t.user_name??"",user_first_name:t.user_first_name??"",user_last_name:t.user_last_name??"",is_active:t.is_active??"",menu_role:t.menu_role??"",data_role:t.data_role??"",get_all_data:!0},t.userService.getUserGridData(t.search_model).subscribe(o=>{1==o.success?(t.userExportData=o.data.map(r=>({Username:r.first_name+" "+r.middle_name+" "+r.last_name,Email:r.email,"Data Role":r.data_role,"Menu Role":r.menu_role,Address:r.address,City:r.city,State:r.state,Zip:r.zip,"Zip Ext":r.zip_ext,"Created By":r.created_by_first_name+" "+r.created_by_last_name,"Created On":t.datepipe.transform(r.created_on,"MM/dd/yyyy hh:mm:ss")})),"pdf"==n&&t.exportToPdf(t.userExportData),"csv"==n&&t.exportToCsv(t.userExportData)):l().fire({icon:"error",text:o.message})})})()}downloadUserData(n){null!=this.userTableData&&0!=this.userTableData.length?this.downloadAllUserData(n):l().fire({icon:"error",text:"No Record to Download"})}exportToCsv(n){new C.Sv(n,"Users",{fieldSeparator:",",quoteStrings:'"',decimalseparator:".",title:"",useBom:!0,noDownload:!1,headers:["Username","Email","Data Role","Menu Role","Address","City","State","Zip","Zip Ext","Created By","Created On"]})}exportToPdf(n){var o={content:[{text:"Users",fontSize:7,bold:!0},this.table(n,[{text:"Username",style:"tableHeader"},{text:"Email",style:"tableHeader"},{text:"Data Role",style:"tableHeader"},{text:"Menu Role",style:"tableHeader"},{text:"Address",style:"tableHeader"},{text:"City",style:"tableHeader"},{text:"State",style:"tableHeader"},{text:"Zip",style:"tableHeader"},{text:"Zip Ext",style:"tableHeader"},{text:"Created By",style:"tableHeader"},{text:"Created On",style:"tableHeader"}])],defaultStyle:{fontSize:7},styles:{tableHeader:{bold:!0,fontSize:9,color:"white",fillColor:"#4A2D73"}}};z.createPdf(o).download("Users.pdf")}getDataRoleSearchDropdown(){this.patientService.getDataRoleDropdownData().subscribe(n=>{1==n.success?this.dataRoleData=n.data:l().fire({icon:"error",text:n.message})})}getMenuRoleSearchDropdown(){this.patientService.getMenuRoleDropdownData().subscribe(n=>{1==n.success?this.menuRoleData=n.data:l().fire({icon:"error",text:n.message})})}getProviderTypeDropdown(){this.userService.getProviderTypeDropdown().subscribe(n=>{1==n.success?this.providerTypesData=n.data:l().fire({icon:"error",text:n.message})})}onQueryParamsChange(n){var t=this;return(0,f.Z)(function*(){t.prev_pageIndex=null!=t.savedParams?t.savedParams.pageIndex:null,t.savedParams=n;const{pageIndex:r,sort:s}=n,_=s.find(H=>null!==H.value);t.sortField=_&&_.key||null,t.sortOrder=_&&_.value||null,t.pageIndex=r,(null!=t.userTableData&&null!=t.sortField&&null!=t.sortOrder||null!=t.prev_pageIndex&&t.prev_pageIndex!=t.pageIndex||t.changePageSize!=t.pageSize)&&t.getUserGridData(),t.changePageSize=t.pageSize})()}getUserGridData(){if(this.user_name){const n=this.user_name.split(" ");n.length>1?(this.user_first_name=n[0].toLowerCase(),this.user_last_name=n[n.length-1].toLowerCase()):this.username=this.user_name.toLowerCase()}this.search_model={user_id:localStorage.getItem("user_id"),sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,username:this.username??"",user_first_name:this.user_first_name??"",user_last_name:this.user_last_name??"",is_active:this.is_active??"",menu_role:this.menu_role??"",data_role:this.data_role??"",get_all_data:!1},this.userService.getUserGridData(this.search_model).subscribe(n=>{1==n.success?(this.userTableData=n.data,this.totalUsers=n.data.length>0?n.data[0].total_record_count:0):l().fire({icon:"error",text:n.message})})}search(){this.pageIndex=1,this.getUserGridData()}handleClear(){this.menu_role=null,this.data_role=null,this.user_name="",this.username="",this.user_first_name="",this.user_last_name="",this.is_active="",this.getUserGridData()}addUser(){localStorage.setItem("show_user_profile","false"),this.userService.user_id=null,this.userService.method="create",this.router.navigate(["/add-user"])}editUser(n){localStorage.setItem("show_user_profile","false"),this.userService.method="update",this.userService.user_id=n.user_id,this.router.navigate(["/add-user"])}deleteUser(n){this.userService.deleteUser(n.user_id).subscribe(t=>{1==t.success?(l().fire({icon:"success",text:t.message}),this.pageIndex=1,this.getUserGridData()):l().fire({icon:"error",text:t.message})})}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(y.e),e.Y36(x.K),e.Y36(m.F0),e.Y36(c.uU))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-search"]],decls:79,vars:32,consts:[[1,"screen"],[1,"screen-header"],[1,"screen-name"],["ngbTooltip","Search","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-search"],[1,"screen-header-btn","margin-right",3,"click"],[1,"pipe"],["ngbDropdown","",1,"d-inline-block"],["Export","ngbDropdown"],["id","dropdownManual2",1,"screen-header-btn","margin-right",3,"focus"],[3,"src"],[1,"pipe-inside-btn"],[1,"fa","fa-chevron-down"],["ngbDropdownMenu","","aria-labelledby","dropdownManual2"],["ngbDropdownItem","",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-file-csv"],[1,"fa","fa-file-pdf"],[1,"screen-header-btn",3,"click"],[1,"screen-search-criteria-div"],[1,"row"],[1,"col-lg-3","col-md-3","col-sm-6","col-xs-6"],["label","Data Role","dropdown_placeholder","Data Role","bindLabel","name","align_icon","left",3,"ngModel","dropdownListData","ngModelChange"],["label","Menu Role","dropdown_placeholder","Menu Role","bindLabel","name","align_icon","left",3,"ngModel","dropdownListData","ngModelChange"],["type","text","placeholder","User Name","label","User Name","icon","fa fa-user","align_icon","left",3,"ngModel","ngModelChange"],[1,"col-lg-3","col-md-3","col-lg-3","col-md-5","margin-top-left"],[3,"ngModel","ngModelChange"],["nz-radio","","nzValue","1"],["nz-radio","","nzValue","0"],["nz-radio","","nzValue",""],[1,"table-div"],["nzShowSizeChanger","",1,"ch-table",3,"nzPageSizeOptions","nzFrontPagination","nzTotal","nzPageIndex","nzPageSize","nzData","nzQueryParams","nzPageIndexChange","nzPageSizeChange"],["nzTable","","sortTable","","filterTable",""],["nzColumnKey","username",3,"nzSortFn"],["nzColumnKey","email",3,"nzSortFn"],["nzColumnKey","address",3,"nzSortFn"],["nzColumnKey","data_role",3,"nzSortFn"],["nzColumnKey","menu_role",3,"nzSortFn"],["nzColumnKey","created_on",3,"nzSortFn"],["nzColumnKey","created_by",3,"nzSortFn"],["nzColumnKey","active",3,"nzSortFn"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"total"],[1,"total-span"],[1,"rpm-switch",3,"ngModel","ngModelOptions","nzDisabled","ngModelChange"],[1,"table-icon-container"],["nz-icon","","nzType","delete","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Delete",1,"table-coloumn-icons",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Edit",1,"table-coloumn-icons",3,"click"]],template:function(n,t){if(1&n){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3," User Search "),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return t.search()}),e._UZ(6,"span",4),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return t.handleClear()}),e._uU(8,"Clear All"),e.qZA(),e._UZ(9,"span",6),e.TgZ(10,"div",7,8)(12,"button",9),e.NdJ("focus",function(){e.CHM(o);const s=e.MAs(11);return e.KtG(s.open())}),e._UZ(13,"img",10),e.ALo(14,"assetsSource"),e._uU(15," Export "),e._UZ(16,"span",11)(17,"span",12),e.qZA(),e.TgZ(18,"div",13)(19,"button",14),e.NdJ("click",function(){return t.downloadUserData("csv")}),e._UZ(20,"i",15),e._uU(21," CSV "),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return t.downloadUserData("pdf")}),e._UZ(23,"i",16),e._uU(24," PDF "),e.qZA()()(),e._UZ(25,"span",6),e.TgZ(26,"button",17),e.NdJ("click",function(){return t.addUser()}),e._UZ(27,"img",10),e.ALo(28,"assetsSource"),e._uU(29," User "),e.qZA()()(),e.TgZ(30,"div",18)(31,"div",19)(32,"div",20)(33,"app-ad-custom-dropdown",21),e.NdJ("ngModelChange",function(s){return t.data_role=s}),e.qZA()(),e.TgZ(34,"div",20)(35,"app-ad-custom-dropdown",22),e.NdJ("ngModelChange",function(s){return t.menu_role=s}),e.qZA()(),e.TgZ(36,"div",20)(37,"app-ad-custom-input",23),e.NdJ("ngModelChange",function(s){return t.user_name=s}),e.qZA()(),e.TgZ(38,"div",24)(39,"nz-form-item")(40,"nz-radio-group",25),e.NdJ("ngModelChange",function(s){return t.is_active=s}),e.TgZ(41,"label",26),e._uU(42,"Active"),e.qZA(),e.TgZ(43,"label",27),e._uU(44,"Inactive"),e.qZA(),e.TgZ(45,"label",28),e._uU(46,"All"),e.qZA()()()()(),e.TgZ(47,"div",29)(48,"nz-table",30,31),e.NdJ("nzQueryParams",function(s){return t.onQueryParamsChange(s)})("nzPageIndexChange",function(s){return t.pageIndex=s})("nzPageSizeChange",function(s){return t.pageSize=s}),e.TgZ(52,"thead")(53,"tr")(54,"th",32),e._uU(55,"User Name"),e.qZA(),e.TgZ(56,"th",33),e._uU(57,"Email"),e.qZA(),e.TgZ(58,"th",34),e._uU(59,"Address"),e.qZA(),e.TgZ(60,"th",35),e._uU(61,"Data Role"),e.qZA(),e.TgZ(62,"th",36),e._uU(63,"Menu Role"),e.qZA(),e.TgZ(64,"th",37),e._uU(65,"Created On"),e.qZA(),e.TgZ(66,"th",38),e._uU(67,"Created By"),e.qZA(),e.TgZ(68,"th",39),e._uU(69,"Active"),e.qZA(),e.TgZ(70,"th"),e._uU(71,"Actions"),e.qZA()()(),e.YNc(72,Q,26,16,"tbody",40),e.YNc(73,R,1,0,"tbody",41),e.qZA(),e.TgZ(74,"div",42),e._UZ(75,"img",10),e.ALo(76,"assetsSource"),e.TgZ(77,"span",43),e._uU(78),e.qZA()()()()()}if(2&n){const o=e.MAs(50);e.xp6(13),e.Q6J("src",e.lcZ(14,26,"export.png"),e.LSH),e.xp6(14),e.Q6J("src",e.lcZ(28,28,"patient.png"),e.LSH),e.xp6(6),e.Q6J("ngModel",t.data_role)("dropdownListData",t.dataRoleData),e.xp6(2),e.Q6J("ngModel",t.menu_role)("dropdownListData",t.menuRoleData),e.xp6(2),e.Q6J("ngModel",t.user_name),e.xp6(3),e.Q6J("ngModel",t.is_active),e.xp6(8),e.Q6J("nzPageSizeOptions",t.pageSizeOptions)("nzFrontPagination",!1)("nzTotal",t.totalUsers)("nzPageIndex",t.pageIndex)("nzPageSize",t.pageSize)("nzData",t.userTableData),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(4),e.Q6J("ngForOf",o.data),e.xp6(1),e.Q6J("ngIf",0==o.data.length),e.xp6(2),e.Q6J("src",e.lcZ(76,30,"total.png"),e.LSH),e.xp6(3),e.Oqu(t.totalUsers)}},dependencies:[c.sg,c.O5,D.w,A.SK,M.Nx,w.Ls,v.Of,v.Dg,J.i,d.N8,d.qD,d.Uo,d._C,d.Om,d.p0,d.$Z,g.JJ,g.On,p.jt,p.Vi,p.TH,p._L,P.y,F.v,c.uU,O.n],styles:[".margin-top-left[_ngcontent-%COMP%]{margin-top:17px}"]}),i})()}];let L=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.ez,U.T,m.Bz.forChild(N),g.u5,g.UX,p.IJ,Z.m,m.Bz]}),i})()}}]);