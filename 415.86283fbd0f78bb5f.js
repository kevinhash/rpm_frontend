"use strict";(self.webpackChunktemplate_rpm_adnare=self.webpackChunktemplate_rpm_adnare||[]).push([[415],{5415:(O,f,r)=>{r.r(f),r.d(f,{AddDeviceModule:()=>_});var e=r(6895),l=r(433),C=r(5226),c=r.n(C),i=r(4650),g=r(2510),x=r(4241),M=r(9503),b=r(3679),D=r(6704),v=r(6773),T=r(1237),I=r(728);function y(s,h){1&s&&(i.TgZ(0,"div",21),i._uU(1," Add Device "),i.qZA())}function a(s,h){1&s&&(i.TgZ(0,"div",21),i._uU(1," Edit Device "),i.qZA())}let u=(()=>{class s{constructor(o,n,m,k){this.formBuilder=o,this.router=n,this.deviceService=m,this.patientService=k,this.disableInput=!1,this.transition_border=!1,this.buildForm()}ngOnInit(){this.getEnterpriseSearchDropdown(),this.getDeviceTypesDropdown(),this.getProviderDropdown(),this.method=this.deviceService.method,null!=this.deviceService.device_id&&null!=this.deviceService.device_id&&this.getDeviceInfo()}getDeviceInfo(){this.deviceService.getDeviceInfoById(this.deviceService.device_id).subscribe(o=>{1==o.success?(o.data.manufacturer_id=o.data.manufacturer_id.toString(),this.form.patchValue(o.data),null!=this.form.value.enterprise_id&&null!=this.form.value.enterprise_id&&""!=this.form.value.enterprise_id&&(this.providerData=this.allProviderData.filter(n=>n.enterprise_id==this.form.value.enterprise_id))):c().fire({icon:"error",text:o.message})})}getEnterpriseSearchDropdown(){this.userId=localStorage.getItem("user_id"),this.patientService.getActiveEnterpriseDropdownData(this.userId).subscribe(o=>{1==o.success?(this.enterpriseData=o.data,1==this.enterpriseData.length&&"update"!==this.method&&this.form.controls.enterprise_id.setValue(this.enterpriseData[0].id)):c().fire({icon:"error",text:o.message})})}getDeviceTypesDropdown(){this.deviceService.getDeviceTypesDropdown().subscribe(o=>{1==o.success?this.deviceTypesData=o.data:c().fire({icon:"error",text:o.message})})}onEnterpriseDropdownChange(o){this.form.controls.provider_id.setValue(null),this.providerData=null==this.allProviderData?[]:this.allProviderData.filter(n=>n.enterprise_id==o.id)}getProviderDropdown(){this.deviceService.getProvider(localStorage.getItem("user_id")).subscribe(o=>{1==o.success?(this.allProviderData=o.data,null!=this.form.value.enterprise_id&&null!=this.form.value.enterprise_id&&""!=this.form.value.enterprise_id&&(this.providerData=this.allProviderData.filter(n=>n.enterprise_id==this.form.value.enterprise_id))):c().fire({icon:"error",text:o.message})})}addDeviceInfo(){this.transition_border=!0,this.form.valid?(this.addDeviceData={user_id:localStorage.getItem("user_id"),device_id:this.deviceService.device_id,serial_number:this.form.value.serial_number,imei:this.form.value.imei,sim:this.form.value.sim,lot_number:this.form.value.lot_number,manufacturer_id:this.form.value.manufacturer_id,provider_id:this.form.value.provider_id,device_type_id:this.form.value.device_type_id,enterprise_id:this.form.value.enterprise_id},null!=this.deviceService.device_id&&null!=this.deviceService.device_id?this.deviceService.updateDeviceInfoData(this.addDeviceData).subscribe(o=>{1==o.success?(c().fire({icon:"success",text:o.message}),this.router.navigate(["/device-search"])):o.message.includes(this.form.value.serial_number)?c().fire({icon:"error",text:"Serial Number Already Exist"}):c().fire({icon:"error",text:o.message})}):this.deviceService.addDeviceInfoData(this.addDeviceData).subscribe(o=>{1==o.success?(c().fire({icon:"success",text:o.message}),this.router.navigate(["/device-search"])):o.message.includes(this.form.value.serial_number)?c().fire({icon:"error",text:"Serial Number Already Exist"}):c().fire({icon:"error",text:o.message})})):c().fire({icon:"error",text:"Check all required feilds."})}cancel(){this.form.reset(),this.deviceService.device_id=null,this.router.navigate(["/device-search"])}clear(){this.form.reset()}buildForm(){this.form=this.formBuilder.group({serial_number:[{value:null,disabled:this.disableInput},[l.kI.required]],imei:[{value:null,disabled:this.disableInput},[l.kI.required]],sim:[{value:null,disabled:this.disableInput}],lot_number:[{value:null,disabled:this.disableInput}],manufacturer_id:[{value:null,disabled:this.disableInput}],provider_id:[{value:null,disabled:this.disableInput}],device_type_id:[{value:null,disabled:this.disableInput},[l.kI.required]],enterprise_id:[{value:null,disabled:this.disableInput},[l.kI.required]]})}}return s.\u0275fac=function(o){return new(o||s)(i.Y36(l.QS),i.Y36(g.F0),i.Y36(x.U),i.Y36(M.e))},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-add-device"]],decls:33,vars:10,consts:[["nz-row","",1,"add-device"],["nz-form","",1,"login-form",3,"formGroup"],[1,"formBox-full","viewMinWidth"],[1,"screen-header"],["class","screen-name",4,"ngIf"],[1,"button-container"],["ngbTooltip","Clear","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-left","margin-right",3,"click"],["ngbTooltip","Save","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-left","margin-right",3,"click"],[1,"fa","fa-floppy-disk","icon-padding"],["ngbTooltip","Cancel","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-xmark","icon-padding"],["nz-col","",1,"screen-search-criteria-div"],[1,"row"],[1,"col-lg-3","col-md-3","col-lg-5","col-lg-6"],["label","Entity *","formControlName","enterprise_id","dropdown_placeholder","Entity","bindLabel","name","align_icon","left",3,"validations","dropdownListData","onModelChange"],["label","Device Type *","formControlName","device_type_id","dropdown_placeholder","Device Type","bindLabel","name","align_icon","left",3,"validations","dropdownListData"],["type","text","label","Serial Number *","formControlName","serial_number","placeholder","Serial Number","align_icon","left",3,"validations"],["type","number","label","IMEI *","formControlName","imei","placeholder","IMEI","align_icon","left",3,"validations"],["type","number","label","SIM","formControlName","sim","placeholder","SIM","align_icon","left"],["type","number","label","Lot Number","formControlName","lot_number","placeholder","Lot Number","align_icon","left"],["label","Provider","formControlName","provider_id","dropdown_placeholder","Provider","bindLabel","name","align_icon","left",3,"dropdownListData"],[1,"screen-name"]],template:function(o,n){1&o&&(i.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3),i.YNc(4,y,2,0,"div",4),i.YNc(5,a,2,0,"div",4),i.qZA(),i.TgZ(6,"div",5)(7,"button",6),i.NdJ("click",function(){return n.clear()}),i._uU(8," Clear "),i.qZA(),i.TgZ(9,"button",7),i.NdJ("click",function(){return n.addDeviceInfo()}),i._UZ(10,"i",8),i.qZA(),i.TgZ(11,"button",9),i.NdJ("click",function(){return n.cancel()}),i._UZ(12,"i",10),i.qZA()(),i.TgZ(13,"div",11)(14,"div",12)(15,"div",13)(16,"app-ad-custom-dropdown",14),i.NdJ("onModelChange",function(k){return n.onEnterpriseDropdownChange(k)}),i.qZA()(),i.TgZ(17,"div",13),i._UZ(18,"app-ad-custom-dropdown",15),i.qZA()()(),i.TgZ(19,"div",11)(20,"div",12)(21,"div",13),i._UZ(22,"app-ad-custom-input",16),i.qZA(),i.TgZ(23,"div",13),i._UZ(24,"app-ad-custom-input",17),i.qZA()(),i.TgZ(25,"div",12)(26,"div",13),i._UZ(27,"app-ad-custom-input",18),i.qZA(),i.TgZ(28,"div",13),i._UZ(29,"app-ad-custom-input",19),i.qZA()(),i.TgZ(30,"div",12)(31,"div",13),i._UZ(32,"app-ad-custom-dropdown",20),i.qZA()()()()()()),2&o&&(i.xp6(1),i.Q6J("formGroup",n.form),i.xp6(3),i.Q6J("ngIf","create"==n.method),i.xp6(1),i.Q6J("ngIf","update"==n.method),i.xp6(11),i.Q6J("validations",!(n.transition_border&&null==n.form.value.enterprise_id||""==n.form.value.enterprise_id))("dropdownListData",n.enterpriseData),i.xp6(2),i.Q6J("validations",!(n.transition_border&&null==n.form.value.device_type_id||""==n.form.value.device_type_id))("dropdownListData",n.deviceTypesData),i.xp6(4),i.Q6J("validations",!(n.transition_border&&null==n.form.value.serial_number||""==n.form.value.serial_number)),i.xp6(2),i.Q6J("validations",!(n.transition_border&&0==n.form.controls.imei.valid)),i.xp6(8),i.Q6J("dropdownListData",n.providerData))},dependencies:[e.O5,b.t3,b.SK,D.Lr,l._Y,l.JJ,l.JL,l.sg,l.u,v._L,T.y,I.v]}),s})();var t=r(1083),d=r(8740);const p=[{path:"",component:u}];let _=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[e.ez,t.T,g.Bz.forChild(p),l.u5,l.UX,v.IJ,d.m,g.Bz]}),s})()},1237:(O,f,r)=>{r.d(f,{y:()=>y});var e=r(4650),l=r(433),C=r(4707),c=r(8372),i=r(1094),g=r(6895),x=r(6773),M=r(6163);const b=["fileList"];function D(a,u){if(1&a&&(e.TgZ(0,"span",9),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.Q6J("ngbTooltip",t.error_message),e.xp6(1),e.hij("",t.error_message," ")}}const v=function(a){return{"animated-border":a}};function T(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",2),e.ALo(1,"safeStyle"),e.TgZ(2,"label",3),e.ALo(3,"safeStyle"),e.ALo(4,"safeStyle"),e.ALo(5,"safeStyle"),e.ALo(6,"safeStyle"),e.qZA(),e.TgZ(7,"i",4),e.NdJ("click",function(p){e.CHM(t);const _=e.oxw();return e.KtG(_.onClick(p))}),e.qZA(),e.TgZ(8,"img",5),e.NdJ("click",function(p){e.CHM(t);const _=e.oxw();return e.KtG(_.onClick(p))}),e.qZA(),e.TgZ(9,"input",6,7),e.NdJ("ngModelChange",function(p){e.CHM(t);const _=e.oxw();return e.KtG(_.onInputChange(p))}),e.ALo(11,"async"),e.qZA(),e.YNc(12,D,2,2,"span",8),e.qZA()}if(2&a){const t=e.oxw();e.Udp("width",t.width)("height",t.height)("--tooltip_background_color",e.lcZ(1,51,t.tooltip_background_color)),e.xp6(2),e.Udp("background-color",e.lcZ(3,53,t.label_background_color))("color",e.lcZ(4,55,t.label_color))("--label_background_color",e.lcZ(5,57,t.label_background_color))("--label_font_weight",e.lcZ(6,59,t.label_font_weight)),e.Q6J("placement",t.label_placement)("ngbTooltip",t.label_tooltip)("innerHTML",t.HTMLasString,e.oJD),e.xp6(5),e.Tol(t.icon),e.Udp("--align_right_icon",t.align_right_icon)("--align_left_icon",t.align_left_icon),e.Q6J("placement",t.icon_placement)("ngbTooltip",t.icon_tooltip),e.xp6(1),e.Udp("--align_right_icon",t.align_right_icon)("--align_left_icon",t.align_left_icon),e.Q6J("src",t.icon_src,e.LSH)("placement",t.icon_placement)("ngbTooltip",t.icon_tooltip),e.xp6(1),e.Udp("--padding_left_icon",t.padding_left_icon)("--padding_right_icon",t.padding_right_icon)("--align_right_date_icon",t.align_right_date_icon)("--align_left_date_icon",t.align_left_date_icon),e.Q6J("placeholder",t.placeholder)("ngModel",e.lcZ(11,61,t.input))("disabled",t.disabled)("mask",t.mask)("ngClass",e.VKq(63,v,!t.validations))("type",t.type)("placement",t.input_tooltip_placement)("ngbTooltip",t.input_tooltip)("maxlength",t.maxlength),e.uIk("accesskey",t.accesskey),e.xp6(3),e.Q6J("ngIf",!t.validations&&null!=t.error_message&&""!=t.error_message)}}function I(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",2),e.ALo(1,"safeStyle"),e.TgZ(2,"div",10)(3,"label",3),e.ALo(4,"safeStyle"),e.ALo(5,"safeStyle"),e.ALo(6,"safeStyle"),e.qZA(),e.TgZ(7,"input",11),e.NdJ("ngModelChange",function(p){e.CHM(t);const _=e.oxw();return e.KtG(_.onInputChange(p))}),e.ALo(8,"async"),e.qZA()()()}if(2&a){const t=e.oxw();e.Udp("--tooltip_background_color",e.lcZ(1,17,t.tooltip_background_color)),e.xp6(2),e.Udp("width",t.width)("height",t.height),e.xp6(1),e.Udp("background-color",e.lcZ(4,19,t.label_background_color))("color",e.lcZ(5,21,t.label_color))("--label_background_color",e.lcZ(6,23,t.label_background_color)),e.Q6J("placement",t.label_placement)("ngbTooltip",t.label_tooltip)("innerHTML",t.HTMLasString,e.oJD),e.xp6(4),e.Q6J("ngModel",e.lcZ(8,25,t.input))("disabled",t.disabled)}}let y=(()=>{class a{constructor(){this.placeholder="",this.validations=!0,this.error_message="",this.type="text",this.mask="",this.debounceTime=500,this.disabled=!1,this.autofocus=!1,this.onIconClick=new e.vpe,this.input=new C.t(1),this.subscriptions=[]}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}writeValue(t){this.input.next(t)}onInputChange(t){this.input.next(t)}onClick(t){this.onIconClick.emit(t)}ngOnInit(){if((null==this.icon_color||""===this.icon_color)&&(this.icon_color="#BD123E"),(null==this.label_font_weight||""===this.label_font_weight)&&(this.label_font_weight="bold"),null!=this.label&&(this.HTMLasString=this.label,null!=this.accesskey&&this.label.toLowerCase().includes(this.accesskey.toLowerCase()))){var t=this.label.indexOf(this.accesskey);-1==t?-1!=(t=this.label.indexOf(this.accesskey.toLowerCase()))&&(this.HTMLasString=this.label.substring(0,t)+"<u>"+this.accesskey.toLowerCase()+"</u>"+this.label.substring(t+1)):this.HTMLasString=this.label.substring(0,t)+"<u>"+this.accesskey+"</u>"+this.label.substring(t+1)}null!=this.align_icon&&"left"==this.align_icon&&"date"==this.type?(this.align_left_date_icon="6px",this.align_right_date_icon="0",this.padding_left_icon="19px",this.padding_right_icon="0px",this.align_left_icon="6px"):null!=this.align_icon&&"left"==this.align_icon?(this.align_left_icon="10px",this.padding_left_icon="25px",this.padding_right_icon="0px"):(this.padding_left_icon="0px",this.padding_right_icon="25px",this.align_right_icon="10px",this.align_right_date_icon="6px"),null==this.label_background_color&&(this.label_background_color="white"),null==this.tooltip_background_color&&(this.tooltip_background_color="black"),this.subscriptions.push(this.input.pipe((0,c.b)(10)).subscribe(d=>{this.onChange(d)}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ad-custom-input"]],viewQuery:function(t,d){if(1&t&&e.Gf(b,5),2&t){let p;e.iGM(p=e.CRH())&&(d.fileList=p.first)}},inputs:{inputValue:"inputValue",label:"label",forLabel:"forLabel",placeholder:"placeholder",accesskey:"accesskey",input_tooltip_placement:"input_tooltip_placement",input_tooltip:"input_tooltip",label_placement:"label_placement",label_color:"label_color",label_font_weight:"label_font_weight",icon_color:"icon_color",icon_placement:"icon_placement",icon_src:"icon_src",align_icon:"align_icon",width:"width",height:"height",align_right_icon:"align_right_icon",HTMLasString:"HTMLasString",align_left_icon:"align_left_icon",align_left_date_icon:"align_left_date_icon",align_right_date_icon:"align_right_date_icon",padding_left_icon:"padding_left_icon",padding_right_icon:"padding_right_icon",validations:"validations",error_message:"error_message",icon:"icon",label_background_color:"label_background_color",tooltip_background_color:"tooltip_background_color",label_tooltip:"label_tooltip",icon_tooltip:"icon_tooltip",type:"type",mask:"mask",debounceTime:"debounceTime",maxlength:"maxlength",disabled:"disabled",autofocus:"autofocus"},outputs:{onIconClick:"onIconClick"},features:[e._Bn([{provide:l.JU,useExisting:(0,e.Gpc)(()=>a),multi:!0}])],decls:2,vars:2,consts:[["class","textOnInput",3,"width","height","--tooltip_background_color",4,"ngIf"],["class","textOnInput",3,"--tooltip_background_color",4,"ngIf"],[1,"textOnInput"],["for","inputText",3,"placement","ngbTooltip","innerHTML"],[3,"placement","ngbTooltip","click"],[3,"src","placement","ngbTooltip","click"],["autofocus","autofocus",1,"form-control",3,"placeholder","ngModel","disabled","mask","ngClass","type","placement","ngbTooltip","maxlength","ngModelChange"],["fileList",""],["class","error-message",3,"ngbTooltip",4,"ngIf"],[1,"error-message",3,"ngbTooltip"],[1,"checkbox-div"],["type","checkbox",3,"ngModel","disabled","ngModelChange"]],template:function(t,d){1&t&&(e.YNc(0,T,13,65,"div",0),e.YNc(1,I,9,27,"div",1)),2&t&&(e.Q6J("ngIf","checkbox"!=d.type),e.xp6(1),e.Q6J("ngIf","checkbox"==d.type))},dependencies:[i.hx,g.mk,g.O5,x._L,l.Fj,l.Wl,l.JJ,l.nD,l.On,g.Ov,M.i],styles:['.textOnInput[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%}.textOnInput[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:-10px;left:5px;font-weight:var(--label_font_weight);color:var(--label-color)}.textOnInput[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:" ";background-color:var(--label-background-color);width:100%;height:13px;position:absolute;left:0;bottom:0;z-index:-1}label[_ngcontent-%COMP%]{font-size:11px;font-weight:800;display:inline-block;margin-bottom:.5rem;border-radius:5px;padding-left:5px;padding-right:5px}.textOnInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([type="checkbox"]){text-indent:5px;padding-right:var(--padding_right_icon);padding-left:var(--padding_left_icon);box-sizing:border-box;box-shadow:2px 2px 4px #90909066}.textOnInput[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{position:absolute;top:calc(50% - .4em);right:var(--align_right_icon);left:var(--align_left_icon);color:var(--icon-color)}.textOnInput[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{position:absolute;top:calc(50% - .4em);right:var(--align_right_icon);left:var(--align_left_icon)}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}input[type=checkbox][_ngcontent-%COMP%]{position:absolute;top:calc(50% - .5em);right:0px;width:34px;height:16px}.textOnInput[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{padding-left:0}input[_ngcontent-%COMP%]:hover{border:1px solid #F28705;border-color:#f28705}input[_ngcontent-%COMP%]:focus{border:1px solid #F28705;border-color:#f28705}input[_ngcontent-%COMP%]{border:1px solid #565759;box-shadow:2px 2px 4px #90909066;align-items:center}[_nghost-%COMP%]     .tooltip{font-size:.7rem}[_nghost-%COMP%]     .tooltip-inner{background-color:var(--tooltip_background_color)!important}[_nghost-%COMP%]     .bs-tooltip-auto[x-placement^=right] .arrow:after, .bs-tooltip-right[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]:after{border-right-color:var(--tooltip_background_color)!important}[_nghost-%COMP%]     .bs-tooltip-auto[x-placement^=left] .arrow:before, .bs-tooltip-left[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]:before{border-left-color:var(--tooltip_background_color)!important}[_nghost-%COMP%]     .bs-tooltip-auto[x-placement^=top] .arrow:before, .bs-tooltip-top[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]:before{border-top-color:var(--tooltip_background_color)!important}[_nghost-%COMP%]     .bs-tooltip-auto[x-placement^=bottom] .arrow:before, .bs-tooltip-bottom[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]:before{border-bottom-color:var(--tooltip_background_color)!important}.textOnInput[_ngcontent-%COMP%]   .checkbox-div[_ngcontent-%COMP%]{text-indent:5px;padding-right:30px;box-sizing:border-box;border:1px solid #565759;border-radius:4px;width:100%;height:31px}input[type=checkbox][_ngcontent-%COMP%]{position:absolute;top:calc(50% - .5em);width:20px;height:18px;margin-right:8px}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;bottom:0;cursor:pointer;height:auto;left:-30px;position:absolute;right:0;top:0;width:auto}input[type=date][_ngcontent-%COMP%]:before{background:none;display:block;font-family:"Font Awesome 5 Free";width:15px;height:20px;position:absolute;right:var(--align_right_date_icon);left:var(--align_left_date_icon)}input[type=date][_ngcontent-%COMP%]:invalid::-webkit-datetime-edit{color:#999}']}),a})()}}]);