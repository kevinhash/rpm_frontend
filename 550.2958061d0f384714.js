"use strict";(self.webpackChunktemplate_rpm_adnare=self.webpackChunktemplate_rpm_adnare||[]).push([[550],{8550:(H,h,s)=>{s.r(h),s.d(h,{DeviceSearchModule:()=>O});var p=s(36895),g=s(49671),z=s(88938),T=s(35226),d=s.n(T),f=s(54641),Z=s(58493),e=s(94650),b=s(39503),y=s(74241),v=s(62510),C=s(47044),x=s(73679),w=s(36704),A=s(47423),S=s(48521),c=s(40269),_=s(90433),u=s(46773),M=s(31237),N=s(80728),U=s(70827);const J=function(o){return{green:o}};function P(o,l){if(1&o){const n=e.EpF();e.TgZ(0,"tbody")(1,"tr",49),e.ynx(2),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.ALo(23,"date"),e.qZA(),e.TgZ(24,"td")(25,"div",50)(26,"i",51),e.NdJ("click",function(){const i=e.CHM(n).$implicit,a=e.oxw();return e.KtG(a.deleteDevice(i))}),e.qZA(),e.TgZ(27,"i",52),e.NdJ("click",function(){const i=e.CHM(n).$implicit,a=e.oxw();return e.KtG(a.editDevice(i))}),e.qZA()()(),e.BQk(),e.qZA()()}if(2&o){const n=l.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(15,J,null!==n.provider_name)),e.xp6(3),e.Oqu(n.enterprise_name),e.xp6(2),e.Oqu(n.manufacturer_name),e.xp6(2),e.Oqu(n.device_type_name),e.xp6(2),e.Oqu(n.serial_number),e.xp6(2),e.Oqu(n.imei),e.xp6(2),e.Oqu(n.sim),e.xp6(2),e.Oqu(n.device_status_name),e.xp6(2),e.Oqu(n.patient_name),e.xp6(2),e.Oqu(n.provider_name),e.xp6(2),e.Oqu(e.Dn7(23,11,null==n?null:n.last_reading,"short","IST"))}}function I(o,l){1&o&&e._UZ(0,"tbody")}f.vfs=Z.I.vfs;let q=(()=>{class o{constructor(n,t,r,i){this.patientService=n,this.deviceService=t,this.router=r,this.datepipe=i,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[10,20,30,40],this.get_all_data=!1,this.totalDevices=2,this.changePageSize=10,this.device_with_patients="",this.device_with_readings=""}handleKeyboardEvent(n){n.altKey&&("e"==n.key||"E"==n.key)&&n.preventDefault()}ngOnInit(){this.getEnterpriseSearchDropdown(),this.getDeviceTypesDropdown(),this.getDeviceStatusDropdown(),1==this.patientService.totalDevices?(this.patientService.totalDevices=!1,this.search()):1==this.patientService.assignedDevices?(this.patientService.assignedDevices=!1,this.deviceStatus=3,this.search()):1==this.patientService.unassignedDevices&&(this.deviceStatus=1,this.patientService.unassignedDevices=!1,this.search())}buildTableBody(n,t){var r=[];return r.push(t),n.forEach(i=>{var a=[];t.forEach(function(D){a.push(i[D.text])}),r.push(a)}),r}table(n,t){return{table:{headerRows:1,body:this.buildTableBody(n,t),fontSize:7,widths:[35,40,40,55,40,40,65,50,40,35]}}}downloadAllDevicesData(n){var t=this;return(0,g.Z)(function*(){if(t.patient_name){const r=t.patient_name.split(" ");r.length>1?(t.patient_first_name=r[0].toLowerCase(),t.patient_last_name=r[r.length-1].toLowerCase()):t.patientname=t.patient_name.toLowerCase()}if(t.provider_name){const r=t.provider_name.split(" ");r.length>1?(t.provider_first_name=r[0].toLowerCase(),t.provider_last_name=r[r.length-1].toLowerCase()):t.providername=t.provider_name.toLowerCase()}t.search_model={user_id:localStorage.getItem("user_id"),sort_order:t.sortOrder??"",sort_coloumn:t.sortField??"",page_number:t.pageIndex,page_size:t.pageSize,enterprise_id:t.enterprise??"",device_type_id:t.deviceType??"",device_status_id:t.deviceStatus??"",serial_number:t.serialNumber??"",patient_name:t.patientname??"",provider_name:t.providername??"",device_with_readings:t.device_with_readings??"",device_with_patients:t.device_with_patients??"",patient_first_name:t.patient_first_name??"",provider_first_name:t.provider_first_name??"",patient_last_name:t.patient_last_name??"",provider_last_name:t.provider_last_name??"",get_all_data:!0},t.deviceService.getDevices(t.search_model).subscribe(r=>{1==r.success?(t.deviceExportData=r.data.map(i=>({"Device Type":i.device_type_name??"","Serial Number":i.serial_number??"",Imei:i.imei??"",Sim:i.sim??"",Manufacturer:i.manufacturer_name??"","Device Status":i.device_status_name??"","Patient Name":i.patient_name??"",Entity:i.enterprise_name??"","Provider Name":i.provider_name??"","Last Downloaded":null==i.last_reading?"":t.datepipe.transform(i.last_reading,"MM/dd/yyyy hh:mm:ss ")})),"pdf"==n&&t.exportToPdf(t.deviceExportData),"csv"==n&&t.exportToCsv(t.deviceExportData)):d().fire({icon:"error",text:r.message})})})()}downloadDeviceData(n){null!=this.devices&&0!=this.devices.length?this.downloadAllDevicesData(n):d().fire({icon:"error",text:"No Record to Download"})}exportToCsv(n){new z.Sv(n,"Devices",{fieldSeparator:",",quoteStrings:'"',decimalseparator:".",title:"",useBom:!0,noDownload:!1,headers:["Device Type","Serial Number","Imei","Sim","Manufacturer","Device Status","Patient Name","Entity","Provider Name","Last Downloaded"]})}exportToPdf(n){var r={content:[{text:"Devices",fontSize:14,bold:!0},this.table(n,[{text:"Device Type",style:"tableHeader"},{text:"Serial Number",style:"tableHeader"},{text:"Imei",style:"tableHeader"},{text:"Sim",style:"tableHeader"},{text:"Manufacturer",style:"tableHeader"},{text:"Device Status",style:"tableHeader"},{text:"Patient Name",style:"tableHeader"},{text:"Entity",style:"tableHeader"},{text:"Provider Name",style:"tableHeader"},{text:"Last Downloaded",style:"tableHeader"}])],defaultStyle:{fontSize:9},styles:{tableHeader:{bold:!0,fontSize:9,color:"white",fillColor:"#4A2D73"}}};f.createPdf(r).download("Devices.pdf")}getEnterpriseSearchDropdown(){this.userId=localStorage.getItem("user_id"),this.patientService.getActiveEnterpriseDropdownData(this.userId).subscribe(n=>{1==n.success?(this.enterpriseData=n.data,1==this.enterpriseData.length&&(this.enterprise=this.enterpriseData[0].id)):d().fire({icon:"error",text:n.message})})}getDeviceTypesDropdown(){this.deviceService.getDeviceTypesDropdown().subscribe(n=>{1==n.success?this.deviceTypesData=n.data:d().fire({icon:"error",text:n.message})})}getDeviceStatusDropdown(){this.deviceService.getDeviceStatus().subscribe(n=>{1==n.success?this.deviceStatusData=n.data:d().fire({icon:"error",text:n.message})})}onQueryParamsChange(n){var t=this;return(0,g.Z)(function*(){t.prev_pageIndex=null!=t.savedParams?t.savedParams.pageIndex:null,t.savedParams=n;const{pageIndex:i,sort:a}=n,m=a.find(E=>null!==E.value);t.sortField=m&&m.key||null,t.sortOrder=m&&m.value||null,t.pageIndex=i,(null!=t.devices&&null!=t.sortField&&null!=t.sortOrder||null!=t.prev_pageIndex&&t.prev_pageIndex!=t.pageIndex||t.changePageSize!=t.pageSize)&&t.getDevices(),t.changePageSize=t.pageSize})()}getDevices(){if(this.patient_name){const n=this.patient_name.split(" ");n.length>1?(this.patient_first_name=n[0].toLowerCase(),this.patient_last_name=n[n.length-1].toLowerCase()):(this.patient_first_name="",this.patient_last_name="",this.patientname=this.patient_name.toLowerCase())}else this.patient_first_name="",this.patient_last_name="",this.patientname="";if(this.provider_name){const n=this.provider_name.split(" ");n.length>1?(this.provider_first_name=n[0].toLowerCase(),this.provider_last_name=n[n.length-1].toLowerCase()):(this.provider_first_name="",this.provider_last_name="",this.providername=this.provider_name.toLowerCase())}else this.provider_first_name="",this.provider_last_name="",this.providername="";this.search_model={user_id:localStorage.getItem("user_id"),sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,enterprise_id:this.enterprise??"",device_type_id:this.deviceType??"",device_status_id:this.deviceStatus??"",serial_number:this.serialNumber??"",patient_name:this.patientname??"",provider_name:this.providername??"",patient_first_name:this.patient_first_name??"",provider_first_name:this.provider_first_name??"",patient_last_name:this.patient_last_name??"",device_with_readings:this.device_with_readings??"",device_with_patients:this.device_with_patients??"",provider_last_name:this.provider_last_name??"",get_all_data:this.get_all_data},this.deviceService.getDevices(this.search_model).subscribe(n=>{1==n.success?(this.devices=n.data,this.totalDevices=n.data.length>0?n.data[0].total_record_count:0):d().fire({icon:"error",text:n.message})})}search(){this.pageIndex=1,this.getDevices()}handleClear(){this.providername="",this.patientname="",this.device_with_patients="",this.device_with_readings="",this.patient_first_name="",this.provider_first_name="",this.patient_last_name="",this.provider_last_name="",this.serialNumber="",this.patient_name="",this.provider_name="",this.deviceType=void 0,this.deviceStatus=void 0,this.enterprise=void 0,this.getDevices()}addDevice(){this.router.navigate(["/add-device"]),this.deviceService.device_id=null,this.deviceService.method="create"}editDevice(n){this.deviceService.method="update",this.deviceService.device_id=n.device_id,this.router.navigate(["/add-device"])}deleteDevice(n){this.deviceService.deleteDeviceInfo(n.device_id).subscribe(t=>{1==t.success?(d().fire({icon:"success",text:t.message}),this.pageIndex=1,this.getDevices()):d().fire({icon:"error",text:t.message})})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(b.e),e.Y36(y.U),e.Y36(v.F0),e.Y36(p.uU))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-device-search"]],hostBindings:function(n,t){1&n&&e.NdJ("keydown",function(i){return t.handleKeyboardEvent(i)},!1,e.Jf7)},decls:104,vars:39,consts:[[1,"screen"],[1,"screen-header"],[1,"screen-name"],["ngbTooltip","Search","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-search"],[1,"screen-header-btn","margin-right",3,"click"],[1,"pipe"],["ngbDropdown","",1,"d-inline-block"],["Export","ngbDropdown"],["id","dropdownManual2",1,"screen-header-btn","margin-right",3,"focus"],[3,"src"],[1,"pipe-inside-btn"],[1,"fa","fa-chevron-down"],["ngbDropdownMenu","","aria-labelledby","dropdownManual2"],["ngbDropdownItem","",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-file-csv"],[1,"fa","fa-file-pdf"],[1,"screen-header-btn",3,"click"],[1,"screen-search-criteria-div"],[1,"row"],[1,"col-lg-3","col-md-2","col-sm-6","col-xs-6"],["label","Entity","dropdown_placeholder","Entity","bindLabel","name","icon","fa fa-square-plus","align_icon","left",3,"ngModel","dropdownListData","ngModelChange"],["label","Device Type","dropdown_placeholder","Device Type","bindLabel","name","icon","fa fa-shield","align_icon","left",3,"ngModel","dropdownListData","ngModelChange"],["label","Device Status","dropdown_placeholder","Device Status","bindLabel","name","icon","fa fa-book-medical","align_icon","left",3,"ngModel","dropdownListData","ngModelChange"],["type","text","placeholder","Serial Number","label","Serial Number","icon","fa fa-user","accesskey","S","align_icon","left",3,"ngModel","ngModelChange"],["type","text","placeholder","Patient Name","label","Patient Name","accesskey","E","icon","fa fa-user","align_icon","left",3,"ngModel","ngModelChange"],["type","text","placeholder","Provider Name","label","Provider Name","accesskey","P","icon","fa fa-user","align_icon","left",3,"ngModel","ngModelChange"],[2,"margin-right","10px"],[3,"ngModel","ngModelChange"],["nz-radio","","nzValue","1"],["nz-radio","","nzValue","0"],["nz-radio","","nzValue",""],[1,"table-div"],["nzShowSizeChanger","",1,"ch-table",3,"nzPageSizeOptions","nzFrontPagination","nzTotal","nzPageIndex","nzPageSize","nzData","nzQueryParams","nzPageIndexChange","nzPageSizeChange"],["nzTable","","sortTable","","filterTable",""],["nzColumnKey","enterprise",3,"nzSortFn"],["nzColumnKey","manufacturer",3,"nzSortFn"],["nzColumnKey","device_type",3,"nzSortFn"],["nzColumnKey","serial_number",3,"nzSortFn"],["nzColumnKey","imei",3,"nzSortFn"],["nzColumnKey","sim",3,"nzSortFn"],["nzColumnKey","device_status",3,"nzSortFn"],["nzColumnKey","patient_name",3,"nzSortFn"],["nzColumnKey","provider_name",3,"nzSortFn"],["nzColumnKey","last_reading",3,"nzSortFn"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"total"],[1,"total-span"],[3,"ngClass"],[1,"table-icon-container",2,"display","flex"],["nz-icon","","nzType","delete","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Delete",1,"table-coloumn-icons",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Edit",1,"table-coloumn-icons",3,"click"]],template:function(n,t){if(1&n){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3," Device Search "),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return t.search()}),e._UZ(6,"span",4),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return t.handleClear()}),e._uU(8,"Clear All"),e.qZA(),e._UZ(9,"span",6)(10,"span",6),e.TgZ(11,"div",7,8)(13,"button",9),e.NdJ("focus",function(){e.CHM(r);const a=e.MAs(12);return e.KtG(a.open())}),e._UZ(14,"img",10),e.ALo(15,"assetsSource"),e._uU(16," Export "),e._UZ(17,"span",11)(18,"span",12),e.qZA(),e.TgZ(19,"div",13)(20,"button",14),e.NdJ("click",function(){return t.downloadDeviceData("csv")}),e._UZ(21,"i",15),e._uU(22," CSV "),e.qZA(),e.TgZ(23,"button",14),e.NdJ("click",function(){return t.downloadDeviceData("pdf")}),e._UZ(24,"i",16),e._uU(25," PDF "),e.qZA()()(),e._UZ(26,"span",6),e.TgZ(27,"button",17),e.NdJ("click",function(){return t.addDevice()}),e._UZ(28,"img",10),e.ALo(29,"assetsSource"),e._uU(30," Device "),e.qZA()()(),e.TgZ(31,"div",18)(32,"div",19)(33,"div",20)(34,"app-ad-custom-dropdown",21),e.NdJ("ngModelChange",function(a){return t.enterprise=a}),e.qZA()(),e.TgZ(35,"div",20)(36,"app-ad-custom-dropdown",22),e.NdJ("ngModelChange",function(a){return t.deviceType=a}),e.qZA()(),e.TgZ(37,"div",20)(38,"app-ad-custom-dropdown",23),e.NdJ("ngModelChange",function(a){return t.deviceStatus=a}),e.qZA()(),e.TgZ(39,"div",20)(40,"app-ad-custom-input",24),e.NdJ("ngModelChange",function(a){return t.serialNumber=a}),e.qZA()()(),e.TgZ(41,"div",19)(42,"div",20)(43,"app-ad-custom-input",25),e.NdJ("ngModelChange",function(a){return t.patient_name=a}),e.qZA()(),e.TgZ(44,"div",20)(45,"app-ad-custom-input",26),e.NdJ("ngModelChange",function(a){return t.provider_name=a}),e.qZA()(),e.TgZ(46,"div",20)(47,"nz-form-item")(48,"b",27),e._uU(49,"Devices with Patients:"),e.qZA(),e.TgZ(50,"nz-radio-group",28),e.NdJ("ngModelChange",function(a){return t.device_with_patients=a}),e.TgZ(51,"label",29),e._uU(52,"Yes"),e.qZA(),e.TgZ(53,"label",30),e._uU(54,"No"),e.qZA(),e.TgZ(55,"label",31),e._uU(56,"All"),e.qZA()()()(),e.TgZ(57,"div",20)(58,"nz-form-item")(59,"b",27),e._uU(60,"Devices with Readings:"),e.qZA(),e.TgZ(61,"nz-radio-group",28),e.NdJ("ngModelChange",function(a){return t.device_with_readings=a}),e.TgZ(62,"label",29),e._uU(63,"Yes"),e.qZA(),e.TgZ(64,"label",30),e._uU(65,"No"),e.qZA(),e.TgZ(66,"label",31),e._uU(67,"All"),e.qZA()()()()()(),e.TgZ(68,"div",32)(69,"nz-table",33,34),e.NdJ("nzQueryParams",function(a){return t.onQueryParamsChange(a)})("nzPageIndexChange",function(a){return t.pageIndex=a})("nzPageSizeChange",function(a){return t.pageSize=a}),e.TgZ(73,"thead")(74,"tr")(75,"th",35),e._uU(76,"Entity"),e.qZA(),e.TgZ(77,"th",36),e._uU(78,"Manufacturer"),e.qZA(),e.TgZ(79,"th",37),e._uU(80,"Device Type"),e.qZA(),e.TgZ(81,"th",38),e._uU(82,"Serial Number"),e.qZA(),e.TgZ(83,"th",39),e._uU(84,"IMEI"),e.qZA(),e.TgZ(85,"th",40),e._uU(86,"SIM"),e.qZA(),e.TgZ(87,"th",41),e._uU(88,"Device Status"),e.qZA(),e.TgZ(89,"th",42),e._uU(90,"Patient Name"),e.qZA(),e.TgZ(91,"th",43),e._uU(92,"Provider Name"),e.qZA(),e.TgZ(93,"th",44),e._uU(94,"Last Reading"),e.qZA(),e.TgZ(95,"th"),e._uU(96,"Actions"),e.qZA()()(),e.YNc(97,P,28,17,"tbody",45),e.YNc(98,I,1,0,"tbody",46),e.qZA(),e.TgZ(99,"div",47),e._UZ(100,"img",10),e.ALo(101,"assetsSource"),e.TgZ(102,"span",48),e._uU(103),e.qZA()()()()}if(2&n){const r=e.MAs(71);e.xp6(14),e.Q6J("src",e.lcZ(15,33,"export.png"),e.LSH),e.xp6(14),e.Q6J("src",e.lcZ(29,35,"patient.png"),e.LSH),e.xp6(6),e.Q6J("ngModel",t.enterprise)("dropdownListData",t.enterpriseData),e.xp6(2),e.Q6J("ngModel",t.deviceType)("dropdownListData",t.deviceTypesData),e.xp6(2),e.Q6J("ngModel",t.deviceStatus)("dropdownListData",t.deviceStatusData),e.xp6(2),e.Q6J("ngModel",t.serialNumber),e.xp6(3),e.Q6J("ngModel",t.patient_name),e.xp6(2),e.Q6J("ngModel",t.provider_name),e.xp6(5),e.Q6J("ngModel",t.device_with_patients),e.xp6(11),e.Q6J("ngModel",t.device_with_readings),e.xp6(8),e.Q6J("nzPageSizeOptions",t.pageSizeOptions)("nzFrontPagination",!1)("nzTotal",t.totalDevices)("nzPageIndex",t.pageIndex)("nzPageSize",t.pageSize)("nzData",t.devices),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(4),e.Q6J("ngForOf",r.data),e.xp6(1),e.Q6J("ngIf",0==r.data.length),e.xp6(2),e.Q6J("src",e.lcZ(101,37,"total.png"),e.LSH),e.xp6(3),e.Oqu(t.totalDevices)}},dependencies:[p.mk,p.sg,p.O5,C.w,x.SK,w.Nx,A.Ls,S.Of,S.Dg,c.N8,c.qD,c.Uo,c._C,c.Om,c.p0,c.$Z,_.JJ,_.On,u.jt,u.Vi,u.TH,u._L,M.y,N.v,p.uU,U.n],styles:['.ant-form-item[_ngcontent-%COMP%]{box-sizing:border-box;margin-top:7px;padding:0;color:#000000d9;font-size:14px;font-variant:tabular-nums;line-height:1.5715;list-style:none;font-feature-settings:"tnum","tnum";vertical-align:top;width:max-content}']}),o})();var F=s(91083),L=s(29193);const Q=[{path:"",component:q}];let O=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,F.T,v.Bz.forChild(Q),_.u5,_.UX,u.IJ,L.m,v.Bz]}),o})()}}]);