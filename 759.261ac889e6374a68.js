"use strict";(self.webpackChunktemplate_rpm_adnare=self.webpackChunktemplate_rpm_adnare||[]).push([[759],{6759:(H,_,o)=>{o.r(_),o.d(_,{DataRolesSearchModule:()=>L});var c=o(6895),m=o(2510),S=o(1083),u=o(433),p=o(6773),C=o(8740),f=o(9671),Z=o(8938),T=o(5226),g=o.n(T),v=o(4641),R=o(8493),e=o(4650),b=o(9503),x=o(4392),y=o(7044),A=o(3679),M=o(6704),P=o(7423),z=o(8521),U=o(1243),s=o(269),J=o(1237),O=o(827);const F=function(){return{standalone:!0}};function I(i,d){if(1&i){const a=e.EpF();e.TgZ(0,"tbody")(1,"tr"),e.ynx(2),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td")(15,"div"),e.ynx(16),e.TgZ(17,"nz-switch",41),e.NdJ("ngModelChange",function(l){const r=e.CHM(a).$implicit;return e.KtG(r.active_switch=l)}),e.qZA(),e.BQk(),e.qZA()(),e.TgZ(18,"td")(19,"div",42)(20,"i",43),e.NdJ("click",function(){const n=e.CHM(a).$implicit,r=e.oxw();return e.KtG(r.deleteDataRole(n))}),e.qZA(),e.TgZ(21,"i",44),e.NdJ("click",function(){const n=e.CHM(a).$implicit,r=e.oxw();return e.KtG(r.editDataRole(n))}),e.qZA()()(),e.BQk(),e.qZA()()}if(2&i){const a=d.$implicit;e.xp6(4),e.Oqu(a.name),e.xp6(2),e.Oqu(a.permission_level),e.xp6(2),e.Oqu(a.description),e.xp6(2),e.AsE("",a.created_by_first_name," ",a.created_by_last_name,""),e.xp6(2),e.Oqu(e.xi3(13,9,a.created_on,"MM/dd/yyyy hh:mm:ss")),e.xp6(5),e.Q6J("ngModel",a.active_switch)("ngModelOptions",e.DdM(12,F))("nzDisabled",!0)}}function Q(i,d){1&i&&e._UZ(0,"tbody")}v.vfs=R.I.vfs;const N=[{path:"",component:(()=>{class i{constructor(a,t,l,n){this.patientService=a,this.dataRoleService=t,this.router=l,this.datepipe=n,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[10,15,20,25,30],this.get_all_data=!1,this.totalDataRoles=0,this.changePageSize=10}ngOnInit(){this.is_active=""}buildTableBody(a,t){var l=[];return l.push(t),a.forEach(n=>{var r=[];t.forEach(function(D){r.push(n[D.text])}),l.push(r)}),l}table(a,t){return{table:{headerRows:1,body:this.buildTableBody(a,t),dontBreakRows:!0,fontSize:10,widths:[82,82,92,82,72]}}}downloadAllDataRolesData(a){var t=this;return(0,f.Z)(function*(){t.search_model={user_id:localStorage.getItem("user_id"),sort_order:t.sortOrder??"",sort_coloumn:t.sortField??"",page_number:t.pageIndex,page_size:t.pageSize,is_active:t.is_active??"",permission_level:t.permission_level??"",data_role:t.data_role??"",get_all_data:!0},t.dataRoleService.getDataRoleGridData(t.search_model).subscribe(l=>{1==l.success?(t.dataRoleExportData=l.data.map(n=>({Name:n.name,"Permission Level":n.permission_level,Description:n.description,"Created By":n.created_by_first_name+" "+n.created_by_last_name,"Created On":t.datepipe.transform(n.created_on,"MM/dd/yyyy hh:mm:ss")})),"pdf"==a&&t.exportToPdf(t.dataRoleExportData),"csv"==a&&t.exportToCsv(t.dataRoleExportData)):g().fire({icon:"error",text:l.message})})})()}downloadDataRolesData(a){null!=this.dataRoleTableData&&0!=this.dataRoleTableData.length?this.downloadAllDataRolesData(a):g().fire({icon:"error",text:"No Record to Download"})}exportToCsv(a){new Z.Sv(a,"Data Roles",{fieldSeparator:",",quoteStrings:'"',decimalseparator:".",title:"",useBom:!0,noDownload:!1,headers:["Name","Permission Level","Description","Created By","Created On"]})}exportToPdf(a){var l={content:[{text:"Data Roles",fontSize:7,bold:!0},this.table(a,[{text:"Name",style:"tableHeader"},{text:"Permission Level",style:"tableHeader"},{text:"Description",style:"tableHeader"},{text:"Created By",style:"tableHeader"},{text:"Created On",style:"tableHeader"}])],defaultStyle:{fontSize:10},styles:{tableHeader:{bold:!0,fontSize:10,color:"white",fillColor:"#4A2D73"}}};v.createPdf(l).download("Data Roles.pdf")}onQueryParamsChange(a){var t=this;return(0,f.Z)(function*(){t.prev_pageIndex=null!=t.savedParams?t.savedParams.pageIndex:null,t.savedParams=a;const{pageIndex:n,sort:r}=a,h=r.find(G=>null!==G.value);t.sortField=h&&h.key||null,t.sortOrder=h&&h.value||null,t.pageIndex=n,(null!=t.dataRoleTableData&&null!=t.sortField&&null!=t.sortOrder||null!=t.prev_pageIndex&&t.prev_pageIndex!=t.pageIndex||t.changePageSize!=t.pageSize)&&t.getDataRoleGridData(),t.changePageSize=t.pageSize})()}getDataRoleGridData(){this.search_model={user_id:localStorage.getItem("user_id"),sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,is_active:this.is_active??"",permission_level:this.permission_level??"",data_role:this.data_role??"",get_all_data:!1},this.dataRoleService.getDataRoleGridData(this.search_model).subscribe(a=>{1==a.success?(this.dataRoleTableData=a.data,this.totalDataRoles=a.data.length>0?a.data[0].total_record_count:0):g().fire({icon:"error",text:a.message})})}search(){this.pageIndex=1,this.getDataRoleGridData()}handleClear(){this.data_role="",this.permission_level="",this.is_active="",this.getDataRoleGridData()}addDataRole(){this.dataRoleService.data_role_id=null,this.dataRoleService.method="create",this.router.navigate(["/add-data-roles"])}editDataRole(a){this.dataRoleService.method="update",this.dataRoleService.data_role_id=a.data_role_id,this.router.navigate(["/add-data-roles"])}deleteDataRole(a){this.dataRoleService.deleteDataRole(a.data_role_id).subscribe(t=>{1==t.success?(g().fire({icon:"success",text:t.message}),this.pageIndex=1,this.getDataRoleGridData()):g().fire({icon:"error",text:t.message})})}}return i.\u0275fac=function(a){return new(a||i)(e.Y36(b.e),e.Y36(x.p),e.Y36(m.F0),e.Y36(c.uU))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-data-roles-search"]],decls:73,vars:27,consts:[[1,"screen"],[1,"screen-header"],[1,"screen-name"],["ngbTooltip","Search","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-search"],[1,"screen-header-btn","margin-right",3,"click"],[1,"pipe"],["ngbDropdown","",1,"d-inline-block"],["Export","ngbDropdown"],["id","dropdownManual2",1,"screen-header-btn","margin-right",3,"focus"],[3,"src"],[1,"pipe-inside-btn"],[1,"fa","fa-chevron-down"],["ngbDropdownMenu","","aria-labelledby","dropdownManual2"],["ngbDropdownItem","",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-file-csv"],[1,"fa","fa-file-pdf"],[1,"screen-header-btn",3,"click"],[1,"screen-search-criteria-div"],[1,"row"],[1,"col-lg-3","col-md-3","col-sm-6","col-xs-6"],["type","text","placeholder","Data Role","label","Data Role","align_icon","left",3,"ngModel","ngModelChange"],["type","text","placeholder","Permission Level","label","Permission Level","align_icon","left",3,"ngModel","ngModelChange"],[1,"col-lg-3","col-md-3","col-lg-3","col-md-5","margin-top-left"],[3,"ngModel","ngModelChange"],["nz-radio","","nzValue","1"],["nz-radio","","nzValue","0"],["nz-radio","","nzValue",""],[1,"table-div"],["nzShowSizeChanger","",1,"ch-table",3,"nzPageSizeOptions","nzFrontPagination","nzTotal","nzPageIndex","nzPageSize","nzData","nzQueryParams","nzPageIndexChange","nzPageSizeChange"],["nzTable","","sortTable","","filterTable",""],["nzColumnKey","name",3,"nzSortFn"],["nzColumnKey","permission_level",3,"nzSortFn"],["nzColumnKey","description",3,"nzSortFn"],["nzColumnKey","created_by",3,"nzSortFn"],["nzColumnKey","created_on",3,"nzSortFn"],["nzColumnKey","active",3,"nzSortFn"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"total"],[1,"total-span"],[1,"rpm-switch",3,"ngModel","ngModelOptions","nzDisabled","ngModelChange"],[1,"table-icon-container"],["nz-icon","","nzType","delete","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Delete",1,"table-coloumn-icons",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Edit",1,"table-coloumn-icons",3,"click"]],template:function(a,t){if(1&a){const l=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3," Data Role Search "),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return t.search()}),e._UZ(6,"span",4),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return t.handleClear()}),e._uU(8,"Clear All"),e.qZA(),e._UZ(9,"span",6),e.TgZ(10,"div",7,8)(12,"button",9),e.NdJ("focus",function(){e.CHM(l);const r=e.MAs(11);return e.KtG(r.open())}),e._UZ(13,"img",10),e.ALo(14,"assetsSource"),e._uU(15," Export "),e._UZ(16,"span",11)(17,"span",12),e.qZA(),e.TgZ(18,"div",13)(19,"button",14),e.NdJ("click",function(){return t.downloadDataRolesData("csv")}),e._UZ(20,"i",15),e._uU(21," CSV "),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return t.downloadDataRolesData("pdf")}),e._UZ(23,"i",16),e._uU(24," PDF "),e.qZA()()(),e._UZ(25,"span",6),e.TgZ(26,"button",17),e.NdJ("click",function(){return t.addDataRole()}),e._UZ(27,"img",10),e.ALo(28,"assetsSource"),e._uU(29," Data Role "),e.qZA()()(),e.TgZ(30,"div",18)(31,"div",19)(32,"div",20)(33,"app-ad-custom-input",21),e.NdJ("ngModelChange",function(r){return t.data_role=r}),e.qZA()(),e.TgZ(34,"div",20)(35,"app-ad-custom-input",22),e.NdJ("ngModelChange",function(r){return t.permission_level=r}),e.qZA()(),e.TgZ(36,"div",23)(37,"nz-form-item")(38,"nz-radio-group",24),e.NdJ("ngModelChange",function(r){return t.is_active=r}),e.TgZ(39,"label",25),e._uU(40,"Active"),e.qZA(),e.TgZ(41,"label",26),e._uU(42,"Inactive"),e.qZA(),e.TgZ(43,"label",27),e._uU(44,"All"),e.qZA()()()()(),e.TgZ(45,"div",28)(46,"nz-table",29,30),e.NdJ("nzQueryParams",function(r){return t.onQueryParamsChange(r)})("nzPageIndexChange",function(r){return t.pageIndex=r})("nzPageSizeChange",function(r){return t.pageSize=r}),e.TgZ(50,"thead")(51,"tr")(52,"th",31),e._uU(53,"Name"),e.qZA(),e.TgZ(54,"th",32),e._uU(55,"Permission Level"),e.qZA(),e.TgZ(56,"th",33),e._uU(57,"Description"),e.qZA(),e.TgZ(58,"th",34),e._uU(59,"Created By"),e.qZA(),e.TgZ(60,"th",35),e._uU(61,"Created On"),e.qZA(),e.TgZ(62,"th",36),e._uU(63,"Active"),e.qZA(),e.TgZ(64,"th"),e._uU(65,"Actions"),e.qZA()()(),e.YNc(66,I,22,13,"tbody",37),e.YNc(67,Q,1,0,"tbody",38),e.qZA(),e.TgZ(68,"div",39),e._UZ(69,"img",10),e.ALo(70,"assetsSource"),e.TgZ(71,"span",40),e._uU(72),e.qZA()()()()()}if(2&a){const l=e.MAs(48);e.xp6(13),e.Q6J("src",e.lcZ(14,21,"export.png"),e.LSH),e.xp6(14),e.Q6J("src",e.lcZ(28,23,"patient.png"),e.LSH),e.xp6(6),e.Q6J("ngModel",t.data_role),e.xp6(2),e.Q6J("ngModel",t.permission_level),e.xp6(3),e.Q6J("ngModel",t.is_active),e.xp6(8),e.Q6J("nzPageSizeOptions",t.pageSizeOptions)("nzFrontPagination",!1)("nzTotal",t.totalDataRoles)("nzPageIndex",t.pageIndex)("nzPageSize",t.pageSize)("nzData",t.dataRoleTableData),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(4),e.Q6J("ngForOf",l.data),e.xp6(1),e.Q6J("ngIf",0==l.data.length),e.xp6(2),e.Q6J("src",e.lcZ(70,25,"total.png"),e.LSH),e.xp6(3),e.Oqu(t.totalDataRoles)}},dependencies:[c.sg,c.O5,y.w,A.SK,M.Nx,P.Ls,z.Of,z.Dg,U.i,s.N8,s.qD,s.Uo,s._C,s.Om,s.p0,s.$Z,u.JJ,u.On,p.jt,p.Vi,p.TH,p._L,J.y,c.uU,O.n],styles:[".margin-top-left[_ngcontent-%COMP%]{margin-top:17px}"]}),i})()}];let L=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.ez,S.T,m.Bz.forChild(N),u.u5,u.UX,p.IJ,C.m,m.Bz]}),i})()}}]);