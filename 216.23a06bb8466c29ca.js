"use strict";(self.webpackChunktemplate_rpm_adnare=self.webpackChunktemplate_rpm_adnare||[]).push([[216],{23216:(an,K,p)=>{p.r(K),p.d(K,{AddPatientModule:()=>nn});var _=p(36895),Z=p(62510),l=p(90433),h=p(46773),E=p(29193),G=p(91083),x=p(35129),w=p(47423),e=p(94650),Y=p(62223),y=p(49671),$=p(35226),d=p.n($),J=p(53583),V=p(4159),F=p.n(V),v=p(80728),W=p(91684),H=p(24339),S=p(39503),f=p(73679),C=p(36704),q=p(18284),M=p(50007),u=p(40269),j=p(13255),N=p(70827);const X=["content"];function ee(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.pre())}),e.TgZ(1,"span"),e._uU(2,"Previous"),e.qZA()()}}function te(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.next())}),e.TgZ(1,"span"),e._uU(2,"Next"),e.qZA()()}}function ne(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr",22),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.viewMonitoringDocument(o))}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",23),e._uU(4),e.qZA(),e.TgZ(5,"td",23),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA()()}if(2&a){const t=s.$implicit;e.xp6(2),e.Oqu(null==t?null:t.month),e.xp6(1),e.Q6J("ngClass",t.days_of_readings>=16?"green":"red"),e.xp6(1),e.Oqu(null==t?null:t.days_of_readings),e.xp6(1),e.Q6J("ngClass",t.minutes>=20&&(null==t?null:t.days_of_readings)>=16?"green":"red"),e.xp6(1),e.Oqu(null==t?null:t.minutes),e.xp6(2),e.Oqu(null==t?null:t.cycle_number),e.xp6(2),e.Oqu(null==t?null:t.downloaded_by),e.xp6(2),e.Oqu(e.Dn7(13,8,null==t?null:t.downloaded_at,"short","IST"))}}function ie(a,s){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.downloadReport())}),e._UZ(2,"span",25),e.qZA(),e.TgZ(3,"nz-layout",26)(4,"nz-content",27),e._UZ(5,"app-remote-monitoring-doc"),e.qZA()(),e.BQk()}}function ae(a,s){if(1&a&&(e.TgZ(0,"div",28)(1,"div",29)(2,"div",30),e._UZ(3,"div",31),e.qZA()()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("innerHTML",t.response,e.oJD)}}const oe=function(){return{padding:"0px"}};let se=(()=>{class a{constructor(t,n,i,o,r){this.billingService=t,this.dashboardService=n,this.modalService=i,this.patientService=o,this.addPatientComponent=r,this.status="Pending",this.hide=!1,this.current=this.addPatientComponent.current,this.pageSizeOptionsBillingCycles=[10,20,30,40],this.pageSizeBillingCycles=10,this.pageIndexBillingCycles=1,this.showRemoteMonitoringDoc=!1,this.get_all_data=!1,this.buildForm()}handleKeyboardEvent(t){t.ctrlKey&&("H"==t.key||"h"==t.key)&&t.shiftKey&&(t.preventDefault(),this.help(this.content)),("n"==t.key||"N"==t.key)&&t.altKey&&this.next(),t.altKey&&("P"==t.key||"p"==t.key)&&this.pre(),t.altKey&&("x"==t.key||"X"==t.key)&&this.close()}ngOnInit(){}onQueryBillingCycles(t){var n=this;return(0,y.Z)(function*(){n.prev_pageIndex=null!=n.savedParams?n.savedParams.pageIndex:null,n.savedParams=t;const{pageIndex:o,sort:r}=t,c=r.find(g=>null!==g.value);n.sortFieldBillingCycles=c&&c.key||null,n.sortOrderBillingCycles=c&&c.value||null,n.pageIndexBillingCycles=o,n.getBillingCycles()})()}getBillingCycles(){if(this.patient_name){const t=this.patient_name.split(" ");t.length>1?(this.patient_first_name=t[0].toLowerCase(),this.patient_last_name=t[t.length-1].toLowerCase()):this.patient_name=this.patient_name.toLowerCase()}this.search_model={user_id:localStorage.getItem("user_id"),patient_id:this.patientService.patient_id,sort_order:this.sortOrderBillingCycles??"",sort_coloumn:this.sortFieldBillingCycles??"",page_number:this.pageIndexBillingCycles,page_size:this.pageSizeBillingCycles,get_all_data:this.get_all_data,patient_first_name:this.patient_first_name??"",patient_last_name:this.patient_last_name??"",patient_name:this.patient_name??"",month:null===this.month_||null==this.month_||""==this.month_?"":this.convert(this.month_),status:"All"},this.dashboardService.getBillingCycles(this.search_model).subscribe(t=>{1==t.success?(this.BillingCycles=t.data,this.totalBillingCycles=t.data.length>0?t.data[0].total_record_count:0):d().fire({icon:"error",text:t.message})})}convert(t){const n=new Date(t),i=("0"+(n.getMonth()+1)).slice(-2),o=("0"+n.getDate()).slice(-2),r=("0"+n.getHours()).slice(-2),m=("0"+n.getHours()).slice(-2),c=("0"+n.getHours()).slice(-2);return[[n.getFullYear(),i,o].join("-"),[r,m,c].join(":")].join(" ")}downloadReport(){d().fire({icon:"warning",text:"Do you want to change the status to completed?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(t=>{if(t.isConfirmed)this.updateCompletedStatus(this.billingService.rpm_billing_data);else if(t.isDenied){let T=this.billingService.rpm_billing_data?.patient_first_name+" "+this.billingService.rpm_billing_data?.patient_last_name;var n=document.getElementById("remote_monitoring_doc").offsetWidth,i=document.getElementById("remote_monitoring_doc").offsetHeight,r=n+30,m=1.5*r+30,c=n,g=i,b=Math.ceil(i/m)-1;F()(document.getElementById("remote_monitoring_doc")).then(function(B){var O=B.toDataURL("image/jpeg",1),k=new J.ZP("p","pt",[r,m]);k.addImage(O,"JPG",15,15,c,g);for(var I=1;I<=b;I++)k.addPage([r,m],"p"),k.addImage(O,"JPG",15,-m*I+60,c,g);k.save("Patient Monitoring Document_"+T+".pdf")}),this.showRemoteMonitoringDoc=!1}})}help(t){this.patientService.getPatientSearchHelpResponse("readings").subscribe(n=>{1==n.success?(this.modalService.open(t,{size:"md"}),this.response=n.data.content,this.style=n.data.styles):d().fire({icon:"error",text:n.message})})}next(){this.current=this.addPatientComponent.current,this.addPatientComponent.step(this.current+1)}pre(){this.current=this.addPatientComponent.current,this.addPatientComponent.step(this.current-1)}close(){this.modalService.dismissAll()}updateCompletedStatus(t){this.search_model={user_id:localStorage.getItem("user_id"),rpm_care_plan_id:t.rpm_care_plan_id,patient_id:t.patient_id,month:t.month},this.billingService.updateCompleteStatus(this.search_model).subscribe(n=>{if(1==n.success){let B=this.billingService.rpm_billing_data?.patientFirstName+(this.billingService.rpm_billing_data?.patientMiddleName??"")+" "+this.billingService.rpm_billing_data?.patientLastName,O=this.billingService.rpm_billing_data?.rpm_billing_id;var i=document.getElementById("remote_monitoring_doc").offsetWidth,o=document.getElementById("remote_monitoring_doc").offsetHeight,m=i+30,c=1.5*m+30,g=i,b=o,T=Math.ceil(o/c)-1;F()(document.getElementById("remote_monitoring_doc")).then(function(k){var I=k.toDataURL("image/jpeg",1),U=new J.ZP("p","pt",[m,c]);U.addImage(I,"JPG",15,15,g,b);for(var R=1;R<=T;R++)U.addPage([m,c],"p"),U.addImage(I,"JPG",15,-c*R+60,g,b);U.save("Patient Monitoring Document_"+B+"_"+O+".pdf")}),this.showRemoteMonitoringDoc=!1,this.getBillingCycles()}else d().fire({icon:"error",text:n.message})})}viewMonitoringDocument(t){t.pending_emr=!0,this.showRemoteMonitoringDoc=!0,this.billingService.rpm_billing_data=t}handleCancel(){this.showRemoteMonitoringDoc=!1}buildForm(){}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(W.j),e.Y36(H.s),e.Y36(h.FF),e.Y36(S.e),e.Y36(x.R))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-pending-emr"]],viewQuery:function(t,n){if(1&t&&(e.Gf(X,5),e.Gf(v.v,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.content=i.first),e.iGM(i=e.CRH())&&(n.childComp=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(o){return n.handleKeyboardEvent(o)},!1,e.Jf7)},decls:38,vars:21,consts:[["nz-row","",1,"add-patient"],["nz-form","",1,"login-form"],[1,"screen-header"],[1,"screen-name"],[1,"button-container"],["class","screen-header-btn margin-right",3,"click",4,"ngIf"],["ngbTooltip","Help","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn",3,"click"],[1,"fa","fa-question"],[1,"table-div"],[1,"ch-table",3,"nzPageSizeOptions","nzPageIndex","nzPageSize","nzFrontPagination","nzTotal","nzData","nzPageIndexChange","nzPageSizeChange","nzQueryParams"],["billingcycles",""],["nzColumnKey","month",3,"nzSortFn"],["nzColumnKey","days_of_readings",3,"nzSortFn"],["nzColumnKey","minutes",3,"nzSortFn"],[3,"click",4,"ngFor","ngForOf"],[1,"total"],[3,"src"],[1,"total-span"],["nzTitle","Monitoring Document",3,"nzVisible","nzFooter","nzBodyStyle","nzWidth","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],["content",""],[1,"screen-header-btn","margin-right",3,"click"],[3,"click"],[3,"ngClass"],["aria-label","Download",1,"ant-modal-close","ng-tns-c251-16","ng-star-inserted",2,"top","19px","right","73px",3,"click"],[1,"fa","fa-download",2,"font-size","19px"],[1,"layout-height"],[1,"margin-top-25"],[1,"add-patient"],[1,"formBox-full","viewMinWidth"],["nz-col","",1,"screen-criteria"],[1,"row",3,"innerHTML"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3),e._uU(4," Pending to EMR "),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,ee,3,0,"button",5),e.YNc(7,te,3,0,"button",5),e.TgZ(8,"button",6),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(37);return e.KtG(n.help(r))}),e._UZ(9,"span",7),e.qZA()(),e.TgZ(10,"div",8)(11,"nz-table",9,10),e.NdJ("nzPageIndexChange",function(r){return n.pageIndexBillingCycles=r})("nzPageSizeChange",function(r){return n.pageSizeBillingCycles=r})("nzQueryParams",function(r){return n.onQueryBillingCycles(r)}),e.TgZ(13,"thead")(14,"tr")(15,"th",11),e._uU(16,"Month"),e.qZA(),e.TgZ(17,"th",12),e._uU(18,"Days of Readings"),e.qZA(),e.TgZ(19,"th",13),e._uU(20,"Minutes"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Cycle Number"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Completed By"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Completed At"),e.qZA()()(),e.TgZ(27,"tbody"),e.YNc(28,ne,14,12,"tr",14),e.qZA()(),e.TgZ(29,"div",15),e._UZ(30,"img",16),e.ALo(31,"assetsSource"),e.TgZ(32,"span",17),e._uU(33),e.qZA()()()()(),e.TgZ(34,"nz-modal",18),e.NdJ("nzVisibleChange",function(r){return n.showRemoteMonitoringDoc=r})("nzOnCancel",function(){return n.handleCancel()}),e.YNc(35,ie,6,0,"ng-container",19),e.qZA(),e.YNc(36,ae,4,1,"ng-template",null,20,e.W1O)}if(2&t){const i=e.MAs(12);e.xp6(6),e.Q6J("ngIf",n.current>0),e.xp6(1),e.Q6J("ngIf",n.current<7),e.xp6(4),e.Q6J("nzPageSizeOptions",n.pageSizeOptionsBillingCycles)("nzPageIndex",n.pageIndexBillingCycles)("nzPageSize",n.pageSizeBillingCycles)("nzFrontPagination",!1)("nzTotal",n.totalBillingCycles)("nzData",n.BillingCycles),e.xp6(4),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(9),e.Q6J("ngForOf",i.data),e.xp6(2),e.Q6J("src",e.lcZ(31,18,"total.png"),e.LSH),e.xp6(3),e.Oqu(n.totalBillingCycles),e.xp6(1),e.Q6J("nzVisible",n.showRemoteMonitoringDoc)("nzFooter",null)("nzBodyStyle",e.DdM(20,oe))("nzWidth",875)}},dependencies:[_.mk,_.sg,_.O5,h._L,l._Y,l.JL,l.F,f.t3,f.SK,C.Lr,q.hw,q.OK,M.du,M.Hf,u.N8,u.qD,u.Uo,u._C,u.Om,u.p0,u.$Z,j.j,_.uU,N.n],styles:[".red[_ngcontent-%COMP%]{background-color:#ffe2e2}.green[_ngcontent-%COMP%]{background-color:#dfffd8}"]}),a})();var z=p(48521),A=p(31237),D=p(31453),re=p(21094);const le=["content"];function de(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.delete_patient(i.patient_id))}),e._uU(1," Delete "),e.qZA()}}function ce(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.checkDuplicatePatient())}),e.TgZ(1,"span"),e._uU(2,"Next"),e.qZA()()}}function ue(a,s){1&a&&(e.TgZ(0,"div",6)(1,"div",20),e._uU(2," History "),e.qZA()())}function pe(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&a){const t=s.$implicit;e.xp6(2),e.Oqu(e.Dn7(3,4,null==t?null:t.created_on,"short","IST")),e.xp6(3),e.Oqu(null==t?null:t.created_by_user_name),e.xp6(2),e.Oqu(e.Dn7(8,8,null==t?null:t.updated_on,"short","IST")),e.xp6(3),e.Oqu(null==t?null:t.updated_by_user_name)}}function _e(a,s){if(1&a&&(e.TgZ(0,"div",21)(1,"div",16)(2,"div",53)(3,"nz-table",54,55)(7,"thead")(8,"tr")(9,"th"),e._uU(10,"Created On"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Created By"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Updated On"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Updated By"),e.qZA()()(),e.TgZ(17,"tbody",56),e.YNc(18,pe,11,12,"tr",57),e.qZA()()()()()),2&a){const t=e.MAs(5),n=e.oxw(2);e.xp6(3),e.Q6J("nzData",n.patientData),e.xp6(15),e.Q6J("ngForOf",t.data)}}function me(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7),e._uU(3," Patient Information "),e.qZA()(),e.TgZ(4,"div",8),e.YNc(5,de,2,0,"button",9),e.TgZ(6,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clear())}),e._uU(7," Clear "),e.qZA(),e.YNc(8,ce,3,0,"button",11),e.TgZ(9,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),o=e.MAs(5);return e.KtG(i.help(o))}),e._UZ(10,"span",13),e.qZA()(),e.TgZ(11,"div",14)(12,"div",15)(13,"div",16)(14,"div",17)(15,"app-ad-custom-dropdown",18),e.NdJ("onModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onLocationChange(i))}),e.qZA()(),e.TgZ(16,"div",17),e._UZ(17,"app-ad-custom-dropdown",19),e.qZA()()(),e.TgZ(18,"div",6)(19,"div",20),e._uU(20," Personal Information "),e.qZA()(),e.TgZ(21,"div",21)(22,"div",16)(23,"div",22),e._UZ(24,"app-ad-custom-input",23),e.qZA(),e.TgZ(25,"div",22),e._UZ(26,"app-ad-custom-input",24),e.qZA(),e.TgZ(27,"div",22),e._UZ(28,"app-ad-custom-input",25),e.qZA()(),e.TgZ(29,"div",16)(30,"div",22),e._UZ(31,"app-ad-custom-date",26),e.qZA(),e.TgZ(32,"div",22),e._UZ(33,"app-ad-custom-input",27),e.qZA(),e.TgZ(34,"div",22)(35,"nz-form-item")(36,"b",28),e._uU(37,"Gender: *"),e.qZA(),e.TgZ(38,"nz-radio-group",29)(39,"label",30),e._UZ(40,"i",31),e.qZA(),e.TgZ(41,"label",32),e._UZ(42,"i",33),e.qZA(),e.TgZ(43,"label",34),e._UZ(44,"i",35),e.qZA()()()()(),e.TgZ(45,"div",16)(46,"div",36)(47,"nz-form-item")(48,"nz-radio-group",37)(49,"label",38),e._uU(50,"Active"),e.qZA(),e.TgZ(51,"label",39),e._uU(52,"Inactive"),e.qZA()()()()()(),e.TgZ(53,"div",6)(54,"div",20),e._uU(55," Contact Information "),e.qZA()(),e.TgZ(56,"div",21)(57,"div",16)(58,"div",17),e._UZ(59,"app-ad-custom-input",40),e.qZA(),e.TgZ(60,"div",17),e._UZ(61,"app-ad-custom-input",41),e.qZA()(),e.TgZ(62,"div",16)(63,"div",17),e._UZ(64,"app-ad-custom-input",42),e.qZA(),e.TgZ(65,"div",17),e._UZ(66,"app-ad-custom-input",43),e.qZA()(),e.TgZ(67,"div",16)(68,"div",17),e._UZ(69,"app-ad-custom-input",44),e.qZA(),e.TgZ(70,"div",17),e._UZ(71,"app-ad-custom-input",45),e.qZA()(),e.TgZ(72,"div",16)(73,"div",17),e._UZ(74,"app-ad-custom-input",46),e.qZA(),e.TgZ(75,"div",17),e._UZ(76,"app-ad-custom-input",47),e.qZA()(),e.TgZ(77,"div",16)(78,"div",17),e._UZ(79,"app-ad-custom-input",48),e.qZA()()(),e.YNc(80,ue,3,0,"div",49),e.YNc(81,_e,19,2,"div",50),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngIf","update"==t.method),e.xp6(3),e.Q6J("ngIf",t.current<7),e.xp6(7),e.Q6J("autofocus",!0)("validations",!(t.transition_border&&null==t.form.value.location_id||""==t.form.value.location_id))("dropdownListData",t.locationData),e.xp6(2),e.Q6J("validations",!(t.transition_border&&null==t.form.value.provider_id||""==t.form.value.provider_id))("dropdownListData",t.providerData),e.xp6(7),e.Q6J("validations",!(t.transition_border&&null==t.form.value.first_name||""==t.form.value.first_name))("autofocus",!0),e.xp6(4),e.Q6J("validations",!(t.transition_border&&null==t.form.value.last_name||""==t.form.value.last_name)),e.xp6(3),e.Q6J("validations",!(t.transition_border&&null==t.form.value.dob||""==t.form.value.dob)),e.xp6(28),e.Q6J("validations",!(t.transition_border&&(null==t.form.value.mobile_phone||null==t.form.value.mobile_phone||""==t.form.value.mobile_phone||t.form.value.mobile_phone.length>0&&t.form.value.mobile_phone.length<10)))("mask",t.mask),e.xp6(2),e.Q6J("mask",t.mask)("validations",!(t.transition_border&&null!=t.form.value.home_phone&&null!=t.form.value.home_phone&&""!=t.form.value.home_phone&&t.form.value.home_phone.length>0&&t.form.value.home_phone.length<10)),e.xp6(3),e.Q6J("validations",!(t.transition_border&&null!=t.form.value.office_phone&&null!=t.form.value.office_phone&&""!=t.form.value.office_phone&&t.form.value.office_phone.length>0&&t.form.value.office_phone.length<10))("mask",t.mask),e.xp6(5),e.Q6J("validations",!(t.transition_border&&null==t.form.value.address_1||""==t.form.value.address_1)),e.xp6(5),e.Q6J("validations",!(t.transition_border&&null==t.form.value.city||""==t.form.value.city)),e.xp6(2),e.Q6J("validations",!(t.transition_border&&(null==t.form.value.state||null==t.form.value.state||""==t.form.value.state||t.form.value.state.length>0&&t.form.value.state.length<2))),e.xp6(3),e.Q6J("validations",!(t.transition_border&&(null==t.form.value.zip||null==t.form.value.zip||""==t.form.value.zip||t.form.value.zip.length>0&&t.form.value.zip.length<5))),e.xp6(1),e.Q6J("ngIf","update"==t.method),e.xp6(1),e.Q6J("ngIf","update"==t.method)}}function ge(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tbody")(1,"tr",76),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.editPatient(o))}),e.ynx(2),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"mask"),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.BQk(),e.qZA()()}if(2&a){const t=s.$implicit;e.xp6(4),e.lnq("",t.first_name," ",t.middle_name," ",t.last_name,""),e.xp6(2),e.Oqu(e.xi3(7,11,t.dob,"MM/dd/yyyy")),e.xp6(3),e.Oqu(e.xi3(10,14,t.mobile_phone,"(000) 000-0000")),e.xp6(3),e.Oqu(t.practice_name),e.xp6(2),e.Oqu(t.location_name),e.xp6(2),e.Oqu(t.provider_name),e.xp6(2),e.Oqu(t.icd),e.xp6(2),e.Oqu(t.primary_payer_name),e.xp6(2),e.Oqu(t.patient_status_name)}}function he(a,s){1&a&&e._UZ(0,"tbody")}function fe(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",58)(2,"nz-table",59,55),e.NdJ("nzQueryParams",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onQueryParamsChange(i))})("nzPageIndexChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.pageIndex=i)})("nzPageSizeChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.pageSize=i)}),e.TgZ(6,"thead")(7,"tr")(8,"th",60),e._uU(9," Patient Name "),e.qZA(),e.TgZ(10,"th",61),e._uU(11,"DOB"),e.qZA(),e.TgZ(12,"th",62),e._uU(13,"Phone No"),e.qZA(),e.TgZ(14,"th",63),e._uU(15,"Practice"),e.qZA(),e.TgZ(16,"th",64),e._uU(17,"Location"),e.qZA(),e.TgZ(18,"th",65),e._uU(19,"Provider"),e.qZA(),e.TgZ(20,"th",66),e._uU(21,"ICD"),e.qZA(),e.TgZ(22,"th",67),e._uU(23,"Primary Insurance"),e.qZA(),e.TgZ(24,"th",68),e._uU(25,"Patient Status"),e.qZA()()(),e.YNc(26,ge,23,17,"tbody",57),e.YNc(27,he,1,0,"tbody",3),e.qZA(),e.TgZ(28,"div",69),e._UZ(29,"img",70),e.ALo(30,"assetsSource"),e.TgZ(31,"span",71),e._uU(32),e.qZA()()(),e.TgZ(33,"div",72)(34,"button",73),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.back())}),e._uU(35," Back "),e.qZA(),e.TgZ(36,"button",74),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.createNewPatient())}),e.TgZ(37,"span"),e._uU(38,"Create New Patient"),e.qZA()()(),e.TgZ(39,"div",75)(40,"span"),e._uU(41," Please review the potential patient matches above. "),e._UZ(42,"br"),e._uU(43," If your patient exists in the potential matches above, you can select the patient to open in edit mode."),e._UZ(44,"br"),e._uU(45," If your patient does not exist in the potential matches section , click on create new patient to create new patient or click back to modify your changes."),e._UZ(46,"br"),e.qZA()()()}if(2&a){const t=e.MAs(4),n=e.oxw();e.xp6(2),e.Q6J("nzPageSizeOptions",n.pageSizeOptions)("nzFrontPagination",!1)("nzTotal",n.totalPatient)("nzPageIndex",n.pageIndex)("nzPageSize",n.pageSize)("nzData",n.patients),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("ngForOf",t.data),e.xp6(1),e.Q6J("ngIf",0==t.data.length),e.xp6(2),e.Q6J("src",e.lcZ(30,19,"total.png"),e.LSH),e.xp6(3),e.Oqu(n.totalPatient)}}function be(a,s){if(1&a&&(e.TgZ(0,"div",77)(1,"div",5)(2,"div",14),e._UZ(3,"div",78),e.qZA()()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("innerHTML",t.response,e.oJD)}}let ve=(()=>{class a{constructor(t,n,i,o,r,m){this.formBuilder=t,this.patientService=n,this.addPatientComponent=i,this.datepipe=o,this.router=r,this.modalService=m,this.changePageSize=10,this.patientTable=!1,this.totalPatient=0,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[10,20,30,40],this.disableInput=!1,this.mask="(000) 000-0000",this.transition_border=!1,this.current=this.addPatientComponent.current,this.getLocationsSearchDropdown(),this.method=this.patientService.method,this.buildForm()}ngOnInit(){null!=this.patientService.patient_id&&null!=this.patientService.patient_id&&this.getPatientInfo(),this.patient_id=this.patientService.patient_id}clear(){this.buildForm()}handleKeyboardEvent(t){"Enter"==t.key&&13===t.keyCode&&t.preventDefault(),t.altKey&&("a"==t.key||"A"==t.key||"h"==t.key||"H"==t.key)&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),t.ctrlKey&&("H"==t.key||"h"==t.key)&&t.shiftKey&&(t.preventDefault(),this.help(this.content)),("n"==t.key||"N"==t.key)&&t.altKey&&this.checkDuplicatePatient(),("c"==t.key||"C"==t.key)&&t.altKey&&this.clear(),("x"==t.key||"X"==t.key)&&t.altKey&&this.close(),t.altKey&&("t"==t.key||"T"==t.key)&&this.childComp.fileList.focus(),t.altKey&&("e"==t.key||"E"==t.key)&&t.preventDefault()}getPatientInfo(){this.patientService.getPatientInfoById(this.patientService.patient_id).subscribe(t=>{1==t.success?(this.getProviderDropdownDataBasedOnLocation(t.data[0].location_id),this.patientService.patient=t.data[0],this.addPatientComponent.showPatientName(),this.patientData=t.data,this.form.patchValue(t.data[0])):d().fire({icon:"error",text:t.message})})}addPatientInfo(){this.patientTable=!1,console.log(this.form),this.patientService.get_enterprise_with_location(this.form.value.location_id).subscribe(t=>{1==t.success?this.patientService.entity=t.data.id:d().fire({icon:"error",text:t.message})}),this.transition_border=!0,this.addPatientData={user_id:localStorage.getItem("user_id"),location_id:this.form.value.location_id,provider_id:this.form.value.provider_id,first_name:this.form.value.first_name,last_name:this.form.value.last_name,middle_name:this.form.value.middle_name,dob:this.form.value.dob,address_1:this.form.value.address_1,address_2:this.form.value.address_2,mobile_phone:this.form.value.mobile_phone,home_phone:this.form.value.home_phone,office_phone:this.form.value.office_phone,email:this.form.value.email,state:this.form.value.state,city:this.form.value.city,zip:this.form.value.zip,gender:this.form.value.gender,is_active:this.form.value.is_active,account_number:this.form.value.account_number,patient_id:this.patientService.patient_id},null!=this.patientService.patient_id&&null!=this.patientService.patient_id?this.patientService.updatePatientInfoData(this.addPatientData).subscribe(t=>{1==t.success?(this.patientService.patient=t.data,this.patientService.patient_id=t.data.patient_id,this.addPatientComponent.method="update",this.next()):d().fire({icon:"error",text:t.message})}):this.patientService.addPatientInfoData(this.addPatientData).subscribe(t=>{1==t.success?(this.patientService.patient=t.data,this.patientService.patient_id=t.data.patient_id,this.addPatientComponent.method="update",this.next()):d().fire({icon:"error",text:t.message})})}onQueryParamsChange(t){var n=this;return(0,y.Z)(function*(){n.prev_pageIndex=null!=n.savedParams?n.savedParams.pageIndex:null,n.savedParams=t;const{pageIndex:o,sort:r}=t,c=r.find(g=>null!==g.value);n.sortField=c&&c.key||null,n.sortOrder=c&&c.value||null,n.pageIndex=o,(null!=n.prev_pageIndex&&n.prev_pageIndex!=n.pageIndex||null!=n.patients&&null!=n.sortField&&null!=n.sortOrder||n.changePageSize!=n.pageSize)&&n.addPatientInfo(),n.changePageSize=n.pageSize})()}next(){this.current=this.addPatientComponent.current,this.addPatientComponent.showPatientName(),this.addPatientComponent.step(this.current+1)}onLocationChange(t){this.providerData=[],this.form.controls.provider_id.setValue(null),this.getProviderDropdownDataBasedOnLocation(t.id)}getLocationsSearchDropdown(){var t=localStorage.getItem("user_id");this.patientService.getLocationDropdownData(t).subscribe(n=>{1==n.success?(this.locationData=n.data,1==this.locationData.length&&"update"!==this.method&&(this.form.controls.location_id.setValue(this.locationData[0].id),this.getProviderDropdownDataBasedOnLocation(this.locationData[0].id))):d().fire({icon:"error",text:n.message})})}getProviderDropdownDataBasedOnLocation(t){this.providerData=null,this.patientService.getProviderDropdownDataBasedOnLocation(t).subscribe(n=>{1==n.success?this.providerData=n.data:d().fire({icon:"error",text:n.message})})}help(t){this.patientService.getPatientSearchHelpResponse("patient-info").subscribe(n=>{1==n.success?(this.modalService.open(t,{size:"md"}),this.response=n.data.content,this.style=n.data.styles):d().fire({icon:"error",text:n.message})})}close(){this.modalService.dismissAll()}checkDuplicatePatient(){if(this.transition_border=!0,this.form.valid)if(null!==this.form.value.state&&(this.form.value.state.length>2||this.form.value.state.length<2))d().fire({icon:"error",text:"State should be only 2 characters."});else{if(""!=this.form.value.email&&null!=this.form.value.email&&null!=this.form.value.email&&!this.form.value.email.match("^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}$"))return void d().fire({icon:"error",text:"Enter Valid Email."});this.search_model={user_id:localStorage.getItem("user_id"),sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,enterprise_id:"",practice_id:"",location_id:"",provider_id:"",primary_insurance_id:"",patient_status_id:"",patient_first_name:this.form.value.first_name,patient_last_name:this.form.value.last_name,dob:"",phone:"",is_active:"",email:"",get_all_data:!0,enrolled:!1},this.patientService.getPatients(this.search_model).subscribe(n=>{1==n.success?(this.patients=n.data,this.totalPatient=n.data.length>0?n.data[0].total_record_count:0,null==this.patientService.patient_id&&null==this.patientService.patient_id&&this.totalPatient>0?this.patientTable=!0:this.addPatientInfo()):d().fire({icon:"error",text:n.message})})}else d().fire({icon:"error",text:"Check all required feilds."})}createNewPatient(){this.patientTable=!1,this.addPatientInfo()}back(){this.patientTable=!1}cancel(){this.router.navigate(["/patient-search"])}editPatient(t){d().fire({icon:"warning",text:"This action will discard the potential patient changes. Are you sure you want to proceed?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(n=>{if(n.isConfirmed)this.patientTable=!1,this.patientService.method="update",this.patientService.entity=t.enterprise_id,this.patientService.patient_id=t.patient_id,this.getPatientInfo(),this.addPatientComponent.ngOnInit();else if(n.isDenied)return})}delete_patient(t){d().fire({icon:"warning",text:"This action will permanently delete this information. Are you sure you want to proceed?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(n=>{if(n.isConfirmed)this.patientService.deletePatient(t).subscribe(i=>{1==i.success?(this.router.navigate(["/patient-search"]),d().fire({icon:"success",text:i.message})):d().fire({icon:"error",text:i.message})});else if(n.isDenied)return})}buildForm(){this.form=this.formBuilder.group({first_name:[{value:null,disabled:this.disableInput},[l.kI.required,l.kI.pattern("^[a-zA-Z]*$")]],middle_name:[{value:null,disabled:this.disableInput}],last_name:[{value:null,disabled:this.disableInput},[l.kI.required]],address_1:[{value:null,disabled:this.disableInput},[l.kI.required]],address_2:[{value:null,disabled:this.disableInput}],dob:[{value:null,disabled:this.disableInput},[l.kI.required]],mobile_phone:[{value:null,disabled:this.disableInput},[l.kI.required,l.kI.minLength(10)]],office_phone:[{value:null,disabled:this.disableInput},[l.kI.minLength(10)]],home_phone:[{value:null,disabled:this.disableInput},[l.kI.minLength(10)]],email:[{value:null,disabled:this.disableInput}],state:[{value:null,disabled:this.disableInput},[l.kI.required,l.kI.minLength(2)]],city:[{value:null,disabled:this.disableInput},[l.kI.required]],gender:[{value:"U",disabled:this.disableInput},[l.kI.required]],is_active:[{value:"1",disabled:this.disableInput},[l.kI.required]],zip:[{value:null,disabled:this.disableInput},[l.kI.required,l.kI.minLength(5)]],location_id:[{value:null,disabled:this.disableInput},[l.kI.required]],provider_id:[{value:null,disabled:this.disableInput},[l.kI.required]],account_number:[{value:null,disabled:this.disableInput}]})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(l.QS),e.Y36(S.e),e.Y36(x.R),e.Y36(_.uU),e.Y36(Z.F0),e.Y36(h.FF))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-patient-info"]],viewQuery:function(t,n){if(1&t&&(e.Gf(le,5),e.Gf(v.v,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.content=i.first),e.iGM(i=e.CRH())&&(n.childComp=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(o){return n.handleKeyboardEvent(o)},!1,e.Jf7)},decls:6,vars:3,consts:[["nz-row","",1,"add-patient"],["nz-form","",1,"login-form",3,"formGroup"],["class","formBox-full viewMinWidth",4,"ngIf"],[4,"ngIf"],["content",""],[1,"formBox-full","viewMinWidth"],[1,"screen-header"],[1,"screen-name"],[1,"button-container"],["class","screen-header-btn margin-right","ngbTooltip","Delete","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["ngbTooltip","Clear","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],["class","screen-header-btn margin-right",3,"click",4,"ngIf"],["ngbTooltip","Help","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn",3,"click"],[1,"fa","fa-question"],["nz-col","",1,"screen-criteria"],[1,"main"],[1,"row"],[1,"col-lg-3","col-md-3","col-lg-5","col-lg-6"],["label","Location *","accesskey","T","dropdown_placeholder","Location","bindLabel","name","icon","fa fa-location-dot","formControlName","location_id","align_icon","left",3,"autofocus","validations","dropdownListData","onModelChange"],["label","Supervising Provider/Provider *","dropdown_placeholder","Provider","bindLabel","name","icon","fa fa-user","formControlName","provider_id","align_icon","left",3,"validations","dropdownListData"],[1,"screen-name","sub-heading"],[1,"sections"],[1,"col-lg-2","col-md-2","col-lg-3","col-lg-4"],["type","text","placeholder","Patient First Name","label","Patient First Name *","icon","fa fa-user","accesskey","E","formControlName","first_name","nz-input","","align_icon","left",3,"validations","autofocus"],["type","text","placeholder","Patient Middle Name","label","Patient Middle Name","icon","fa fa-user","accesskey","M","formControlName","middle_name","align_icon","left"],["type","text","placeholder","Patient Last Name","label","Patient Last Name *","formControlName","last_name","icon","fa fa-user","accesskey","L","align_icon","left",3,"validations"],["label","DOB *","formControlName","dob","accesskey","B","icon","fa fa-calendar","align_icon","left",3,"validations"],["type","text","placeholder","Account Number","label","Account Number","formControlName","account_number","accesskey","A","icon","fa fa-user","align_icon","left"],[2,"color","#BD123E","margin-right","14px","margin-top","5px"],["formControlName","gender",2,"margin-top","-9px"],["nz-radio","","nzValue","M",1,"male"],[1,"fa","fa-person"],["nz-radio","","nzValue","F",1,"female"],[1,"fa","fa-person-dress"],["nz-radio","","nzValue","U",1,"unknown-gender"],[1,"fa-solid","fa-person-circle-question"],[1,"col-lg-3","col-md-3","col-lg-5","col-lg-6",2,"top","18px","margin-bottom","15px","margin-left","70px"],["formControlName","is_active",2,"margin-top","-9px"],["nz-radio","","nzValue","1"],["nz-radio","","nzValue","0"],["type","text","placeholder","Mobile Phone","label","Mobile Phone *","accesskey","P","icon","fa fa-mobile-screen","error_message","Mobile Phone must consist of atleast 10 digits.","formControlName","mobile_phone","align_icon","left",3,"validations","mask"],["type","text","placeholder","Home Phone","label","Home Phone","accesskey","H","maxlength","14","onkeypress","return /[0-9\\-]/i.test(event.key)","error_message","Home Phone must consist of atleast 10 digits.","icon","fa fa-mobile-screen","formControlName","home_phone","align_icon","left",3,"mask","validations"],["type","text","maxlength","14","error_message","Office Phone must consist of atleast 10 digits.","onkeypress","return /[0-9\\-]/i.test(event.key)","placeholder","Office Phone","label","Office Phone","accesskey","O","icon","fa fa-mobile-screen","formControlName","office_phone","align_icon","left",3,"validations","mask"],["type","text","placeholder","Email","label","Email","accesskey","I","icon","fa fa-envelope","formControlName","email","align_icon","left"],["type","text","placeholder","Address Line 1","label","Address Line 1 *","accesskey","1","formControlName","address_1","icon","fa fa-address-card","align_icon","left",3,"validations"],["type","text","placeholder","Address Line 2","label","Address Line 2","accesskey","2","formControlName","address_2","icon","fa fa-address-card","align_icon","left"],["placeholder","City","label","City *","icon","fa fa-building","accesskey","Y","formControlName","city","align_icon","left",3,"validations"],["type","text","placeholder","State","label","State *","maxlength","2","error_message","State must consist of atleast 2 digits.","icon","fa fa-flag","accesskey","S","formControlName","state","align_icon","left",3,"validations"],["type","text","maxlength","5","accesskey","Z","error_message","Zip must consist of atleast 5 digits.","onkeypress","return /[0-9\\-]/i.test(event.key)","placeholder","ZIP","label","ZIP *","formControlName","zip","icon","fa fa-location-crosshairs","align_icon","left",3,"validations"],["class","screen-header",4,"ngIf"],["class","sections",4,"ngIf"],["ngbTooltip","Delete","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],[1,"screen-header-btn","margin-right",3,"click"],[1,"tableBox-full","viewMinWidth"],[1,"ch-table",3,"nzData"],["nzTable","","sortTable","","filterTable",""],[1,"tbody-white-space"],[4,"ngFor","ngForOf"],[1,"table-div"],["nzShowSizeChanger","",1,"ch-table",3,"nzPageSizeOptions","nzFrontPagination","nzTotal","nzPageIndex","nzPageSize","nzData","nzQueryParams","nzPageIndexChange","nzPageSizeChange"],["nzCustomFilter","","nzColumnKey","patient_name",3,"nzSortFn"],["nzColumnKey","dob",3,"nzSortFn"],["nzColumnKey","phone_no",3,"nzSortFn"],["nzColumnKey","practice",3,"nzSortFn"],["nzColumnKey","location",3,"nzSortFn"],["nzColumnKey","provider",3,"nzSortFn"],["nzColumnKey","icd",3,"nzSortFn"],["nzColumnKey","primary_insurance",3,"nzSortFn"],["nzColumnKey","patient_status",3,"nzSortFn"],[1,"total"],[3,"src"],[1,"total-span"],[1,"new-pt-btn"],["ngbTooltip","Back","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],["ngbTooltip","Create New Patient",1,"screen-header-btn","margin-right",3,"click"],[1,"table-div",2,"margin-top","67px","background","#ffebeb"],[3,"click"],[1,"add-patient"],[1,"row",3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.YNc(2,me,82,23,"div",2),e.YNc(3,fe,47,21,"div",3),e.qZA()(),e.YNc(4,be,4,1,"ng-template",null,4,e.W1O)),2&t&&(e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("ngIf",!n.patientTable),e.xp6(1),e.Q6J("ngIf",n.patientTable))},dependencies:[_.sg,_.O5,h._L,l._Y,l.JJ,l.JL,l.nD,l.sg,l.u,f.t3,f.SK,C.Lr,C.Nx,z.Of,z.Dg,u.N8,u.qD,u.Uo,u._C,u.Om,u.p0,u.$Z,A.y,D.m,v.v,re.Iq,_.uU,N.n],styles:[".table-div[_ngcontent-%COMP%]{padding:30px;background:linear-gradient(180deg,rgba(241,231,255,.5) 0%,rgba(248,243,255,.5) 28.13%,rgba(248,243,255,.5) 65.62%,rgba(218,201,255,.5) 100%);border:1px solid rgba(185,136,255,.5);box-sizing:border-box}.steps-action[_ngcontent-%COMP%]{float:right;margin-right:13.7%;margin-top:2%;padding-bottom:5%}.gender-label[_ngcontent-%COMP%]{color:#bd123e;margin-left:20%;margin-top:2%}.gender[_ngcontent-%COMP%]{margin-left:5%;margin-right:3%;margin-top:4%}.male-female[_ngcontent-%COMP%]{margin-top:2%}[_nghost-%COMP%]     .ant-col{position:relative;max-width:100%}.additional-info[_ngcontent-%COMP%]{font-weight:700;font-size:20px;color:#bd123e;padding:17px}.additional-info[_ngcontent-%COMP%]{font-weight:700;font-size:20px;color:#bd123e;margin-top:-12px}.required[_ngcontent-%COMP%]{color:#bd123e;font-weight:700;font-size:22px;position:absolute;margin-left:-8px}.male[_ngcontent-%COMP%]{color:#316dd1;font-size:x-large}.female[_ngcontent-%COMP%]{color:#d131a8;font-size:x-large}.unknown-gender[_ngcontent-%COMP%]{color:#757676;font-size:x-large}.sub-heading[_ngcontent-%COMP%]{margin-left:25px;margin-top:19px;position:absolute;height:30px;padding:5px}.new-pt-btn[_ngcontent-%COMP%]{float:right;margin-top:20px}"]}),a})();var Ce=p(33335),xe=p(16418),Te=p(55111),Q=p(47044);function Ze(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addPatientAuthorizationRequest("create"))}),e._UZ(1,"i",30),e.qZA()}}function ye(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clear())}),e._uU(1," Clear "),e.qZA()}}function ze(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addPatientAuthorizationRequest("update"))}),e._UZ(1,"i",33),e.qZA()}}function Pe(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancel())}),e._UZ(1,"i",35),e.qZA()}}function Se(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.pre())}),e.TgZ(1,"span"),e._uU(2,"Previous"),e.qZA()()}}function ke(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.next())}),e.TgZ(1,"span"),e._uU(2,"Next"),e.qZA()()}}function Ie(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"div",38)(17,"i",39),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.delete_auth_request(o.authorization_request_id))}),e.qZA(),e._UZ(18,"i",40),e.TgZ(19,"i",41),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.edit_auth(o))}),e.qZA()()()()}if(2&a){const t=s.$implicit;e.xp6(2),e.Oqu(null==t?null:t.payer_name),e.xp6(2),e.Oqu(e.xi3(5,6,null==t?null:t.start_date,"MM/dd/yyyy")),e.xp6(3),e.Oqu(e.xi3(8,9,null==t?null:t.end_date,"MM/dd/yyyy")),e.xp6(3),e.Oqu(null==t?null:t.authorization_request_status),e.xp6(2),e.Oqu(null==t?null:t.pan),e.xp6(2),e.Oqu(null==t?null:t.units)}}let Ae=(()=>{class a{constructor(t,n,i,o,r){this.formBuilder=t,this.router=n,this.patientService=i,this.datepipe=o,this.addPatientComponent=r,this.loading=!1,this.authorization=!1,this.auth_edit=!1,this.disableInput=!1,this.total=1e3,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[10,20,30,40],this.current=this.addPatientComponent.current,this.hide=!1,this.buildForm()}ngOnInit(){this.patientId=this.patientService.patient_id,this.getPatientInsuranceDropdownDataForAuth(),this.getAuthorizationStatuses(),this.getPatientAuthorizationRequestForGrid(),(null==this.patientService.hide_next_btn||null==this.patientService.hide_next_btn)&&(this.hide=!0)}onEndDateChange(t){t<this.form.value.start_date&&(d().fire({icon:"error",text:"End date should be greater than start date."}),this.form.controls.end_date.setValue(null))}getPatientInsuranceDropdownDataForAuth(){this.patientService.getPatientInsuranceDropdownDataForAuth(this.patientService.patient_id).subscribe(t=>{1==t.success?(this.payerData=t.data,1==this.payerData.length&&(this.form.value.patient_insurance_id=this.payerData[0].id)):d().fire({icon:"error",text:t.message})})}getAuthorizationStatuses(){this.patientService.getAuthorizationStatuses().subscribe(t=>{1==t.success?this.authStatusData=t.data:d().fire({icon:"error",text:t.message})})}next(){this.current=this.addPatientComponent.current,this.addPatientComponent.step(this.current+1)}pre(){this.current=this.addPatientComponent.current,this.addPatientComponent.step(this.current-1)}getPatientAuthorizationRequestForGrid(){this.patientService.getPatientAuthorizationRequestForGrid(this.patientId).subscribe(t=>{1==t.success?this.patientAuthorizationGridData=t.data:d().fire({icon:"error",text:t.message})})}addPatientAuthorizationRequest(t){if(this.form.valid){var n={user_id:localStorage.getItem("user_id"),is_active:this.form.value.is_active,patient_insurance_id:this.form.value.patient_insurance_id,start_date:this.form.value.start_date,end_date:this.form.value.end_date,pan:this.form.value.pan,units:this.form.value.units,authorization_request_status_id:this.form.value.authorization_request_status_id,patient_id:this.patientService.patient_id,authorization_request_id:this.authorizationRequestId,provider_id:this.patientService.patient.provider_id};"create"==t?this.patientService.addPatientAuthorizationData(n).subscribe(i=>{1==i.success?(d().fire({icon:"success",text:i.message}),this.buildForm(),this.getPatientAuthorizationRequestForGrid()):d().fire({icon:"error",text:i.message})}):this.patientService.updatePatientAuthorizationData(n).subscribe(i=>{1==i.success?(d().fire({icon:"success",text:i.message}),this.getPatientAuthorizationRequestForGrid(),this.buildForm(),this.auth_edit=!1):d().fire({icon:"error",text:i.message})})}else d().fire({icon:"error",text:"Check all required feilds."})}delete_auth_request(t){this.patientService.deletePatientAuthorizationRequestById(t).subscribe(n=>{1==n.success?(d().fire({icon:"success",text:n.message}),this.buildForm(),this.getPatientAuthorizationRequestForGrid()):d().fire({icon:"error",text:n.message})})}cancel(){this.buildForm(),this.auth_edit=!1}clear(){this.buildForm()}edit_auth(t){t.start_date=this.datepipe.transform(t.start_date,"yyyy-MM-dd"),t.end_date=this.datepipe.transform(t.end_date,"yyyy-MM-dd"),this.form.patchValue(t),this.authorizationRequestId=t.authorization_request_id,this.auth_edit=!0}done(){console.log("done")}buildForm(){this.form=this.formBuilder.group({patient_insurance_id:[{value:null,disabled:this.disableInput},[l.kI.required]],authorization_request_status_id:[{value:null,disabled:this.disableInput},[l.kI.required]],start_date:[{value:null,disabled:this.disableInput},[l.kI.required]],end_date:[{value:null,disabled:this.disableInput},[l.kI.required]],is_active:[{value:"1",disabled:this.disableInput},[l.kI.required]],pan:[{value:null,disabled:this.disableInput},[l.kI.required]],units:[{value:null,disabled:this.disableInput},[l.kI.required]]})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(l.QS),e.Y36(Z.F0),e.Y36(S.e),e.Y36(_.uU),e.Y36(x.R))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-authorization"]],decls:61,vars:16,consts:[["nz-row","",1,"add-patient"],["nz-form","",1,"login-form",3,"formGroup"],[1,"formBox-full","viewMinWidth"],[1,"screen-header"],[1,"screen-name"],[1,"button-container"],["class","screen-header-btn","ngbTooltip","Add","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["class","screen-header-btn margin-right margin-left","ngbTooltip","Clear","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["class","screen-header-btn","style"," margin-right: 8px;","ngbTooltip","Save","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["class","screen-header-btn margin-right","ngbTooltip","Cancel","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["class","screen-header-btn margin-right",3,"click",4,"ngIf"],["class","screen-header-btn",3,"click",4,"ngIf"],["nz-col","",1,"screen-search-criteria-div"],[1,"row"],[1,"col-lg-3","col-md-3","col-lg-5","col-lg-6"],["label","Insurance *","dropdown_placeholder","Insurance","bindLabel","name","formControlName","patient_insurance_id","icon","fa fa-shield","align_icon","left",3,"dropdownListData"],["label","Status *","dropdown_placeholder","Status","formControlName","authorization_request_status_id","bindLabel","name","align_icon","left",3,"dropdownListData"],["label","Start Date *","formControlName","start_date","icon","fa fa-calendar","align_icon","left"],["label","End Date *","formControlName","end_date","icon","fa fa-calendar","align_icon","left",3,"ngModelChange"],["type","text","formControlName","pan","placeholder","PAN","label","PAN *","align_icon","left"],["type","number","formControlName","units","placeholder","Units","label","Units *","align_icon","left"],["formControlName","is_active",1,"radio-buttons-form"],["nz-radio","","nzValue","1"],["nz-radio","","nzValue","0"],[1,"tableBox-full","viewMinWidth"],["nzShowSizeChanger","",1,"ch-table",3,"nzPageSizeOptions","nzShowPagination","nzTotal","nzPageIndex","nzPageSize","nzData","nzPageIndexChange","nzPageSizeChange"],["nzTable","","sortTable","","filterTable",""],[1,"tbody-white-space"],[4,"ngFor","ngForOf"],["ngbTooltip","Add","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn",3,"click"],[1,"fa","fa-plus","icon-padding"],["ngbTooltip","Clear","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right","margin-left",3,"click"],["ngbTooltip","Save","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn",2,"margin-right","8px",3,"click"],[1,"fa","fa-floppy-disk","icon-padding"],["ngbTooltip","Cancel","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-xmark","icon-padding"],[1,"screen-header-btn","margin-right",3,"click"],[1,"screen-header-btn",3,"click"],[1,"table-icon-container"],["nz-icon","","nzType","delete","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Delete",1,"table-coloumn-icons",3,"click"],["nz-icon","","nzType","download","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Download",1,"table-coloumn-icons"],["nz-icon","","nzType","edit","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Edit",1,"table-coloumn-icons",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5," Authorization "),e.qZA()(),e.TgZ(6,"div",5),e.YNc(7,Ze,2,0,"button",6),e.YNc(8,ye,2,0,"button",7),e.YNc(9,ze,2,0,"button",8),e.YNc(10,Pe,2,0,"button",9),e.YNc(11,Se,3,0,"button",10),e.YNc(12,ke,3,0,"button",11),e.qZA(),e.TgZ(13,"div",12)(14,"div",13)(15,"div",14),e._UZ(16,"app-ad-custom-dropdown",15),e.qZA(),e.TgZ(17,"div",14),e._UZ(18,"app-ad-custom-dropdown",16),e.qZA()(),e.TgZ(19,"div",13)(20,"div",14),e._UZ(21,"app-ad-custom-date",17),e.qZA(),e.TgZ(22,"div",14)(23,"app-ad-custom-date",18),e.NdJ("ngModelChange",function(o){return n.onEndDateChange(o)}),e.qZA()()(),e.TgZ(24,"div",13)(25,"div",14),e._UZ(26,"app-ad-custom-input",19),e.qZA(),e.TgZ(27,"div",14),e._UZ(28,"app-ad-custom-input",20),e.qZA()(),e.TgZ(29,"div",13)(30,"div",14)(31,"nz-form-item")(32,"nz-radio-group",21)(33,"label",22),e._uU(34,"Active"),e.qZA(),e.TgZ(35,"label",23),e._uU(36,"Inactive"),e.qZA()()()()(),e.TgZ(37,"div",13)(38,"div",24)(39,"nz-table",25,26),e.NdJ("nzPageIndexChange",function(o){return n.pageIndex=o})("nzPageSizeChange",function(o){return n.pageSize=o}),e.TgZ(43,"thead")(44,"tr")(45,"th"),e._uU(46,"Insurance"),e.qZA(),e.TgZ(47,"th"),e._uU(48,"Start Date"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"End Date"),e.qZA(),e.TgZ(51,"th"),e._uU(52,"Status"),e.qZA(),e.TgZ(53,"th"),e._uU(54,"PAN"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"Units"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Actions"),e.qZA()()(),e.TgZ(59,"tbody",27),e.YNc(60,Ie,20,12,"tr",28),e.qZA()()()()()()()()),2&t){const i=e.MAs(41);e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("ngIf",!n.auth_edit),e.xp6(1),e.Q6J("ngIf",!n.auth_edit),e.xp6(1),e.Q6J("ngIf",n.auth_edit),e.xp6(1),e.Q6J("ngIf",n.auth_edit),e.xp6(1),e.Q6J("ngIf",n.current>0&&n.hide),e.xp6(1),e.Q6J("ngIf",n.current<7&&n.hide),e.xp6(4),e.Q6J("dropdownListData",n.payerData),e.xp6(2),e.Q6J("dropdownListData",n.authStatusData),e.xp6(21),e.Q6J("nzPageSizeOptions",n.pageSizeOptions)("nzShowPagination",!1)("nzTotal",n.total)("nzPageIndex",n.pageIndex)("nzPageSize",n.pageSize)("nzData",n.patientAuthorizationGridData),e.xp6(21),e.Q6J("ngForOf",i.data)}},dependencies:[_.sg,_.O5,h._L,l._Y,l.JJ,l.JL,l.sg,l.u,Q.w,f.t3,f.SK,C.Lr,C.Nx,w.Ls,z.Of,z.Dg,u.N8,u.Uo,u._C,u.Om,u.p0,u.$Z,A.y,D.m,v.v,_.uU],styles:[".table-div[_ngcontent-%COMP%]{padding:30px;background:linear-gradient(180deg,rgba(241,231,255,.5) 0%,rgba(248,243,255,.5) 28.13%,rgba(248,243,255,.5) 65.62%,rgba(218,201,255,.5) 100%);border:1px solid rgba(185,136,255,.5);box-sizing:border-box}.steps-action[_ngcontent-%COMP%]{float:right;margin-right:13.7%;margin-top:2%;padding-bottom:5%}.gender-label[_ngcontent-%COMP%]{color:#bd123e;margin-left:20%;margin-top:2%}.gender[_ngcontent-%COMP%]{margin-left:5%;margin-right:3%;margin-top:4%}.male-female[_ngcontent-%COMP%]{margin-top:2%}[_nghost-%COMP%]     .ant-col{position:relative;max-width:100%}.additional-info[_ngcontent-%COMP%]{font-weight:700;font-size:20px;color:#bd123e;padding:17px}"]}),a})();const De=["content"];function we(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.pre())}),e.TgZ(1,"span"),e._uU(2,"Previous"),e.qZA()()}}function qe(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.next())}),e.TgZ(1,"span"),e._uU(2,"Next"),e.qZA()()}}function Me(a,s){1&a&&(e.TgZ(0,"th"),e._uU(1,"BMI"),e.qZA())}function Ne(a,s){1&a&&(e.TgZ(0,"th"),e._uU(1,"Pulse"),e.qZA())}function Oe(a,s){1&a&&(e.TgZ(0,"th"),e._uU(1,"Meal"),e.qZA())}function Ue(a,s){1&a&&(e.TgZ(0,"th"),e._uU(1,"Blood Glucose"),e.qZA())}function Je(a,s){1&a&&(e.TgZ(0,"th"),e._uU(1,"Temperature"),e.qZA())}function Fe(a,s){1&a&&(e.TgZ(0,"th"),e._uU(1,"Oxygen Satutration"),e.qZA())}function Qe(a,s){1&a&&(e.TgZ(0,"th"),e._uU(1,"Sp02"),e.qZA())}function Be(a,s){1&a&&(e.TgZ(0,"th"),e._uU(1,"Ketone"),e.qZA())}function Re(a,s){1&a&&(e.TgZ(0,"th"),e._uU(1,"Weight"),e.qZA())}function Ke(a,s){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t?null:t.bmi)}}const P=function(a,s,t){return{"background-cell-normal":a,"background-cell-abnormal":s,"background-cell-critical":t}};function Ye(a,s){if(1&a&&(e.TgZ(0,"td")(1,"div",34),e._uU(2),e.qZA()()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.kEZ(2,P,1===(null==t?null:t.pulse_status),2===(null==t?null:t.pulse_status),3===(null==t?null:t.pulse_status))),e.xp6(1),e.hij(" ",null==t?null:t.pulse," ")}}function He(a,s){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t?null:t.meal)}}function Le(a,s){if(1&a&&(e.TgZ(0,"td")(1,"div",34),e._uU(2),e.qZA()()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.kEZ(2,P,1===(null==t?null:t.glucose_status),2===(null==t?null:t.glucose_status),3===(null==t?null:t.glucose_status))),e.xp6(1),e.hij(" ",null==t?null:t.blood_glucose," ")}}function Ee(a,s){if(1&a&&(e.TgZ(0,"td")(1,"div",34),e._uU(2),e.qZA()()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.kEZ(2,P,1===(null==t?null:t.temperature_status),2===(null==t?null:t.temperature_status),3===(null==t?null:t.temperature_status))),e.xp6(1),e.hij(" ",null==t?null:t.temperature," ")}}function Ge(a,s){if(1&a&&(e.TgZ(0,"td")(1,"div",34),e._uU(2),e.qZA()()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.kEZ(2,P,1===(null==t?null:t.oxygen_saturation_status),2===(null==t?null:t.oxygen_saturation_status),3===(null==t?null:t.oxygen_saturation_status))),e.xp6(1),e.Oqu(null==t?null:t.oxygen_saturation)}}function $e(a,s){if(1&a&&(e.TgZ(0,"td")(1,"div",34),e._uU(2),e.qZA()()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.kEZ(2,P,1===(null==t?null:t.oxygen_saturation_status),2===(null==t?null:t.oxygen_saturation_status),3===(null==t?null:t.oxygen_saturation_status))),e.xp6(1),e.Oqu(t.oxygen_saturation)}}function Ve(a,s){if(1&a&&(e.TgZ(0,"td")(1,"div",34),e._uU(2),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.kEZ(2,P,1===(null==t?null:t.ketone_status),2===(null==t?null:t.ketone_status),3===(null==t?null:t.ketone_status))),e.xp6(1),e.Oqu(null!=t.ketone?n.roundNumber_(t.ketone):null)}}function We(a,s){if(1&a&&(e.TgZ(0,"td")(1,"div",34),e._uU(2),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.kEZ(2,P,1===(null==t?null:t.weight_status),2===(null==t?null:t.weight_status),3===(null==t?null:t.weight_status))),e.xp6(1),e.hij(" ",null!=t.weight_lbs?n.roundNumber(t.weight_lbs):null," ")}}function je(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr",33),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.setReadingId(o))}),e.TgZ(1,"td"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.YNc(4,Ke,2,1,"td",24),e.YNc(5,Ye,3,6,"td",24),e.YNc(6,He,2,1,"td",24),e.YNc(7,Le,3,6,"td",24),e.TgZ(8,"td")(9,"div",34),e._uU(10),e.qZA()(),e.YNc(11,Ee,3,6,"td",24),e.YNc(12,Ge,3,6,"td",24),e.YNc(13,$e,3,6,"td",24),e.YNc(14,Ve,3,6,"td",24),e.YNc(15,We,3,6,"td",24),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA()()}if(2&a){const t=s.$implicit,n=e.oxw();e.xp6(2),e.Oqu(e.Dn7(3,16,null==t?null:t.reading_time,"short","IST")),e.xp6(2),e.Q6J("ngIf",n.hideBmiColumn),e.xp6(1),e.Q6J("ngIf",n.hidePulseColumn),e.xp6(1),e.Q6J("ngIf",n.hideMealColoumn&&n.show),e.xp6(1),e.Q6J("ngIf",n.hideGlucoseColumn),e.xp6(2),e.Q6J("ngClass",e.kEZ(20,P,1===(null==t?null:t.bp_diastolic_status)||1===(null==t?null:t.bp_systolic_status),2===(null==t?null:t.bp_diastolic_status)||2===(null==t?null:t.bp_systolic_status),3===(null==t?null:t.bp_diastolic_status)||3===(null==t?null:t.bp_systolic_status))),e.xp6(1),e.AsE(" ",null==t?null:t.bp_systolic,"",null!=(null==t?null:t.bp_diastolic)?"/"+(null==t?null:t.bp_diastolic):""," "),e.xp6(1),e.Q6J("ngIf",n.hideTemperatureColoumn&&n.show),e.xp6(1),e.Q6J("ngIf",n.hideS2OColumn&&n.show),e.xp6(1),e.Q6J("ngIf",n.hideS2OColumn),e.xp6(1),e.Q6J("ngIf",n.hideKetoneColoumn),e.xp6(1),e.Q6J("ngIf",n.hideWeightColoumn),e.xp6(2),e.Oqu(t.time_spent),e.xp6(2),e.Oqu(null==t?null:t.result),e.xp6(2),e.Oqu(null==t?null:t.reading_status)}}function Xe(a,s){if(1&a&&(e.TgZ(0,"div",35)(1,"div",2)(2,"div",36),e._UZ(3,"div",37),e.qZA()()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("innerHTML",t.response,e.oJD)}}let et=(()=>{class a{constructor(t,n,i,o,r,m,c){this.formBuilder=t,this.patientService=n,this.router=i,this.addPatientComponent=o,this.decimalPipe=r,this.modalService=m,this.datepipe=c,this.show=!1,this.readings=!1,this.disableInput=!1,this.total=1e3,this.pageIndex=1,this.sortField=null,this.pageSize=10,this.pageSizeOptions=[10,20,30,40],this.current=this.addPatientComponent.current,this.sortOrder=null,this.hideBmiColumn=!1,this.hidePulseColumn=!1,this.hideS2OColumn=!1,this.hideGlucoseColumn=!1,this.hideKetoneColoumn=!1,this.showKetone=!1,this.hideWeightColoumn=!1,this.hideTemperatureColoumn=!1,this.hideMealColoumn=!1,this.get_all_data=!1,this.buildForm()}handleKeyboardEvent(t){t.ctrlKey&&("H"==t.key||"h"==t.key)&&t.shiftKey&&(t.preventDefault(),this.help(this.content)),("n"==t.key||"N"==t.key)&&t.altKey&&this.next(),t.altKey&&("P"==t.key||"p"==t.key)&&this.pre(),t.altKey&&("x"==t.key||"X"==t.key)&&this.close()}ngOnInit(){this.getPatientDevices()}next(){this.current=this.addPatientComponent.current,this.addPatientComponent.step(this.current+1)}pre(){this.current=this.addPatientComponent.current,this.addPatientComponent.step(this.current-1)}done(){console.log("done")}roundNumber(t){return this.decimalPipe.transform(t,"3.2-2")??"0"}roundNumber_(t){return this.decimalPipe.transform(t,"0.2-2")??"0"}getReadingsByFiltering(){this.savedParams.pageIndex=1,this.onQueryParamsChange(this.savedParams)}getPatientDevices(){this.patientService.getPatientDevices(this.patientService.patient_id).subscribe(t=>{1==t.success?this.patientDeviceDropdownData=t.data:d().fire({icon:"error",text:t.message})})}refresh(){this.form.value.to_date=null,this.form.value.patient_device=null,this.form.value.from_date=null,this.patientService.callSetPtReadingId(null),this.buildForm(),this.onQueryParamsChange(this.savedParams)}convert(t){const n=new Date(t),i=("0"+(n.getMonth()+1)).slice(-2),o=("0"+n.getDate()).slice(-2),r=("0"+n.getHours()).slice(-2),m=("0"+n.getHours()).slice(-2),c=("0"+n.getHours()).slice(-2);return[[n.getFullYear(),i,o].join("-"),[r,m,c].join(":")].join(" ")}onQueryParamsChange(t){var n=this;return(0,y.Z)(function*(){n.savedParams=t;const{pageIndex:o,sort:r}=t,c=r.find(g=>null!==g.value);n.sortField=c&&c.key||null,n.sortOrder=c&&c.value||null,n.pageIndex=o,n.getPatientReadings()})()}getPatientReadings(){var t={patient_id:this.patientService.patient_id,sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,to_date:null==this.form.value.to_date?"":this.convert(this.form.value.to_date),from_date:null==this.form.value.from_date?"":this.convert(this.form.value.from_date),patient_device_id:this.form.value.patient_device??"",get_all_data:this.get_all_data};this.patientService.getPatientReading(t).subscribe(n=>{if(1==n.success){this.patientReadingData=n.data;for(let i=0;this.patientReadingData.length>i;i++)this.patientReadingData[i].reading_time=this.patientReadingData[i]&&this.patientReadingData[i].reading_time&&!this.patientReadingData[i].reading_time.toString().includes("z")?this.datepipe.transform(this.patientReadingData[i].reading_time+"Z","M/d/yy, h:mm a"):this.datepipe.transform(this.patientReadingData[i].reading_time,"M/d/yy, h:mm a");this.hideBmiColumn=this.patientReadingData.some(i=>i.bmi),this.hidePulseColumn=this.patientReadingData.some(i=>i.pulse),this.hideS2OColumn=this.patientReadingData.some(i=>i.oxygen_saturation),this.hideGlucoseColumn=this.patientReadingData.some(i=>i.blood_glucose),this.hideKetoneColoumn=this.patientReadingData.some(i=>i.ketone),this.hideWeightColoumn=this.patientReadingData.some(i=>i.weight_lbs),this.hideMealColoumn=this.patientReadingData.some(i=>i.meal),this.hideTemperatureColoumn=this.patientReadingData.some(i=>i.temperature),this.totalReadings=n.data.length>0?n.data[0].total_record_count:0,!this.hideKetoneColoumn&&n.data.length>0&&(this.showKetone=!0)}else d().fire({icon:"error",text:n.message})})}help(t){this.patientService.getPatientSearchHelpResponse("readings").subscribe(n=>{1==n.success?(this.modalService.open(t,{size:"md"}),this.response=n.data.content,this.style=n.data.styles):d().fire({icon:"error",text:n.message})})}setReadingId(t){this.patientService.callSetPtReadingId(t.patient_reading_id)}close(){this.modalService.dismissAll()}buildForm(){this.form=this.formBuilder.group({to_date:[{value:null,disabled:this.disableInput},[l.kI.required]],from_date:[{value:null,disabled:this.disableInput},[l.kI.required]],patient_device:[{value:null,disabled:this.disableInput},[l.kI.required]]})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(l.QS),e.Y36(S.e),e.Y36(Z.F0),e.Y36(x.R),e.Y36(_.JJ),e.Y36(h.FF),e.Y36(_.uU))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-readings"]],viewQuery:function(t,n){if(1&t&&(e.Gf(De,5),e.Gf(v.v,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.content=i.first),e.iGM(i=e.CRH())&&(n.childComp=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(o){return n.handleKeyboardEvent(o)},!1,e.Jf7)},decls:60,vars:26,consts:[["nz-row","",1,"add-patient"],["nz-form","",1,"login-form",3,"formGroup"],[1,"formBox-full","viewMinWidth"],[1,"screen-header"],[1,"screen-name"],[1,"button-container"],["class","screen-header-btn margin-right",3,"click",4,"ngIf"],["ngbTooltip","Help","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn",3,"click"],[1,"fa","fa-question"],["nz-col","",1,"screen-search-criteria-div"],[1,"row"],[1,"col-lg-3","col-md-2","col-sm-6","col-xs-6"],["label","From","formControlName","from_date","icon","fa fa-calendar","align_icon","left"],["label","To","formControlName","to_date","icon","fa fa-calendar","align_icon","left"],["label","Patient Device","formControlName","patient_device","dropdown_placeholder","Patient Device","bindLabel","name","align_icon","left",3,"dropdownListData"],[1,"col-lg-2","col-md-2","col-sm-6","col-xs-6"],["ngbTooltip","Search","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn",3,"click"],[1,"fa","fa-search"],["ngbTooltip","Reset","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-left-12",3,"click"],[1,"fa","fa-arrow-rotate-left"],[1,"tableBox-full","viewMinWidth"],["nzShowSizeChanger","",1,"ch-table",3,"nzPageSizeOptions","nzShowPagination","nzFrontPagination","nzTotal","nzPageIndex","nzPageSize","nzData","nzQueryParams","nzPageIndexChange","nzPageSizeChange"],["nzTable","","sortTable","","filterTable",""],["nzColumnKey","date",3,"nzSortFn"],[4,"ngIf"],[2,"width","5%"],[1,"tbody-white-space"],[3,"click",4,"ngFor","ngForOf"],[1,"total"],[3,"src"],[1,"total-span"],["content",""],[1,"screen-header-btn","margin-right",3,"click"],[3,"click"],[3,"ngClass"],[1,"add-patient"],["nz-col","",1,"screen-criteria"],[1,"row",3,"innerHTML"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5," Device Readings "),e.qZA()(),e.TgZ(6,"div",5),e.YNc(7,we,3,0,"button",6),e.YNc(8,qe,3,0,"button",6),e.TgZ(9,"button",7),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(59);return e.KtG(n.help(r))}),e._UZ(10,"span",8),e.qZA()(),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11),e._UZ(14,"app-ad-custom-date",12),e.qZA(),e.TgZ(15,"div",11),e._UZ(16,"app-ad-custom-date",13),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"app-ad-custom-dropdown",14),e.qZA(),e.TgZ(19,"div",15)(20,"button",16),e.NdJ("click",function(){return n.getReadingsByFiltering()}),e._UZ(21,"span",17),e.qZA(),e.TgZ(22,"button",18),e.NdJ("click",function(){return n.refresh()}),e._UZ(23,"i",19),e.qZA()()(),e.TgZ(24,"div",10)(25,"div",20)(26,"nz-table",21,22),e.NdJ("nzQueryParams",function(r){return n.onQueryParamsChange(r)})("nzPageIndexChange",function(r){return n.pageIndex=r})("nzPageSizeChange",function(r){return n.pageSize=r}),e.TgZ(30,"thead")(31,"tr")(32,"th",23),e._uU(33,"Date"),e.qZA(),e.YNc(34,Me,2,0,"th",24),e.YNc(35,Ne,2,0,"th",24),e.YNc(36,Oe,2,0,"th",24),e.YNc(37,Ue,2,0,"th",24),e.TgZ(38,"th"),e._uU(39,"Systolic/Diastolic"),e.qZA(),e.YNc(40,Je,2,0,"th",24),e.YNc(41,Fe,2,0,"th",24),e.YNc(42,Qe,2,0,"th",24),e.YNc(43,Be,2,0,"th",24),e.YNc(44,Re,2,0,"th",24),e.TgZ(45,"th",25),e._uU(46,"Time Spent (hh:mm:ss) "),e.qZA(),e.TgZ(47,"th"),e._uU(48,"Result"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"Status"),e.qZA()()(),e.TgZ(51,"tbody",26),e.YNc(52,je,22,24,"tr",27),e.qZA()(),e.TgZ(53,"div",28),e._UZ(54,"img",29),e.ALo(55,"assetsSource"),e.TgZ(56,"span",30),e._uU(57),e.qZA()()()()()()()(),e.YNc(58,Xe,4,1,"ng-template",null,31,e.W1O)}if(2&t){const i=e.MAs(28);e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("ngIf",n.current>0),e.xp6(1),e.Q6J("ngIf",n.current<7),e.xp6(10),e.Q6J("dropdownListData",n.patientDeviceDropdownData),e.xp6(8),e.Q6J("nzPageSizeOptions",n.pageSizeOptions)("nzShowPagination",!0)("nzFrontPagination",!1)("nzTotal",n.totalReadings)("nzPageIndex",n.pageIndex)("nzPageSize",n.pageSize)("nzData",n.patientReadingData),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("ngIf",n.hideBmiColumn),e.xp6(1),e.Q6J("ngIf",n.hidePulseColumn),e.xp6(1),e.Q6J("ngIf",n.hideMealColoumn&&n.show),e.xp6(1),e.Q6J("ngIf",n.hideGlucoseColumn),e.xp6(3),e.Q6J("ngIf",n.hideTemperatureColoumn&&n.show),e.xp6(1),e.Q6J("ngIf",n.hideS2OColumn&&n.show),e.xp6(1),e.Q6J("ngIf",n.hideS2OColumn),e.xp6(1),e.Q6J("ngIf",n.hideKetoneColoumn),e.xp6(1),e.Q6J("ngIf",n.hideWeightColoumn),e.xp6(8),e.Q6J("ngForOf",i.data),e.xp6(2),e.Q6J("src",e.lcZ(55,24,"total.png"),e.LSH),e.xp6(3),e.Oqu(n.totalReadings)}},dependencies:[_.mk,_.sg,_.O5,h._L,l._Y,l.JJ,l.JL,l.sg,l.u,f.t3,f.SK,C.Lr,u.N8,u.qD,u.Uo,u._C,u.Om,u.p0,u.$Z,D.m,v.v,_.uU,N.n],styles:[".table-div[_ngcontent-%COMP%]{padding:30px;background:linear-gradient(180deg,rgba(241,231,255,.5) 0%,rgba(248,243,255,.5) 28.13%,rgba(248,243,255,.5) 65.62%,rgba(218,201,255,.5) 100%);border:1px solid rgba(185,136,255,.5);box-sizing:border-box}.steps-action[_ngcontent-%COMP%]{float:right;margin-right:13.7%;margin-top:2%;padding-bottom:5%}.gender-label[_ngcontent-%COMP%]{color:#bd123e;margin-left:20%;margin-top:2%}.gender[_ngcontent-%COMP%]{margin-left:5%;margin-right:3%;margin-top:4%}.male-female[_ngcontent-%COMP%]{margin-top:2%}[_nghost-%COMP%]     .ant-col{position:relative;max-width:100%}.additional-info[_ngcontent-%COMP%]{font-weight:700;font-size:20px;color:#bd123e;padding:17px}.background-cell-abnormal[_ngcontent-%COMP%]{border:3px solid orange;font-weight:600;background:#ffebeb;text-align:center}.background-cell-normal[_ngcontent-%COMP%]{border:3px solid #3bd797;font-weight:600;background:#f3faf7;text-align:center}.background-cell-critical[_ngcontent-%COMP%]{border:3px solid red;font-weight:600;background:#fff5e2;text-align:center}td[_ngcontent-%COMP%]{text-align:center}"]}),a})();var tt=p(99882),nt=p(28213),L=p(38231);const it=["content"];function at(a,s){if(1&a&&(e.TgZ(0,"tbody")(1,"tr"),e.ynx(2),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.BQk(),e.qZA()()),2&a){const t=s.$implicit;e.xp6(4),e.Oqu(t.patient_name),e.xp6(2),e.Oqu(t.device_type),e.xp6(2),e.Oqu(t.reading),e.xp6(2),e.Oqu(e.Dn7(11,8,t.start_date,"short","IST")),e.xp6(3),e.Oqu(e.Dn7(14,12,t.amendment_date,"short","IST")),e.xp6(3),e.Oqu(t.message),e.xp6(2),e.Oqu(t.time_spent),e.xp6(2),e.Oqu(t.user_name)}}function ot(a,s){1&a&&e._UZ(0,"tbody")}function st(a,s){if(1&a&&(e.TgZ(0,"div",28)(1,"div",2)(2,"div",29),e._UZ(3,"div",30),e.qZA()()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("innerHTML",t.response,e.oJD)}}function rt(a,s){if(1&a&&(e.TgZ(0,"div",51),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij("",t.taskBoardReadingTimer.minutes,"m")}}function lt(a,s){if(1&a&&(e.TgZ(0,"div",51),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij("",t.taskBoardReadingTimer.seconds,"s")}}function dt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",52)(1,"input",53),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.minutes=i)}),e.qZA(),e._UZ(2,"br"),e._uU(3,"min"),e.qZA()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.minutes)}}function ct(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",52)(1,"input",54),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.seconds=i)}),e.qZA(),e._UZ(2,"br"),e._uU(3,"sec"),e.qZA()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.seconds)}}function ut(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",55),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.stopTimer())}),e._UZ(1,"i",56),e.qZA()}}function pt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.playTimer())}),e._UZ(1,"i",58),e.qZA()}}function _t(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",59),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.pauseTimer())}),e._UZ(1,"i",60),e.qZA()}}function mt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",61)(1,"app-ad-custom-date",62),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.date_of_note=i)}),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.date_of_note)("showTime",t.showTime)}}function gt(a,s){if(1&a&&e._UZ(0,"nz-option",63),2&a){const t=s.$implicit;e.Q6J("nzLabel",t.name)("nzValue",t.id)}}function ht(a,s){if(1&a&&e._UZ(0,"nz-option",63),2&a){const t=s.$implicit;e.Q6J("nzLabel",t.name)("nzValue",t.id)}}function ft(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",31)(1,"h4",32),e._uU(2,"Add Note "),e.qZA(),e.TgZ(3,"span",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.getPatientNotes())}),e.qZA()(),e.TgZ(4,"div",34)(5,"div",35)(6,"span",36),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.ammended_note=i)}),e._uU(7,"Amended Note"),e.qZA(),e._UZ(8,"br"),e.YNc(9,rt,2,1,"div",37),e.YNc(10,lt,2,1,"div",37),e.YNc(11,dt,4,1,"div",38),e.YNc(12,ct,4,1,"div",38),e._UZ(13,"br"),e.TgZ(14,"div",39),e.YNc(15,ut,2,0,"div",40),e.YNc(16,pt,2,0,"div",41),e.YNc(17,_t,2,0,"div",42),e.YNc(18,mt,2,2,"div",43),e.TgZ(19,"div",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sendComment())}),e._UZ(20,"i",45),e.qZA()(),e.TgZ(21,"div")(22,"textarea",46),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.timerMessage=i)}),e.qZA()(),e.TgZ(23,"div",47)(24,"nz-select",48),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.readingStatus=i)}),e.YNc(25,gt,1,2,"nz-option",49),e.qZA()(),e.TgZ(26,"div",47)(27,"nz-select",50),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedMacros=i)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onMacrosChange(i))}),e.YNc(28,ht,1,2,"nz-option",49),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.ammended_note),e.xp6(3),e.Q6J("ngIf",!t.ammended_note),e.xp6(1),e.Q6J("ngIf",!t.ammended_note),e.xp6(1),e.Q6J("ngIf",t.ammended_note),e.xp6(1),e.Q6J("ngIf",t.ammended_note),e.xp6(3),e.Q6J("ngIf",!t.ammended_note),e.xp6(1),e.Q6J("ngIf",!t.taskBoardActiveInterval&&!t.ammended_note),e.xp6(1),e.Q6J("ngIf",t.taskBoardActiveInterval&&!t.ammended_note),e.xp6(1),e.Q6J("ngIf",t.ammended_note),e.xp6(4),e.Q6J("ngModel",t.timerMessage),e.xp6(2),e.Q6J("ngModel",t.readingStatus),e.xp6(1),e.Q6J("ngForOf",t.readingStatusData),e.xp6(2),e.Q6J("ngModel",t.selectedMacros),e.xp6(1),e.Q6J("ngForOf",t.macrosData)}}let bt=(()=>{class a{constructor(t,n,i,o,r,m,c,g,b,T){this.formBuilder=t,this.patientService=n,this.router=i,this.readingBoardService=o,this.datepipe=r,this.addPatientComponent=m,this.dashboardService=c,this.decimalPipe=g,this.modalService=b,this.showTime=!0,this.ammended_note=!1,this.readings=!1,this.disableInput=!1,this.get_all_data=!1,this.totalNotes=0,this.total=1e3,this.pageIndex=1,this.sortField=null,this.pageSize=10,this.pageSizeOptions=[10,20,30,40],this.current=this.addPatientComponent.current,this.sortOrder=null,this.taskBoardActiveInterval=!0,this.patient_reading_id=null,this.taskBoardReadingTimer={seconds:0,minutes:0,hours:0,playTimer:!0,TimerRunning:!1},T.backdrop="static",T.keyboard=!1,this.buildForm()}handleKeyboardEvent(t){t.ctrlKey&&("H"==t.key||"h"==t.key)&&t.shiftKey&&(t.preventDefault(),this.help(this.content)),("n"==t.key||"N"==t.key)&&t.altKey&&this.next(),t.altKey&&("P"==t.key||"p"==t.key)&&this.pre(),t.altKey&&("x"==t.key||"X"==t.key)&&this.close()}ngOnInit(){var t=this;this.getReadingStatusDropdown(),this.getMacrosDropdownData(),this.patientService.pt_reading_id.subscribe(function(){var n=(0,y.Z)(function*(i){try{t.patient_reading_id=i,t.getPatientNotes()}catch(o){console.error(o)}});return function(i){return n.apply(this,arguments)}}())}getMacrosDropdownData(){this.readingBoardService.getMacrosDropdownData().subscribe(t=>{1==t.success?this.macrosData=t.data:d().fire({icon:"error",text:t.message})})}getReadingStatusDropdown(){this.readingBoardService.getReadingStatus().subscribe(t=>{1==t.success?this.readingStatusData=t.data:d().fire({icon:"error",text:t.message})})}getCursor(){let t=document.getElementById("commentInput");return[t.selectionStart,t.selectionEnd]}onMacrosChange(t){var i=document.getElementById("commentInput").value,o=this.macrosData.filter(c=>c.id==t).map(c=>c.description)[0],r=this.getCursor(),m=i.substr(0,r[0])+o+i.substr(r[1]);this.timerMessage=m}next(){this.current=this.addPatientComponent.current,this.addPatientComponent.step(this.current+1)}pre(){this.current=this.addPatientComponent.current,this.addPatientComponent.step(this.current-1)}done(){console.log("done")}roundNumber(t){return this.decimalPipe.transform(t,"3.2-2")??"0"}onQueryParamsChange(t){var n=this;return(0,y.Z)(function*(){const{pageIndex:o,sort:r}=t,c=r.find(g=>null!==g.value);n.sortField=c&&c.key||null,n.sortOrder=c&&c.value||null,n.pageIndex=o,n.getPatientNotes()})()}getPatientNotes(){null!=this.timerMessage&&null!=this.timerMessage&&""!=this.timerMessage?d().fire({icon:"warning",text:"Do you want to save the note?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(t=>{t.isConfirmed?(this.sendComment(),this.taskBaordTimerInterval&&(this.taskBoardReadingTimer.playTimer=!0,this.taskBoardActiveInterval=!1,this.taskBoardReadingTimer.seconds=0,this.taskBoardReadingTimer.minutes=0,clearInterval(this.taskBaordTimerInterval)),this.timerMessage=null,this.modalService.dismissAll(),this.ammended_note=!1,this.minutes=null,this.readingStatus=null,this.selectedMacros=null,this.seconds=null,this.date_of_note=null,this.search_model={user_id:localStorage.getItem("user_id"),sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,patient_id:this.patientService.patient_id,patient_reading_id:this.patient_reading_id??"",get_all_data:this.get_all_data},this.patientService.getNoteSearchData(this.search_model).subscribe(n=>{if(1==n.success){this.notesData=n.data;for(let i=0;this.notesData.length>i;i++)this.notesData[i].start_date=this.notesData[i]&&this.notesData[i].start_date&&!this.notesData[i].start_date.toString().includes("z")?this.datepipe.transform(this.notesData[i].start_date+"Z","M/d/yy, h:mm a"):this.datepipe.transform(this.notesData[i].start_date,"M/d/yy, h:mm a"),this.notesData[i].amendment_date=this.notesData[i]&&this.notesData[i].amendment_date&&!this.notesData[i].amendment_date.toString().includes("z")?this.datepipe.transform(this.notesData[i].amendment_date+"Z","M/d/yy, h:mm a"):this.datepipe.transform(this.notesData[i].amendment_date,"M/d/yy, h:mm a");this.totalNotes=n.data.length>0?n.data[0].total_record_count:0}else d().fire({icon:"error",text:n.message})})):t.isDenied&&(this.taskBaordTimerInterval&&(this.taskBoardReadingTimer.playTimer=!0,this.taskBoardActiveInterval=!1,this.taskBoardReadingTimer.seconds=0,this.taskBoardReadingTimer.minutes=0,clearInterval(this.taskBaordTimerInterval)),this.timerMessage=null,this.modalService.dismissAll(),this.ammended_note=!1,this.minutes=null,this.seconds=null,this.selectedMacros=null,this.readingStatus=null,this.date_of_note=null,this.search_model={user_id:localStorage.getItem("user_id"),sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,patient_id:this.patientService.patient_id,patient_reading_id:this.patient_reading_id??"",get_all_data:this.get_all_data},this.patientService.getNoteSearchData(this.search_model).subscribe(n=>{if(1==n.success){this.notesData=n.data;for(let i=0;this.notesData.length>i;i++)this.notesData[i].start_date=this.notesData[i]&&this.notesData[i].start_date&&!this.notesData[i].start_date.toString().includes("z")?this.datepipe.transform(this.notesData[i].start_date+"Z","M/d/yy, h:mm a"):this.datepipe.transform(this.notesData[i].start_date,"M/d/yy, h:mm a"),this.notesData[i].amendment_date=this.notesData[i]&&this.notesData[i].amendment_date&&!this.notesData[i].amendment_date.toString().includes("z")?this.datepipe.transform(this.notesData[i].amendment_date+"Z","M/d/yy, h:mm a"):this.datepipe.transform(this.notesData[i].amendment_date,"M/d/yy, h:mm a");this.totalNotes=n.data.length>0?n.data[0].total_record_count:0}else d().fire({icon:"error",text:n.message})}))}):(this.taskBaordTimerInterval&&(this.taskBoardReadingTimer.playTimer=!0,this.taskBoardActiveInterval=!1,this.taskBoardReadingTimer.seconds=0,this.taskBoardReadingTimer.minutes=0,clearInterval(this.taskBaordTimerInterval)),this.timerMessage=null,this.modalService.dismissAll(),this.ammended_note=!1,this.minutes=null,this.readingStatus=null,this.selectedMacros=null,this.seconds=null,this.date_of_note=null,this.search_model={user_id:localStorage.getItem("user_id"),sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,patient_id:this.patientService.patient_id,patient_reading_id:this.patient_reading_id??"",get_all_data:this.get_all_data},this.patientService.getNoteSearchData(this.search_model).subscribe(t=>{if(1==t.success){this.notesData=t.data;for(let n=0;this.notesData.length>n;n++)this.notesData[n].start_date=this.notesData[n]&&this.notesData[n].start_date&&!this.notesData[n].start_date.toString().includes("z")?this.datepipe.transform(this.notesData[n].start_date+"Z","M/d/yy, h:mm a"):this.datepipe.transform(this.notesData[n].start_date,"M/d/yy, h:mm a"),this.notesData[n].amendment_date=this.notesData[n]&&this.notesData[n].amendment_date&&!this.notesData[n].amendment_date.toString().includes("z")?this.datepipe.transform(this.notesData[n].amendment_date+"Z","M/d/yy, h:mm a"):this.datepipe.transform(this.notesData[n].amendment_date,"M/d/yy, h:mm a");this.totalNotes=t.data.length>0?t.data[0].total_record_count:0}else d().fire({icon:"error",text:t.message})}))}timer(){this.taskBoardActiveInterval=!0,this.taskBoardReadingTimer.seconds=this.taskBoardReadingTimer.seconds,this.taskBoardReadingTimer.minutes=this.taskBoardReadingTimer.minutes,this.taskBaordTimerInterval=window.setInterval(()=>{this.taskBoardReadingTimer.TimerRunning=!0,this.taskBoardReadingTimer.seconds=this.taskBoardReadingTimer.seconds+1,60===this.taskBoardReadingTimer.seconds&&(this.taskBoardReadingTimer.minutes+=1,this.taskBoardReadingTimer.seconds=0)},1e3)}BillingCommentPopup(t){this.modalService.open(t,{size:"md "}),this.timer()}stopTimer(){this.taskBoardReadingTimer.seconds=0,this.taskBoardReadingTimer.minutes=0,clearInterval(this.taskBaordTimerInterval)}pauseTimer(){this.taskBoardActiveInterval=!1,clearInterval(this.taskBaordTimerInterval)}playTimer(){this.timer()}sendComment(){if(""===this.timerMessage||null==this.timerMessage)return void d().fire({icon:"error",text:"Comment field can not be empty."});if((""===this.date_of_note||null==this.date_of_note)&&this.ammended_note)return void d().fire({icon:"error",text:"Date of note cannot be null."});if((""===this.minutes||null==this.minutes)&&this.ammended_note)return void d().fire({icon:"error",text:"Minutes cannot be null."});if((""===this.seconds||null==this.seconds)&&this.ammended_note)return void d().fire({icon:"error",text:"Seconds cannot be null."});if(""===this.readingStatus||null==this.readingStatus)return void d().fire({icon:"error",text:"Select Status the field can not be empty."});const t=(new Date).toISOString();this.patient_logs=this.ammended_note?{patient_id:this.patientService.patient_id,user_id:Number(localStorage.getItem("user_id")),message:this.timerMessage,duration:60*Number(this.minutes)+Number(this.seconds),start_date:t,reading_status:Number(this.readingStatus),amendment_date:new Date(this.date_of_note).toISOString(),patient_readings_id:this.patient_reading_id}:{patient_id:this.patientService.patient_id,user_id:Number(localStorage.getItem("user_id")),message:this.timerMessage,start_date:t,duration:60*this.taskBoardReadingTimer.minutes+this.taskBoardReadingTimer.seconds,patient_readings_id:this.patient_reading_id},this.dashboardService.addBillingLogs(this.patient_logs).subscribe(n=>{1==n.success?(d().fire({icon:"success",text:n.message}),this.timerMessage=null,this.taskBoardReadingTimer.seconds=0,this.taskBoardReadingTimer.minutes=0,clearInterval(this.taskBaordTimerInterval),this.getPatientNotes(),this.ammended_note=!1,this.minutes=null,this.readingStatus=null,this.selectedMacros=null,this.seconds=null,this.date_of_note=null,this.modalService.dismissAll()):d().fire({icon:"error",text:n.message})})}help(t){this.patientService.getPatientSearchHelpResponse("readings").subscribe(n=>{1==n.success?(this.modalService.open(t,{size:"md"}),this.response=n.data.content,this.style=n.data.styles):d().fire({icon:"error",text:n.message})})}close(){null!=this.timerMessage&&null!=this.timerMessage&&""!=this.timerMessage&&d().fire({icon:"warning",text:"Do you want to save the note?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(t=>{t.isConfirmed?(this.sendComment(),this.modalService.dismissAll(),this.ammended_note=!1,this.minutes=null,this.seconds=null,this.date_of_note=null,this.timerMessage=null):t.isDenied&&(this.modalService.dismissAll(),this.ammended_note=!1,this.minutes=null,this.seconds=null,this.date_of_note=null,this.timerMessage=null)}),this.modalService.dismissAll(),this.ammended_note=!1,this.minutes=null,this.readingStatus=null,this.selectedMacros=null,this.seconds=null,this.date_of_note=null,this.timerMessage=null}buildForm(){this.form=this.formBuilder.group({})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(l.QS),e.Y36(S.e),e.Y36(Z.F0),e.Y36(tt.L),e.Y36(_.uU),e.Y36(x.R),e.Y36(H.s),e.Y36(_.JJ),e.Y36(h.FF),e.Y36(h.NM))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-patient-notes"]],viewQuery:function(t,n){if(1&t&&e.Gf(it,5),2&t){let i;e.iGM(i=e.CRH())&&(n.content=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(o){return n.handleKeyboardEvent(o)},!1,e.Jf7)},features:[e._Bn([h.NM,h.FF])],decls:45,vars:21,consts:[["nz-row","",1,"add-patient","top-margin-50"],["nz-form","",1,"login-form",3,"formGroup"],[1,"formBox-full","viewMinWidth"],[1,"screen-header"],[1,"screen-name"],[1,"button-container"],["ngbTooltip","Add Comment/Note","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn",3,"click"],[1,"fa","fa-plus"],["nz-col","",1,"screen-search-criteria-div"],[1,"row"],[1,"tableBox-full","viewMinWidth"],["nzShowSizeChanger","",1,"ch-table",3,"nzPageSizeOptions","nzFrontPagination","nzTotal","nzPageIndex","nzPageSize","nzData","nzQueryParams","nzPageIndexChange","nzPageSizeChange"],["nzTable","","sortTable","","filterTable",""],["nzColumnKey","patient_name",3,"nzSortFn"],["nzColumnKey","device_type",3,"nzSortFn"],["nzColumnKey","reading",3,"nzSortFn"],["nzColumnKey","start_date",3,"nzSortFn"],["nzColumnKey","amendment_date",3,"nzSortFn"],["nzColumnKey","notes",3,"nzSortFn"],["nzColumnKey","duration",3,"nzSortFn"],["nzColumnKey","user",3,"nzSortFn"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"total"],[3,"src"],[1,"total-span"],["content",""],["contentAddComment",""],[1,"add-patient"],["nz-col","",1,"screen-criteria"],[1,"row",3,"innerHTML"],[1,"modal-header"],["id","modal-basiec-title",1,"modal-title"],["aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","pop-over"],["id","stopwatch",1,"container-stopwatch"],["nz-checkbox","",1,"ammended",3,"ngModel","ngModelChange"],["class","stopwatch",4,"ngIf"],["class","stopwatch","style","width:83px !important;",4,"ngIf"],[1,"d-flex","justify"],["class","mt-3-p timer-icon-padding font-x-large","ngbTooltip","Reset","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["class","mt-3-p timer-icon-padding font-x-large","ngbTooltip","Play","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["class","mt-3-p timer-icon-padding font-x-large","ngbTooltip","Pause","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["style","margin-top: 10px;",4,"ngIf"],["ngbTooltip","Send","tooltipClass","custom-search-tooltip-color",1,"mt-3-p","timer-icon-padding","font-x-large",3,"click"],[1,"fa","fa-paper-plane"],["name","","id","commentInput","rows","2","placeholder","Add note here",1,"text-area",3,"ngModel","ngModelChange"],[1,"select-container"],["nzAllowClear","","nzPlaceHolder","Select Status",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzAllowClear","","nzPlaceHolder","Select Macros",3,"ngModel","ngModelChange"],[1,"stopwatch"],[1,"stopwatch",2,"width","83px !important"],["type","text","name","minutes",2,"width","50px",3,"ngModel","ngModelChange"],["type","text","name","seconds",2,"width","50px",3,"ngModel","ngModelChange"],["ngbTooltip","Reset","tooltipClass","custom-search-tooltip-color",1,"mt-3-p","timer-icon-padding","font-x-large",3,"click"],[1,"fa","fa-stop"],["ngbTooltip","Play","tooltipClass","custom-search-tooltip-color",1,"mt-3-p","timer-icon-padding","font-x-large",3,"click"],[1,"fa","fa-play"],["ngbTooltip","Pause","tooltipClass","custom-search-tooltip-color",1,"mt-3-p","timer-icon-padding","font-x-large",3,"click"],[1,"fa","fa-circle-pause"],[2,"margin-top","10px"],["label","Date of Note *","format","MM/dd/yyyy HH:mm:ss","icon","fa fa-calendar","align_icon","left",3,"ngModel","showTime","ngModelChange"],[3,"nzLabel","nzValue"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5," Patient Notes "),e.qZA()(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(44);return e.KtG(n.BillingCommentPopup(r))}),e._UZ(8,"span",7),e.qZA()(),e.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"nz-table",11,12),e.NdJ("nzQueryParams",function(r){return n.onQueryParamsChange(r)})("nzPageIndexChange",function(r){return n.pageIndex=r})("nzPageSizeChange",function(r){return n.pageSize=r}),e.TgZ(16,"thead")(17,"tr")(18,"th",13),e._uU(19,"Patient Name"),e.qZA(),e.TgZ(20,"th",14),e._uU(21,"Device Type"),e.qZA(),e.TgZ(22,"th",15),e._uU(23,"Reading"),e.qZA(),e.TgZ(24,"th",16),e._uU(25,"Date"),e.qZA(),e.TgZ(26,"th",17),e._uU(27,"Amendment Date"),e.qZA(),e.TgZ(28,"th",18),e._uU(29,"Notes"),e.qZA(),e.TgZ(30,"th",19),e._uU(31,"Time Spent (hh:mm:ss)"),e.qZA(),e.TgZ(32,"th",20),e._uU(33,"Added By"),e.qZA()()(),e.YNc(34,at,21,16,"tbody",21),e.YNc(35,ot,1,0,"tbody",22),e.qZA(),e.TgZ(36,"div",23),e._UZ(37,"img",24),e.ALo(38,"assetsSource"),e.TgZ(39,"span",25),e._uU(40),e.qZA()()()()()()()(),e.YNc(41,st,4,1,"ng-template",null,26,e.W1O),e.YNc(43,ft,29,14,"ng-template",null,27,e.W1O)}if(2&t){const i=e.MAs(14);e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(11),e.Q6J("nzPageSizeOptions",n.pageSizeOptions)("nzFrontPagination",!1)("nzTotal",n.totalNotes)("nzPageIndex",n.pageIndex)("nzPageSize",n.pageSize)("nzData",n.notesData),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("ngForOf",i.data),e.xp6(1),e.Q6J("ngIf",0==i.data.length),e.xp6(2),e.Q6J("src",e.lcZ(38,19,"total.png"),e.LSH),e.xp6(3),e.Oqu(n.totalNotes)}},dependencies:[_.sg,_.O5,h._L,l._Y,l.Fj,l.JJ,l.JL,l.On,l.sg,nt.Ie,f.t3,f.SK,C.Lr,L.Ip,L.Vq,u.N8,u.qD,u.Uo,u._C,u.Om,u.p0,u.$Z,D.m,_.uU,N.n],styles:[".stopwatch[_ngcontent-%COMP%]{font-size:larger;background:#c7e0f8;color:#000;padding:10px;width:53px;margin:10px;display:inline-block;border-radius:38px;background:#e0e0e0;box-shadow:6px -6px 8px #9d9d9d,-6px 6px 8px #fff}.container-stopwatch[_ngcontent-%COMP%]{text-align:center;padding-bottom:30px;width:80%;height:45%;margin-left:24px;min-width:301px;position:inherit;top:49%;left:5%;background:white;margin-bottom:35px;margin-top:35px;border-radius:7px;background:#e7e4e4;box-shadow:6px -6px 8px #9d9d9d,-6px 6px 8px #fff}.stopwatch-button[_ngcontent-%COMP%]{-webkit-appearance:none;border:none;background-color:#2e80b3;color:#fff;width:80px;height:47px;transition:.3s;border-radius:33px;box-shadow:6px -6px 8px #9d9d9d,-6px 6px 8px #fff}#stopwatch[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background-color:#ae7617}.table-div[_ngcontent-%COMP%]{padding:30px;background:linear-gradient(180deg,rgba(241,231,255,.5) 0%,rgba(248,243,255,.5) 28.13%,rgba(248,243,255,.5) 65.62%,rgba(218,201,255,.5) 100%);border:1px solid rgba(185,136,255,.5);box-sizing:border-box}.steps-action[_ngcontent-%COMP%]{float:right;margin-right:13.7%;margin-top:2%;padding-bottom:5%}.gender-label[_ngcontent-%COMP%]{color:#bd123e;margin-left:20%;margin-top:2%}.gender[_ngcontent-%COMP%]{margin-left:5%;margin-right:3%;margin-top:4%}.male-female[_ngcontent-%COMP%]{margin-top:2%}[_nghost-%COMP%]     .ant-col{position:relative;max-width:100%}.additional-info[_ngcontent-%COMP%]{font-weight:700;font-size:20px;color:#bd123e;padding:17px}.background-cell-abnormal[_ngcontent-%COMP%]{border:3px solid orange;font-weight:600;background:#ffebeb;text-align:center}.background-cell-normal[_ngcontent-%COMP%]{border:3px solid #3bd797;font-weight:600;background:#f3faf7;text-align:center}.background-cell-critical[_ngcontent-%COMP%]{border:3px solid red;font-weight:600;background:#fff5e2;text-align:center}.top-margin-50[_ngcontent-%COMP%]{margin-top:50px}.ammended[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px}"]}),a})();var vt=p(21243),Ct=p(37351);const xt=["content"];function Tt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.enrollPatient())}),e._uU(1," Create POC "),e.qZA()}}function Zt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clear())}),e._uU(1," Clear "),e.qZA()}}function yt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.save())}),e._UZ(1,"i",39),e.qZA()}}function zt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancel())}),e._UZ(1,"i",41),e.qZA()}}function Pt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.pre())}),e.TgZ(1,"span"),e._uU(2,"Previous"),e.qZA()()}}function St(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.next())}),e.TgZ(1,"span"),e._uU(2,"Next"),e.qZA()()}}function kt(a,s){if(1&a&&(e.TgZ(0,"div",16),e._UZ(1,"app-ad-custom-dropdown",50),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("validations",!(t.transition_border&&null==t.form.value.home_health_nurse_id||""==t.form.value.home_health_nurse_id))("dropdownListData",t.providerData)("readonly",t.disabled_poc)}}function It(a,s){if(1&a&&(e.TgZ(0,"div",16),e._UZ(1,"app-ad-custom-dropdown",51),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("dropdownListData",t.homeTeleMonitoringServiceData)("validations",!(t.transition_border&&null==t.form.value.home_telemonitoring_service_id||""==t.form.value.home_telemonitoring_service_id))("readonly",t.disabled_poc)}}function At(a,s){if(1&a&&(e.TgZ(0,"div",15),e.YNc(1,kt,2,3,"div",49),e.YNc(2,It,2,3,"div",49),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.medicaid),e.xp6(1),e.Q6J("ngIf",t.medicaid)}}function Dt(a,s){1&a&&(e.TgZ(0,"div",52)(1,"div",53),e._uU(2," Risk Factor "),e.qZA()())}function wt(a,s){1&a&&e._UZ(0,"div",15)}function qt(a,s){1&a&&(e.TgZ(0,"div",16),e._UZ(1,"input",54),e._uU(2," Two or more hospitalizations in the prior 12-month period "),e.qZA())}function Mt(a,s){1&a&&(e.TgZ(0,"div",16),e._UZ(1,"input",55),e._uU(2," Frequent or recurrent emergency department visits "),e.qZA())}function Nt(a,s){1&a&&(e.TgZ(0,"div",16),e._UZ(1,"input",56),e._uU(2," Living alone or being home alone for extended periods of time "),e.qZA())}function Ot(a,s){1&a&&(e.TgZ(0,"div",16),e._UZ(1,"input",57),e._uU(2,"Documented history of care access challenges "),e.qZA())}function Ut(a,s){1&a&&(e.TgZ(0,"div",16),e._UZ(1,"input",58),e._uU(2," Limited or absent informal support systems "),e.qZA())}function Jt(a,s){1&a&&(e.TgZ(0,"div",16),e._UZ(1,"input",59),e._uU(2," Documented history of falls in the prior six-month period "),e.qZA())}function Ft(a,s){1&a&&(e.TgZ(0,"div",15)(1,"div"),e._UZ(2,"input",60),e._uU(3," Documented history of poor adhenrence to ordered medication regimens "),e.qZA()())}const Qt=function(a){return{disableDiv:a}};function Bt(a,s){if(1&a&&(e.TgZ(0,"div",44)(1,"div",15)(2,"div",16),e._UZ(3,"app-ad-custom-dropdown",45),e.qZA(),e.TgZ(4,"div",16),e._UZ(5,"app-ad-custom-dropdown",46),e.qZA()(),e.YNc(6,At,3,2,"div",47),e.YNc(7,Dt,3,0,"div",48),e.YNc(8,wt,1,0,"div",47),e.TgZ(9,"div",15),e.YNc(10,qt,3,0,"div",49),e.YNc(11,Mt,3,0,"div",49),e.qZA(),e.TgZ(12,"div",15),e.YNc(13,Nt,3,0,"div",49),e.YNc(14,Ot,3,0,"div",49),e.qZA(),e.TgZ(15,"div",15),e.YNc(16,Ut,3,0,"div",49),e.YNc(17,Jt,3,0,"div",49),e.qZA(),e.YNc(18,Ft,4,0,"div",47),e.qZA()),2&a){const t=e.oxw();e.Q6J("ngClass",e.VKq(17,Qt,t.disabled_poc)),e.xp6(3),e.Q6J("readonly",t.disabled_poc)("validations",!(t.transition_border&&null==t.form.value.transmission_frequency||""==t.form.value.transmission_frequency))("dropdownListData",t.transmissionData),e.xp6(2),e.Q6J("dropdownListData",t.mentalStatusData)("readonly",t.disabled_poc)("validations",!(t.transition_border&&null==t.form.value.mental_status||""==t.form.value.mental_status)),e.xp6(1),e.Q6J("ngIf",t.medicaid),e.xp6(1),e.Q6J("ngIf",t.medicaid),e.xp6(1),e.Q6J("ngIf",t.medicaid),e.xp6(2),e.Q6J("ngIf",t.medicaid),e.xp6(1),e.Q6J("ngIf",t.medicaid),e.xp6(2),e.Q6J("ngIf",t.medicaid),e.xp6(1),e.Q6J("ngIf",t.medicaid),e.xp6(2),e.Q6J("ngIf",t.medicaid),e.xp6(1),e.Q6J("ngIf",t.medicaid),e.xp6(1),e.Q6J("ngIf",t.medicaid)}}const Rt=function(){return{standalone:!0}};function Kt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr",61),e.NdJ("focus",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onFocus(o))}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td")(17,"div"),e.ynx(18),e.TgZ(19,"nz-switch",62),e.NdJ("ngModelChange",function(i){const r=e.CHM(t).$implicit;return e.KtG(r.is_active=i)}),e.qZA(),e.BQk(),e.qZA()(),e.TgZ(20,"td")(21,"div",63)(22,"i",64),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.edit_poc(o))}),e.qZA(),e.TgZ(23,"i",65),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.downloadPlanOfCare(o))}),e.qZA()()()()}if(2&a){const t=s.$implicit,n=e.oxw();e.xp6(2),e.Oqu(null==t?null:t.status),e.xp6(2),e.Oqu(null==t?null:t.payer_name),e.xp6(2),e.Oqu(null==t?null:t.provider_name),e.xp6(2),e.Oqu(e.xi3(9,10,null==t?null:t.start_date,"MM/dd/yyyy")),e.xp6(3),e.Oqu(e.xi3(12,13,null==t?null:t.end_date,"MM/dd/yyyy")),e.xp6(3),e.Oqu(e.xi3(15,16,null==t?null:t.last_downloaded,"MM/dd/yyyy hh:mm:ss")),e.xp6(5),e.Q6J("nzLoading",n.loading)("ngModel",t.is_active)("ngModelOptions",e.DdM(19,Rt))("nzDisabled",!0)}}function Yt(a,s){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",66),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.downloadMedicareForm())}),e._UZ(2,"span",67),e.qZA(),e.TgZ(3,"nz-layout",68)(4,"nz-content",69),e._UZ(5,"app-medicare-plan-of-care"),e.qZA()(),e.BQk()}}function Ht(a,s){if(1&a&&(e.TgZ(0,"div",70)(1,"div",2)(2,"div",71),e._UZ(3,"div",72),e.qZA()()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("innerHTML",t.response,e.oJD)}}const Lt=function(){return{padding:"0px"}};let Et=(()=>{class a{constructor(t,n,i,o,r,m){this.formBuilder=t,this.router=n,this.datepipe=i,this.patientService=o,this.addPatientComponent=r,this.modalService=m,this.transition_border=!1,this.showAuthorizationForm=!1,this.loading=!1,this.medicaid=!1,this.plan_of_care=!1,this.poc_edit=!1,this.pageIndex=1,this.pageSize=10,this.sortField=null,this.sortOrder=null,this.get_all_data=!1,this.pageSizeOptions=[10,20,30,40],this.disableInput=!1,this.showCreateButton=!1,this.disabled_poc=!1,this.listOfDisplayDataForPOC=null,this.current=this.addPatientComponent.current,this.buildForm()}handleKeyboardEvent(t){t.ctrlKey&&("H"==t.key||"h"==t.key)&&t.shiftKey&&(t.preventDefault(),this.help(this.content)),t.ctrlKey&&("E"==t.key||"e"==t.key)&&t.shiftKey&&(t.preventDefault(),null!=this.data&&this.edit_poc(this.data)),("s"==t.key||"S"==t.key)&&t.shiftKey&&t.ctrlKey&&this.save(),("x"==t.key||"X"==t.key)&&t.altKey&&(this.cancel(),this.close(),this.handleMedicareFormCancel()),("d"==t.key||"D"==t.key)&&t.altKey&&(t.preventDefault(),null!=this.data&&(this.downloadPlanOfCare(this.data),this.downloadMedicareForm())),t.ctrlKey&&("C"==t.key||"c"==t.key)&&t.shiftKey&&(t.preventDefault(),!this.poc_edit&&this.showCreateButton&&this.enrollPatient()),("n"==t.key||"N"==t.key)&&t.altKey&&this.next(),t.altKey&&("P"==t.key||"p"==t.key)&&this.pre(),("c"==t.key||"C"==t.key)&&t.altKey&&this.clear(),"+"==t.key&&t.altKey&&!this.poc_edit&&this.showCreateButton&&this.enrollPatient()}ngOnInit(){this.getMentalStatusData(),this.getTransmissionFrequencyData(),this.getProviderSearchDropdown(),this.getHomeTeleMonitoringServices()}getProviderSearchDropdown(){localStorage.getItem("user_id"),this.patientService.getProviderDropdownDataBasedOnLocation(this.patientService.patient.location_id).subscribe(n=>{1==n.success?this.providerData=n.data:d().fire({icon:"error",text:n.message})})}onQueryParamsChange(t){var n=this;return(0,y.Z)(function*(){const{pageIndex:o,sort:r}=t;n.savedParams=t;const c=r.find(g=>null!==g.value);n.sortField=c&&c.key||null,n.sortOrder=c&&c.value||null,n.pageIndex=o,n.getPatientPlanCare()})()}getPatientPlanCare(){this.patientService.getPatientPlanCare({patient_id:this.patientService.patient_id,sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,get_all_data:this.get_all_data}).subscribe(n=>{1==n.success?(this.listOfDisplayDataForPOC=n.data,this.listOfDisplayDataForPOC.filter(o=>1==o.is_active),this.showCreateButton=0==this.listOfDisplayDataForPOC.length||this.listOfDisplayDataForPOC.length>0&&0==this.listOfDisplayDataForPOC[0].has_active_plan_of_care,this.total=n.data.length>0?n.data[0].total_record_count:0):d().fire({icon:"error",text:n.message})})}onEndDateChange(t){t<this.form.value.start_date&&(d().fire({icon:"error",text:"End date should be greater than start date."}),this.form.controls.end_date.setValue(null))}getHomeTeleMonitoringServices(){var t=localStorage.getItem("user_id");this.patientService.getHomeTeleMonitoringServices(t).subscribe(n=>{1==n.success?this.homeTeleMonitoringServiceData=n.data:d().fire({icon:"error",text:n.message})})}getTransmissionFrequencyData(){this.patientService.getTransmisssionFrequencyData().subscribe(t=>{1==t.success?this.transmissionData=t.data:d().fire({icon:"error",text:t.message})})}onFocus(t){this.data=t}getMentalStatusData(){this.patientService.getMentalStatusData().subscribe(t=>{1==t.success?this.mentalStatusData=t.data:d().fire({icon:"error",text:t.message})})}next(){1==this.poc_edit&&(this.form.value.status||this.form.value.provider_id||this.form.value.end_date||this.form.value.start_date||this.form.value.default_note||this.form.value.payer_name)?d().fire({icon:"warning",text:"Do you want to save the changes?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Save",denyButtonText:"Don't save"}).then(t=>{t.isConfirmed?this.save():t.isDenied&&this.addPatientComponent.step(this.current+1)}):this.addPatientComponent.step(this.current+1)}pre(){this.current=this.addPatientComponent.current,1==this.poc_edit&&(this.form.value.status||this.form.value.provider_id||this.form.value.end_date||this.form.value.start_date||this.form.value.default_note||this.form.value.payer_name)?d().fire({icon:"warning",text:"Do you want to save the changes?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Save",denyButtonText:"Don't save"}).then(t=>{t.isConfirmed?this.save():t.isDenied&&this.addPatientComponent.step(this.current-1)}):this.addPatientComponent.step(this.current-1)}edit_poc(t){this.rpmPlanCareId=t.rpm_care_plan_id,t.is_active?(this.disabled_poc=!1,this.poc_edit=!0):(this.disabled_poc=!0,this.poc_edit=!1),this.medicaid="Medicaid"==t.payer_type,this.buildForm(),"object"!=typeof t.provider_id&&null!=t.provider_id&&null!=t.provider_id&&(t.provider_id=t.provider_id.split(",").map(n=>Number(n))),t.start_date=this.datepipe.transform(t.start_date,"yyyy-MM-dd"),t.end_date=this.datepipe.transform(t.end_date,"yyyy-MM-dd"),t.is_active=t.is_active.toString(),t.default_note=t.note,this.form.patchValue(t)}add(){this.poc_edit=!1}save(){if(this.transition_border=!0,this.medicaid){var t=0;if(1==this.form.value.two_or_more_hosp&&t++,1==this.form.value.history_of_falls&&t++,1==this.form.value.freq_emergency_visits&&t++,1==this.form.value.living_alone&&t++,1==this.form.value.limited_informal_supp_sys&&t++,1==this.form.value.poor_adherence&&t++,1==this.form.value.history_of_care_acc_challenges&&t++,t<2)return void d().fire({icon:"error",text:"Select atleast 2 risk factors"})}if(this.form.valid){var n={user_id:localStorage.getItem("user_id"),start_date:this.form.value.start_date,end_date:this.form.value.end_date,rpm_care_plan_id:this.rpmPlanCareId,providers:this.form.value.provider_id.toString(),transmission_frequency:this.form.value.transmission_frequency,mental_status:this.form.value.mental_status,patient_id:this.patientService.patient_id,home_telemonitoring_service_id:this.form.value.home_telemonitoring_service_id,home_health_nurse_id:this.form.value.home_health_nurse_id,two_or_more_hosp:this.form.value.two_or_more_hosp,freq_emergency_visits:this.form.value.freq_emergency_visits,living_alone:this.form.value.living_alone,poor_adherence:this.form.value.poor_adherence,history_of_falls:this.form.value.history_of_falls,limited_informal_supp_sys:this.form.value.limited_informal_supp_sys,history_of_care_acc_challenges:this.form.value.history_of_care_acc_challenges,is_active:this.form.value.is_active,default_note:this.form.value.default_note};this.patientService.updatePlanCare(n).subscribe(i=>{1==i.success?(this.form.reset(),this.poc_edit=!1,this.transition_border=!1,d().fire({icon:"success",text:i.message}),this.getPatientPlanCare()):d().fire({icon:"error",text:i.message})})}else d().fire({icon:"error",text:"Check all required feilds."})}cancel(){this.poc_edit=!1,this.buildForm()}clear(){this.buildForm()}help(t){this.patientService.getPatientSearchHelpResponse("plan-of-care").subscribe(n=>{1==n.success?(this.modalService.open(t,{size:"md"}),this.response=n.data.content,this.style=n.data.styles):d().fire({icon:"error",text:n.message})})}close(){this.modalService.dismissAll()}enrollPatient(){this.patientService.enrolledPatient(this.patientService.patient_id).subscribe(t=>{1==t.success?(d().fire({icon:"success",text:t.message}),this.getPatientPlanCare()):d().fire({icon:"error",text:t.message})})}downloadPlanOfCare(t){var n=this;return(0,y.Z)(function*(){n.showAuthorizationForm=!0,n.patientService.rpm_care_plan_id=t.rpm_care_plan_id,n.poc_activity=t.is_active})()}handleMedicareFormCancel(){this.onQueryParamsChange(this.savedParams),this.showAuthorizationForm=!1}downloadMedicareForm(){document.getElementById("page_1"),F()(document.getElementById("page_1")).then(i=>{const o=i.toDataURL("image/JPEG");let r=new J.ZP("p","mm","a4");var m=r.internal.pageSize.getWidth(),c=r.internal.pageSize.getHeight();r.addImage(o,"JPEG",0,0,m,c);var b={data:r.output("datauristring").replace("data:application/pdf;filename=generated.pdf;base64,",""),patient_id:this.patientService.patient_id,name:"Plan Of Care",user_id:localStorage.getItem("user_id")};this.patientService.addPOCDocument(b).subscribe(T=>{1==T.success?r.save("Plan Of Care.pdf"):d().fire({icon:"error",text:T.message})})})}done(){console.log("done")}buildForm(){this.form=this.formBuilder.group({status:[{value:null,disabled:this.disableInput},[l.kI.required]],provider_id:[{value:null,disabled:this.disableInput},[l.kI.required]],start_date:[{value:null,disabled:this.disableInput},[l.kI.required]],end_date:[{value:null,disabled:this.disableInput},[l.kI.required]],payer_name:[{value:null,disabled:!0},[l.kI.required]],transmission_frequency:[{value:null,disabled:this.disableInput},1==this.medicaid?[l.kI.required]:""],mental_status:[{value:null,disabled:this.disableInput},1==this.medicaid?[l.kI.required]:""],home_telemonitoring_service_id:[{value:null,disabled:this.disableInput},1==this.medicaid?[l.kI.required]:""],home_health_nurse_id:[{value:null,disabled:this.disableInput},1==this.medicaid?[l.kI.required]:""],two_or_more_hosp:[{value:null,disabled:this.disableInput}],freq_emergency_visits:[{value:null,disabled:this.disableInput}],living_alone:[{value:null,disabled:this.disableInput}],history_of_care_acc_challenges:[{value:null,disabled:this.disableInput}],history_of_falls:[{value:null,disabled:this.disableInput}],poor_adherence:[{value:null,disabled:this.disableInput}],limited_informal_supp_sys:[{value:null,disabled:this.disableInput}],default_note:[{value:"",disabled:this.disableInput}],is_active:[{value:"true",disabled:this.disableInput}]})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(l.QS),e.Y36(Z.F0),e.Y36(_.uU),e.Y36(S.e),e.Y36(x.R),e.Y36(h.FF))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-plan-of-care"]],viewQuery:function(t,n){if(1&t&&(e.Gf(xt,5),e.Gf(v.v,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.content=i.first),e.iGM(i=e.CRH())&&(n.childComp=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(o){return n.handleKeyboardEvent(o)},!1,e.Jf7)},decls:69,vars:32,consts:[["nz-row","",1,"add-patient"],["nz-form","",1,"login-form",3,"formGroup"],[1,"formBox-full","viewMinWidth"],[1,"screen-header"],[1,"screen-name"],[1,"button-container"],["class","screen-header-btn margin-right","ngbTooltip","Create POC","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["class","screen-header-btn","ngbTooltip","Clear","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["class","screen-header-btn margin-right","ngbTooltip","Save","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["class","screen-header-btn","ngbTooltip","Cancel","tooltipClass","custom-search-tooltip-color",3,"click",4,"ngIf"],["class","screen-header-btn margin-left",3,"click",4,"ngIf"],["class","screen-header-btn margin-left margin-right",3,"click",4,"ngIf"],["ngbTooltip","Help","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn",3,"click"],[1,"fa","fa-question"],["nz-col","",1,"screen-search-criteria-div"],[1,"row"],[1,"col-lg-3","col-md-3","col-lg-5","col-lg-6"],["type","text","placeholder","Status","label","Status","formControlName","status","icon","fa fa-clipboard-question","align_icon","left",3,"disabled"],["label","Rendering Provider/Care Team *","dropdown_placeholder","Care Team","formControlName","provider_id","bindLabel","name","icon","fa fa-user","align_icon","left",3,"validations","dropdownListData","readonly","multiple"],["label","Start Date *","accesskey","S","formControlName","start_date","icon","fa fa-calendar","align_icon","left",3,"disabled","validations"],["label","End Date *","formControlName","end_date","accesskey","A","icon","fa fa-calendar","align_icon","left",3,"disabled","validations","ngModelChange"],["type","text","placeholder","Insurance","label","Insurance","formControlName","payer_name","icon","fa fa-clipboard-question","align_icon","left",3,"disabled"],["formControlName","is_active",1,"is-active-form"],["nz-radio","","nzValue","true"],["nz-radio","","nzValue","false"],[1,"col-lg-12","col-md-12","col-lg-5","col-lg-6"],["type","text","label","Default Note","accesskey","O","dropdown_placeholder","Default Note","formControlName","default_note","align_icon","left",3,"disabled"],[3,"ngClass",4,"ngIf"],[1,"tableBox-full","viewMinWidth"],["nzShowSizeChanger","",1,"ch-table",3,"nzPageSizeOptions","nzShowPagination","nzFrontPagination","nzTotal","nzPageIndex","nzPageSize","nzData","nzQueryParams","nzPageIndexChange","nzPageSizeChange"],["nzTable","","sortTable","","filterTable",""],[1,"tbody-white-space"],["tabindex","0",3,"focus",4,"ngFor","ngForOf"],["nzTitle","Medicare Plan Of Care",3,"nzVisible","nzFooter","nzBodyStyle","nzWidth","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],["content",""],["ngbTooltip","Create POC","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],["ngbTooltip","Clear","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn",3,"click"],["ngbTooltip","Save","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-floppy-disk","icon-padding"],["ngbTooltip","Cancel","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn",3,"click"],[1,"fa","fa-xmark","icon-padding"],[1,"screen-header-btn","margin-left",3,"click"],[1,"screen-header-btn","margin-left","margin-right",3,"click"],[3,"ngClass"],["label","Transmission Frequency *","dropdown_placeholder","Transmission Frequency","formControlName","transmission_frequency","bindLabel","name","icon","fa fa-wave-square","align_icon","left",3,"readonly","validations","dropdownListData"],["label","Mental Status *","bindLabel","name","formControlName","mental_status","dropdown_placeholder","Mental Status","icon","fa fa-wave-square","align_icon","left",3,"dropdownListData","readonly","validations"],["class","row",4,"ngIf"],["class"," row screen-header",4,"ngIf"],["class","col-lg-3 col-md-3 col-lg-5 col-lg-6",4,"ngIf"],["label","Home Health Nurse *","dropdown_placeholder","Home Health Nurse","formControlName","home_health_nurse_id","bindLabel","name","icon","fa fa-wave-square","align_icon","left",3,"validations","dropdownListData","readonly"],["dropdown_placeholder","Home TeleMonitoring Service","label","Home TeleMonitoring Service *","formControlName","home_telemonitoring_service_id","bindLabel","name","icon","fa fa-clipboard-question","align_icon","left",3,"dropdownListData","validations","readonly"],[1,"row","screen-header"],[1,"screen-name",2,"margin-left","10px","margin-top","25px","position","absolute","height","30px","padding","5px"],["type","checkbox","formControlName","two_or_more_hosp",1,"risk-checkbox"],["type","checkbox","formControlName","freq_emergency_visits",1,"risk-checkbox"],["type","checkbox","formControlName","living_alone",1,"risk-checkbox"],["type","checkbox","formControlName","history_of_care_acc_challenges",1,"risk-checkbox"],["type","checkbox","formControlName","limited_informal_supp_sys",1,"risk-checkbox"],["type","checkbox","formControlName","history_of_falls",1,"risk-checkbox"],["type","checkbox","formControlName","poor_adherence",1,"risk-checkbox"],["tabindex","0",3,"focus"],[1,"rpm-switch",3,"nzLoading","ngModel","ngModelOptions","nzDisabled","ngModelChange"],[1,"table-icon-container"],["nz-icon","","nzType","edit","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Edit",1,"table-coloumn-icons",3,"click"],["nz-icon","","nzType","download","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Download",1,"table-coloumn-icons",3,"click"],["aria-label","Download",1,"ant-modal-close","ng-tns-c251-16","ng-star-inserted",2,"top","19px","right","73px",3,"click"],[1,"fa","fa-download",2,"font-size","19px"],[1,"layout-height"],[1,"margin-top-25"],[1,"add-patient"],["nz-col","",1,"screen-criteria"],[1,"row",3,"innerHTML"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5," Plan of Care "),e.qZA()(),e.TgZ(6,"div",5),e.YNc(7,Tt,2,0,"button",6),e.YNc(8,Zt,2,0,"button",7),e.YNc(9,yt,2,0,"button",8),e.YNc(10,zt,2,0,"button",9),e.YNc(11,Pt,3,0,"button",10),e.YNc(12,St,3,0,"button",11),e.TgZ(13,"button",12),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(68);return e.KtG(n.help(r))}),e._UZ(14,"span",13),e.qZA()(),e.TgZ(15,"div",14)(16,"div",15)(17,"div",16),e._UZ(18,"app-ad-custom-input",17),e.qZA(),e.TgZ(19,"div",16),e._UZ(20,"app-ad-custom-dropdown",18),e.qZA()(),e.TgZ(21,"div",15)(22,"div",16),e._UZ(23,"app-ad-custom-date",19),e.qZA(),e.TgZ(24,"div",16)(25,"app-ad-custom-date",20),e.NdJ("ngModelChange",function(r){return n.onEndDateChange(r)}),e.qZA()()(),e.TgZ(26,"div",15)(27,"div",16),e._UZ(28,"app-ad-custom-input",21),e.qZA(),e.TgZ(29,"div",16)(30,"nz-radio-group",22)(31,"label",23),e._uU(32,"Active"),e.qZA(),e.TgZ(33,"label",24),e._uU(34,"Inactive"),e.qZA()()()(),e.TgZ(35,"div",15)(36,"div",25),e._UZ(37,"app-ad-custom-input",26),e.qZA()(),e.YNc(38,Bt,19,19,"div",27),e.TgZ(39,"div",15)(40,"div",28)(41,"nz-table",29,30),e.NdJ("nzQueryParams",function(r){return n.onQueryParamsChange(r)})("nzPageIndexChange",function(r){return n.pageIndex=r})("nzPageSizeChange",function(r){return n.pageSize=r}),e.TgZ(45,"thead")(46,"tr")(47,"th"),e._uU(48,"Status"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"Program Insurance"),e.qZA(),e.TgZ(51,"th"),e._uU(52,"Care Team"),e.qZA(),e.TgZ(53,"th"),e._uU(54,"Start Date"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"End Date"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Last Downloaded"),e.qZA(),e.TgZ(59,"th"),e._uU(60,"Active"),e.qZA(),e.TgZ(61,"th"),e._uU(62,"Actions"),e.qZA()()(),e.TgZ(63,"tbody",31),e.YNc(64,Kt,24,20,"tr",32),e.qZA()()()()()()()(),e.TgZ(65,"nz-modal",33),e.NdJ("nzVisibleChange",function(r){return n.showAuthorizationForm=r})("nzOnCancel",function(){return n.handleMedicareFormCancel()}),e.YNc(66,Yt,6,0,"ng-container",34),e.qZA(),e.YNc(67,Ht,4,1,"ng-template",null,35,e.W1O)}if(2&t){const i=e.MAs(43);e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(6),e.Q6J("ngIf",!n.poc_edit&&n.showCreateButton),e.xp6(1),e.Q6J("ngIf",!n.poc_edit),e.xp6(1),e.Q6J("ngIf",n.poc_edit),e.xp6(1),e.Q6J("ngIf",n.poc_edit),e.xp6(1),e.Q6J("ngIf",n.current>0),e.xp6(1),e.Q6J("ngIf",n.current<7),e.xp6(6),e.Q6J("disabled",!0),e.xp6(2),e.Q6J("validations",!(n.transition_border&&null==n.form.value.provider_id||""==n.form.value.provider_id))("dropdownListData",n.providerData)("readonly",n.disabled_poc)("multiple",!0),e.xp6(3),e.Q6J("disabled",n.disabled_poc)("validations",!(n.transition_border&&null==n.form.value.start_date||""==n.form.value.start_date)),e.xp6(2),e.Q6J("disabled",n.disabled_poc)("validations",!(n.transition_border&&null==n.form.value.end_date||""==n.form.value.end_date)),e.xp6(3),e.Q6J("disabled",!0),e.xp6(9),e.Q6J("disabled",n.disabled_poc),e.xp6(1),e.Q6J("ngIf",n.medicaid),e.xp6(3),e.Q6J("nzPageSizeOptions",n.pageSizeOptions)("nzShowPagination",!0)("nzFrontPagination",!1)("nzTotal",n.total)("nzPageIndex",n.pageIndex)("nzPageSize",n.pageSize)("nzData",n.listOfDisplayDataForPOC),e.xp6(23),e.Q6J("ngForOf",i.data),e.xp6(1),e.Q6J("nzVisible",n.showAuthorizationForm)("nzFooter",null)("nzBodyStyle",e.DdM(31,Lt))("nzWidth",875)}},dependencies:[_.mk,_.sg,_.O5,h._L,l._Y,l.Wl,l.JJ,l.JL,l.On,l.sg,l.u,Q.w,f.t3,f.SK,C.Lr,w.Ls,q.hw,q.OK,M.du,M.Hf,z.Of,z.Dg,vt.i,u.N8,u.Uo,u._C,u.Om,u.p0,u.$Z,A.y,D.m,v.v,Ct.p,_.uU],styles:[".table-div[_ngcontent-%COMP%]{padding:30px;background:linear-gradient(180deg,rgba(241,231,255,.5) 0%,rgba(248,243,255,.5) 28.13%,rgba(248,243,255,.5) 65.62%,rgba(218,201,255,.5) 100%);border:1px solid rgba(185,136,255,.5);box-sizing:border-box}.steps-action[_ngcontent-%COMP%]{float:right;margin-right:13.7%;margin-top:2%;padding-bottom:5%}.gender-label[_ngcontent-%COMP%]{color:#bd123e;margin-left:20%;margin-top:2%}.gender[_ngcontent-%COMP%]{margin-left:5%;margin-right:3%;margin-top:4%}.male-female[_ngcontent-%COMP%]{margin-top:2%}[_nghost-%COMP%]     .ant-col{position:relative;max-width:100%}.additional-info[_ngcontent-%COMP%]{font-weight:700;font-size:20px;color:#bd123e;padding:17px}"]}),a})();var Gt=p(80529);const $t=["content"];function Vt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.pre())}),e.TgZ(1,"span"),e._uU(2,"Previous"),e.qZA()()}}function Wt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.done())}),e.TgZ(1,"span"),e._uU(2,"Done"),e.qZA()()}}function jt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr",29),e.NdJ("focus",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onFocus(o))}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td")(11,"div",30)(12,"i",31),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.deleteDocument(o.document_id))}),e.qZA(),e.TgZ(13,"i",32),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.viewDocument(o))}),e.qZA()()()()}if(2&a){const t=s.$implicit;e.xp6(2),e.Oqu(null==t?null:t.title),e.xp6(2),e.Oqu(null==t?null:t.document_type),e.xp6(2),e.Oqu(e.xi3(7,4,null==t?null:t.created_on,"MM/dd/yyyy hh:mm:ss")),e.xp6(3),e.Oqu(null==t?null:t.created_by_user_name)}}function Xt(a,s){if(1&a&&(e.TgZ(0,"div",33)(1,"div",2)(2,"div",34),e._UZ(3,"div",35),e.qZA()()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("innerHTML",t.response,e.oJD)}}let en=(()=>{class a{constructor(t,n,i,o,r,m){this.patientService=t,this.http=n,this.formBuilder=i,this.router=o,this.addPatientComponent=r,this.modalService=m,this.selected=!1,this.documents=!1,this.disableInput=!1,this.transition_border=!1,this.total=1e3,this.pageIndex=1,this.pageSize=10,this.sortField=null,this.sortOrder=null,this.pageSizeOptions=[10,20,30,40],this.get_all_data=!1,this.current=this.addPatientComponent.current,this.buildForm()}handleKeyboardEvent(t){"Enter"==t.key&&13===t.keyCode&&document.getElementById("childComp")&&this.childComp.fileList.nativeElement.click(),t.ctrlKey&&("H"==t.key||"h"==t.key)&&t.shiftKey&&(t.preventDefault(),this.help(this.content)),t.altKey&&("P"==t.key||"p"==t.key)&&this.pre(),("c"==t.key||"C"==t.key)&&t.altKey&&this.clear(),("x"==t.key||"X"==t.key)&&t.altKey&&this.close(),("T"==t.key||"t"==t.key)&&t.altKey&&(this.childComp1.fileList.focus(),this.selected=!1),("A"==t.key||"a"==t.key)&&t.altKey&&this.addDocument(),("n"==t.key||"N"==t.key)&&t.altKey&&this.done(),t.ctrlKey&&("d"==t.key||"D"==t.key)&&t.shiftKey&&(t.preventDefault(),null!=this.document_id&&this.deleteDocument(this.document_id)),t.ctrlKey&&("v"==t.key||"V"==t.key)&&t.shiftKey&&(t.preventDefault(),null!=this.data&&this.viewDocument(this.data))}ngOnInit(){this.getDocumentTypes(),this.getPatientDocument()}getDocumentTypes(){this.patientService.getDocumentType().subscribe(t=>{1==t.success?this.documentType=t.data:d().fire({icon:"error",text:t.message})})}pre(){this.current=this.addPatientComponent.current,this.form.value.document_type_id||this.form.value.file||this.form.value.comment?d().fire({icon:"warning",text:"Do you want to save the changes?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Save",denyButtonText:"Don't save"}).then(t=>{t.isConfirmed?this.addDocument():t.isDenied&&this.addPatientComponent.step(this.current-1)}):this.addPatientComponent.step(this.current-1)}addDocument(){this.transition_border=!0;let t=this.childComp.fileList.nativeElement.files;if(0==t.length)return void d().fire({icon:"error",text:"Please select file."});if(!this.form.valid)return void d().fire({icon:"error",text:"Check all required feilds."});let n=new FormData;n.append("file",t[0]),this.patientService.addPatientDoc(n,this.patientService.patient_id,this.form.value.document_type_id,this.form.value.comment,this.form.value.is_active).subscribe(o=>{1==o.success?(this.buildForm(),this.transition_border=!1,this.getPatientDocument(),d().fire({icon:"success",text:o.message})):d().fire({icon:"error",text:o.message})})}done(){this.form.value.document_type_id||this.form.value.file||this.form.value.comment?d().fire({icon:"warning",text:"Do you want to save the changes?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Save",denyButtonText:"Don't save"}).then(t=>{t.isConfirmed?this.addDocument():t.isDenied&&this.router.navigate(["/patient-search"])}):this.router.navigate(["/patient-search"])}onfocusclick(){if(!1===this.selected){let t=new MouseEvent("click",{bubbles:!1});this.childComp.fileList.nativeElement.dispatchEvent(t),this.selected=!0}}onQueryParamsChange(t){var n=this;return(0,y.Z)(function*(){const{pageIndex:o,sort:r}=t,c=r.find(g=>null!==g.value);n.sortField=c&&c.key||null,n.sortOrder=c&&c.value||null,n.pageIndex=o,n.getPatientDocument()})()}getPatientDocument(){this.patientService.getPatientDocument({patient_id:this.patientService.patient_id,sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,get_all_data:this.get_all_data}).subscribe(n=>{1==n.success?(this.listOfDisplayDataForDocuments=n.data,this.total=n.data.length>0?n.data[0].total_record_count:0):d().fire({icon:"error",text:n.message})})}onFocus(t){this.data=t,this.document_id=t.document_id}clear(){this.buildForm()}help(t){this.patientService.getPatientSearchHelpResponse("documents").subscribe(n=>{1==n.success?(this.modalService.open(t,{size:"md"}),this.response=n.data.content,this.style=n.data.styles):d().fire({icon:"error",text:n.message})})}close(){this.modalService.dismissAll()}viewDocument(t){this.patientService.getDocumentPathById(t.document_id).subscribe(n=>{var o=window.URL.createObjectURL(n),r=document.createElement("a");r.setAttribute("href",o),r.setAttribute("target","_blank"),r.click()},n=>{d().fire({icon:"error",text:n})})}deleteDocument(t){this.patientService.deletePatientDocument(t).subscribe(n=>{1==n.success?(d().fire({icon:"success",text:n.message}),this.buildForm(),this.getPatientDocument()):d().fire({icon:"error",text:n.message})})}buildForm(){this.form=this.formBuilder.group({is_active:[{value:"1",disabled:this.disableInput},[l.kI.required]],comment:[{value:null,disabled:this.disableInput}],file:[{value:null,disabled:this.disableInput}],document_type_id:[{value:null,disabled:this.disableInput},[l.kI.required]]})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(S.e),e.Y36(Gt.eN),e.Y36(l.QS),e.Y36(Z.F0),e.Y36(x.R),e.Y36(h.FF))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-documents"]],viewQuery:function(t,n){if(1&t&&(e.Gf($t,5),e.Gf(A.y,5),e.Gf(v.v,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.content=i.first),e.iGM(i=e.CRH())&&(n.childComp=i.first),e.iGM(i=e.CRH())&&(n.childComp1=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(o){return n.handleKeyboardEvent(o)},!1,e.Jf7)},decls:54,vars:15,consts:[["nz-row","",1,"add-patient"],["nz-form","",1,"login-form",3,"formGroup"],[1,"formBox-full","viewMinWidth"],[1,"screen-header"],[1,"screen-name"],[1,"button-container"],[1,"screen-header-btn"],[1,"fa","fa-plus","icon-padding",3,"click"],["ngbTooltip","Clear","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-left",3,"click"],["class","screen-header-btn margin-left",3,"click",4,"ngIf"],["ngbTooltip","Help","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-left",3,"click"],[1,"fa","fa-question"],["nz-col","",1,"screen-search-criteria-div"],[1,"row"],[1,"col-lg-3","col-md-3","col-lg-5","col-lg-6"],["label","Type*","accesskey","T","dropdown_placeholder","Type","icon","fa fa-text","bindLabel","name","formControlName","document_type_id","align_icon","left",3,"autofocus","validations","dropdownListData"],["type","file","label","File Upload*","dropdown_placeholder","Upload","formControlName","file","align_icon","left","readonly","",2,"padding-left","0",3,"validations","onfocusClick"],[1,"col-lg-12","col-md-12","col-lg-5","col-lg-6"],["type","text","label","Comment","accesskey","O","dropdown_placeholder","Comment","formControlName","comment","align_icon","left"],["formControlName","is_active",2,"margin-top","-9px","margin-left","147px"],["nz-radio","","nzValue","1"],["nz-radio","","nzValue","0"],[1,"tableBox-full","viewMinWidth"],["nzShowSizeChanger","",1,"ch-table",3,"nzPageSizeOptions","nzShowPagination","nzFrontPagination","nzTotal","nzPageIndex","nzPageSize","nzData","nzQueryParams","nzPageIndexChange","nzPageSizeChange"],["nzTable","","sortTable","","filterTable",""],[1,"tbody-white-space"],["tabindex","0",3,"focus",4,"ngFor","ngForOf"],["content",""],[1,"screen-header-btn","margin-left",3,"click"],["tabindex","0",3,"focus"],[1,"table-icon-container"],["nz-icon","","nzType","delete","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Delete",1,"table-coloumn-icons",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","View",1,"table-coloumn-icons",3,"click"],[1,"add-patient"],["nz-col","",1,"screen-criteria"],[1,"row",3,"innerHTML"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5," Documents "),e.qZA()(),e.TgZ(6,"div",5)(7,"button",6)(8,"i",7),e.NdJ("click",function(){return n.addDocument()}),e.qZA()(),e.TgZ(9,"button",8),e.NdJ("click",function(){return n.clear()}),e._uU(10," Clear "),e.qZA(),e.YNc(11,Vt,3,0,"button",9),e.YNc(12,Wt,3,0,"button",9),e.TgZ(13,"button",10),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(53);return e.KtG(n.help(r))}),e._UZ(14,"span",11),e.qZA()(),e.TgZ(15,"div",12)(16,"div",13)(17,"div",14),e._UZ(18,"app-ad-custom-dropdown",15),e.qZA(),e.TgZ(19,"div",14)(20,"app-ad-custom-input",16),e.NdJ("onfocusClick",function(){return n.onfocusclick()}),e.qZA()()(),e.TgZ(21,"div",13)(22,"div",17),e._UZ(23,"app-ad-custom-input",18),e.qZA()(),e.TgZ(24,"div",13)(25,"div",14)(26,"nz-form-item")(27,"nz-radio-group",19)(28,"label",20),e._uU(29,"Active"),e.qZA(),e.TgZ(30,"label",21),e._uU(31,"Inactive"),e.qZA()()()()(),e.TgZ(32,"div",13)(33,"div",22)(34,"nz-table",23,24),e.NdJ("nzQueryParams",function(r){return n.onQueryParamsChange(r)})("nzPageIndexChange",function(r){return n.pageIndex=r})("nzPageSizeChange",function(r){return n.pageSize=r}),e.TgZ(38,"thead")(39,"tr")(40,"th"),e._uU(41,"Name"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Type"),e.qZA(),e.TgZ(44,"th"),e._uU(45,"Created On"),e.qZA(),e.TgZ(46,"th"),e._uU(47,"Created By"),e.qZA(),e.TgZ(48,"th"),e._uU(49,"Actions"),e.qZA()()(),e.TgZ(50,"tbody",25),e.YNc(51,jt,14,7,"tr",26),e.qZA()()()()()()()(),e.YNc(52,Xt,4,1,"ng-template",null,27,e.W1O)}if(2&t){const i=e.MAs(36);e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(10),e.Q6J("ngIf",n.current>0),e.xp6(1),e.Q6J("ngIf",n.current<7),e.xp6(6),e.Q6J("autofocus",!0)("validations",!(n.transition_border&&null==n.form.value.document_type_id||""==n.form.value.document_type_id))("dropdownListData",n.documentType),e.xp6(2),e.Q6J("validations",!(n.transition_border&&null==n.form.value.file||""==n.form.value.file)),e.xp6(14),e.Q6J("nzPageSizeOptions",n.pageSizeOptions)("nzShowPagination",!0)("nzFrontPagination",!1)("nzTotal",n.total)("nzPageIndex",n.pageIndex)("nzPageSize",n.pageSize)("nzData",n.listOfDisplayDataForDocuments),e.xp6(17),e.Q6J("ngForOf",i.data)}},dependencies:[_.sg,_.O5,h._L,l._Y,l.JJ,l.JL,l.sg,l.u,Q.w,f.t3,f.SK,C.Lr,C.Nx,w.Ls,z.Of,z.Dg,u.N8,u.Uo,u._C,u.Om,u.p0,u.$Z,A.y,v.v,_.uU],styles:[".table-div[_ngcontent-%COMP%]{padding:30px;background:linear-gradient(180deg,rgba(241,231,255,.5) 0%,rgba(248,243,255,.5) 28.13%,rgba(248,243,255,.5) 65.62%,rgba(218,201,255,.5) 100%);border:1px solid rgba(185,136,255,.5);box-sizing:border-box}.steps-action[_ngcontent-%COMP%]{float:right;margin-right:13.7%;margin-top:2%;padding-bottom:5%}.gender-label[_ngcontent-%COMP%]{color:#bd123e;margin-left:20%;margin-top:2%}.gender[_ngcontent-%COMP%]{margin-left:5%;margin-right:3%;margin-top:4%}.male-female[_ngcontent-%COMP%]{margin-top:2%}[_nghost-%COMP%]     .ant-col{position:relative;max-width:100%}.additional-info[_ngcontent-%COMP%]{font-weight:700;font-size:20px;color:#bd123e;padding:17px}"]}),a})();const tn=[{path:"",component:x.R}];let nn=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[w.PV,_.ez,G.T,Z.Bz.forChild(tn),l.u5,l.UX,h.IJ,E.m,Z.Bz]}),a})();e.B6R(x.R,function(){return[_.O5,Y.iy,Y.$W,se,ve,Ce.n,xe.j,Te.Z,Ae,et,bt,Et,en]},[])}}]);