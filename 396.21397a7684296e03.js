"use strict";(self.webpackChunktemplate_rpm_adnare=self.webpackChunktemplate_rpm_adnare||[]).push([[396],{6396:(M,p,r)=>{r.r(p),r.d(p,{AddDataRoleModule:()=>J});var u=r(6895),c=r(2510),g=r(1083),n=r(433),m=r(6773),D=r(8740),_=r(5226),s=r.n(_),e=r(4650),b=r(4392),C=r(9503),h=r(3679),f=r(6704),v=r(8521),w=r(1237),R=r(728),A=r(3345);function I(o,l){1&o&&(e.TgZ(0,"div",23),e._uU(1," Add Data Role "),e.qZA())}function Z(o,l){1&o&&(e.TgZ(0,"div",23),e._uU(1," Edit Data Role "),e.qZA())}function x(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"app-ad-custom-dropdown",24),e.NdJ("onModelChange",function(a){e.CHM(t);const d=e.oxw();return e.KtG(d.onEnterpriseDropdownChange(a))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("multiple",!0)("validations",!(t.transition_border&&(null==t.form.value.enterprise||""==t.form.value.enterprise||null==t.form.value.enterprise)))("dropdownListData",t.enterpriseDropdownData)}}function T(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"app-ad-custom-dropdown",25),e.NdJ("onModelChange",function(a){e.CHM(t);const d=e.oxw();return e.KtG(d.onPracticeDropdownChange(a))}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("multiple",!0)("validations",!(t.transition_border&&(null==t.form.value.practice||""==t.form.value.practice||null==t.form.value.practice)))("dropdownListData",t.practiceDropdownData)}}function S(o,l){if(1&o&&(e.TgZ(0,"div",14),e._UZ(1,"app-ad-custom-dropdown",26),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("validations",!(t.transition_border&&(null==t.form.value.location||""==t.form.value.location||null==t.form.value.location)))("multiple",!0)("dropdownListData",t.locationDropdownData)}}const L=[{path:"",component:(()=>{class o{constructor(t,i,a,d){this.formBuilder=t,this.router=i,this.dataRoleService=a,this.patientService=d,this.disableInput=!1,this.checkFormValid=!0,this.transition_border=!1,this.practice=!1,this.location=!1,this.enterprise=!0,this.locationDropdownData=[],this.buildForm()}ngOnInit(){this.getPracticesDropdown(),this.getPermissionLevelDropdown(),this.getEnterpriseDropdown(),this.getLocationsDropdown(),this.method=this.dataRoleService.method,null!=this.dataRoleService.data_role_id&&null!=this.dataRoleService.data_role_id&&this.getDataRoleInfo()}getDataRoleInfo(){this.dataRoleService.getDataRoleInfoById(this.dataRoleService.data_role_id).subscribe(t=>{1==t.success?(this.practiceDropdownData=null==this.practiceData?[]:this.practiceData.filter(i=>t.data.enterprise.some(a=>a==i.enterprise_id)),this.locationDropdownData=null==this.locationData?[]:this.locationData.filter(i=>t.data.practice.some(a=>a==i.practice_id)),t.data.is_active=t.data.is_active.toString(),this.form.patchValue(t.data),3==t.data.permission_level&&(this.location=!0,this.practice=!0,this.enterprise=!0),2==t.data.permission_level&&(this.practice=!0,this.enterprise=!0,this.location=!1),1==t.data.permission_level&&(this.enterprise=!0,this.location=!1,this.practice=!1)):s().fire({icon:"error",text:t.message})})}getPermissionLevelDropdown(){this.dataRoleService.getPermissionLevelDropdown().subscribe(t=>{1==t.success?this.permissionData=t.data:s().fire({icon:"error",text:t.message})})}getEnterpriseDropdown(){this.userId=localStorage.getItem("user_id"),this.patientService.getActiveEnterpriseDropdownData(this.userId).subscribe(t=>{1==t.success?(this.enterpriseData=t.data,this.enterpriseDropdownData=this.enterpriseData,1==this.enterpriseData.length&&(this.form.value.enterprise=this.enterpriseData[0].id)):s().fire({icon:"error",text:t.message})})}getPracticesDropdown(){this.userId=localStorage.getItem("user_id"),this.patientService.getPracticesDropdownData(this.userId).subscribe(t=>{1==t.success?(this.practiceData=t.data,null!=this.form.value.enterprise&&null!=this.form.value.enterprise&&"create"==this.method&&(this.practiceDropdownData=this.practiceData.filter(i=>i.enterprise_id==this.form.value.enterprise))):s().fire({icon:"error",text:t.message})})}getLocationsDropdown(){this.userId=localStorage.getItem("user_id"),this.patientService.getLocationDropdownData(this.userId).subscribe(t=>{1==t.success?(this.locationData=t.data,null!=this.form.value.enterprise&&null!=this.form.value.enterprise&&"create"==this.method&&(this.locationDropdownData=this.locationData.filter(i=>i.enterprise_id==this.form.value.enterprise))):s().fire({icon:"error",text:t.message})})}onPermissionDropdownChange(t){"Entity"==t.name?(this.practice=!1,this.location=!1,this.enterprise=!0):"Practice"==t.name?(this.practice=!0,this.location=!1,this.enterprise=!0):"Location"==t.name&&(this.practice=!0,this.location=!0,this.enterprise=!0),this.reloadFormData()}onEnterpriseDropdownChange(t){null!=t&&0!==t.length?(this.practiceDropdownData=null==this.practiceData?[]:this.practiceData.filter(i=>t.some(a=>a.id==i.enterprise_id)),this.form.controls.practice.setValue(this.form.value.practice.filter(i=>this.practiceDropdownData.some(a=>a.id==i))),this.onPracticeDropdownChange(this.form.value.practice)):(this.form.value.practice=null,this.practiceDropdownData=null,this.locationDropdownData=null,this.form.controls.location.setValue(null),this.form.controls.practice.setValue(null))}onPracticeDropdownChange(t){null!=t&&0!==t.length?(this.locationDropdownData=null==this.locationData?[]:this.locationData.filter(i=>t.some(a=>a.id==i.practice_id)),0==this.locationDropdownData.length&&(this.locationDropdownData=null==this.locationData?[]:this.locationData.filter(i=>t.some(a=>a==i.practice_id))),this.form.controls.location.setValue(this.form.value.location.filter(i=>this.locationDropdownData.some(a=>a.id==i)))):(this.form.value.location=null,this.locationDropdownData=null)}addDataRole(){this.checkFormValid=!0,this.transition_border=!0,null!=this.form.value.is_active?this.form.valid&&this.checkFormValid?(this.addDataRoleData={created_by:localStorage.getItem("user_id"),data_role_id:this.dataRoleService.data_role_id,name:this.form.value.name,permission_level_id:this.form.value.permission_level,description:this.form.value.description,provider_id:this.form.value.provider,location_id:this.form.value.location,practice_id:this.form.value.practice,enterprise_id:this.form.value.enterprise,is_active:this.form.value.is_active},null!=this.dataRoleService.data_role_id&&null!=this.dataRoleService.data_role_id?this.dataRoleService.updateDataRole(this.addDataRoleData).subscribe(t=>{1==t.success?(s().fire({icon:"success",text:t.message}),this.buildForm(),this.router.navigate(["/data-role-search"])):s().fire({icon:"error",text:t.message})}):this.dataRoleService.addDataRole(this.addDataRoleData).subscribe(t=>{1==t.success?(s().fire({icon:"success",text:t.message}),this.buildForm(),this.router.navigate(["/data-role-search"])):s().fire({icon:"error",text:t.message})})):s().fire({icon:"error",text:"Check all required feilds."}):s().fire({icon:"error",text:"Select Active or Inactive"})}reloadFormData(){this.form.controls.enterprise.setValue(null),this.form.controls.practice.setValue(null),this.form.controls.location.setValue(null),this.form.controls.is_active.setValue("1")}cancel(){this.location=!1,this.practice=!1,this.enterprise=!0,this.dataRoleService.data_role_id=null,this.router.navigate(["/data-role-search"]),this.buildForm()}clear(){this.location=!1,this.practice=!1,this.enterprise=!0,this.buildForm()}buildForm(){this.form=this.formBuilder.group({name:[{value:null,disabled:this.disableInput},[n.kI.required]],permission_level:[{value:null,disabled:this.disableInput},[n.kI.required]],description:[{value:null,disabled:this.disableInput}],enterprise:[{value:[],disabled:this.disableInput},1==this.enterprise?[n.kI.required]:""],practice:[{value:[],disabled:this.disableInput},1==this.practice?[n.kI.required]:""],location:[{value:[],disabled:this.disableInput},1==this.location?[n.kI.required]:""],is_active:[{value:"1",disabled:this.disableInput},[n.kI.required]]})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(n.QS),e.Y36(c.F0),e.Y36(b.p),e.Y36(C.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-data-roles"]],decls:34,vars:9,consts:[["nz-row","",1,"add-device"],["nz-form","",1,"login-form",3,"formGroup"],[1,"formBox-full","viewMinWidth"],[1,"screen-header"],["class","screen-name",4,"ngIf"],[1,"button-container"],["ngbTooltip","Clear","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-left","margin-right",3,"click"],["ngbTooltip","Save","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-left","margin-right",3,"click"],[1,"fa","fa-floppy-disk","icon-padding"],["ngbTooltip","Cancel","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-xmark","icon-padding"],["nz-col","",1,"screen-criteria"],[1,"main"],[1,"row"],[1,"col-lg-2","col-md-2","col-lg-3","col-lg-4"],["type","text","placeholder","Name","label","Name *","formControlName","name","align_icon","left",3,"validations"],["label","Permission Level *","formControlName","permission_level","dropdown_placeholder","Permission","bindLabel","name","align_icon","left",3,"validations","dropdownListData","onModelChange"],["class","col-lg-2 col-md-2 col-lg-3 col-lg-4",4,"ngIf"],["formControlName","is_active"],["nz-radio","","nzValue","1"],["nz-radio","","nzValue","0"],[1,"col-lg-12","col-md-12","col-lg-12","col-lg-12"],["placeholder","Description","label","Description","formControlName","description","align_icon","left"],[1,"screen-name"],["label","Entity *","formControlName","enterprise","dropdown_placeholder","Entity","bindLabel","name","icon","fa fa-square-plus","align_icon","left",3,"multiple","validations","dropdownListData","onModelChange"],["label","Practice *","formControlName","practice","dropdown_placeholder","Practice","bindLabel","name","align_icon","left",3,"multiple","validations","dropdownListData","onModelChange"],["label","Location *","formControlName","location","dropdown_placeholder","Location","bindLabel","name","align_icon","left",3,"validations","multiple","dropdownListData"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3),e.YNc(4,I,2,0,"div",4),e.YNc(5,Z,2,0,"div",4),e.qZA(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return i.clear()}),e._uU(8," Clear "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return i.addDataRole()}),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return i.cancel()}),e._UZ(12,"i",10),e.qZA()(),e.TgZ(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14),e._UZ(17,"app-ad-custom-input",15),e.qZA(),e.TgZ(18,"div",14)(19,"app-ad-custom-dropdown",16),e.NdJ("onModelChange",function(d){return i.onPermissionDropdownChange(d)}),e.qZA()(),e.YNc(20,x,2,3,"div",17),e.qZA(),e.TgZ(21,"div",13),e.YNc(22,T,2,3,"div",17),e.YNc(23,S,2,3,"div",17),e.TgZ(24,"div",14)(25,"nz-form-item")(26,"nz-radio-group",18)(27,"label",19),e._uU(28,"Active"),e.qZA(),e.TgZ(29,"label",20),e._uU(30,"Inactive"),e.qZA()()()()(),e.TgZ(31,"div",13)(32,"div",21),e._UZ(33,"app-ad-custom-text-area",22),e.qZA()()()()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("ngIf","create"==i.method),e.xp6(1),e.Q6J("ngIf","update"==i.method),e.xp6(12),e.Q6J("validations",!(i.transition_border&&(null==i.form.value.name||""==i.form.value.name))),e.xp6(2),e.Q6J("validations",!(i.transition_border&&(null==i.form.value.permission_level||""==i.form.value.permission_level||null==i.form.value.permission_level)))("dropdownListData",i.permissionData),e.xp6(1),e.Q6J("ngIf",i.enterprise),e.xp6(2),e.Q6J("ngIf",i.practice),e.xp6(1),e.Q6J("ngIf",i.location))},dependencies:[u.O5,h.t3,h.SK,f.Lr,f.Nx,v.Of,v.Dg,n._Y,n.JJ,n.JL,n.sg,n.u,m._L,w.y,R.v,A.E],styles:[".main[_ngcontent-%COMP%]{background-color:#e8dbfa;border-radius:10px;padding:2% 4% 2% 2%;margin:25px}.sections[_ngcontent-%COMP%]{background-color:#e8dbfa;border-radius:0 10px 10px;padding:2% 4% 2% 2%;margin:25px}.screen-criteria[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(185,136,255,.5)}.add-provider[_ngcontent-%COMP%]{margin-left:5%;margin-top:5%}.error-message[_ngcontent-%COMP%]{position:absolute;left:13px;bottom:-13px;font-size:10px;color:#bd123e;line-height:1;font-weight:700}"]}),o})()}];let J=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,g.T,c.Bz.forChild(L),n.u5,n.UX,m.IJ,D.m,c.Bz]}),o})()}}]);