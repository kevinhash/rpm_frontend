"use strict";(self.webpackChunktemplate_rpm_adnare=self.webpackChunktemplate_rpm_adnare||[]).push([[328],{2328:(J,m,t)=>{t.r(m),t.d(m,{AddMenuRoleModule:()=>z});var c=t(6895),s=t(2510),g=t(1083),l=t(433),f=t(6773),b=t(8740),M=t(5226),a=t.n(M),e=t(4650),_=t(9038),R=t(9195),D=t(9503),p=t(3679),h=t(6704),v=t(8521),C=t(1237),A=t(728),Z=t(3345);function S(i,u){1&i&&(e.TgZ(0,"div",23),e._uU(1," Add Menu Role "),e.qZA())}function T(i,u){1&i&&(e.TgZ(0,"div",23),e._uU(1," Edit Menu Role "),e.qZA())}const I=[{path:"",component:(()=>{class i{constructor(n,o,r,d,w){this.formBuilder=n,this.router=o,this.menuRoleService=r,this.providerService=d,this.patientService=w,this.menu_id=[],this.disableInput=!1,this.checkFormValid=!0,this.transition_border=!1,this.buildForm()}ngOnInit(){this.getSubMenuDropdown(),this.getMenuDropdown(),this.method=this.menuRoleService.method,null!=this.menuRoleService.menu_role_id&&null!=this.menuRoleService.menu_role_id&&this.getMenuRoleInfo()}getMenuRoleInfo(){this.menuRoleService.getMenuRoleInfoById(this.menuRoleService.menu_role_id).subscribe(n=>{1==n.success?(n.data.is_active=n.data.is_active.toString(),this.subMenuData=null==this.menuDataDropdown?[]:this.menuDataDropdown.filter(o=>n.data.menu.some(r=>r==o.parent_menu_id)),this.form.patchValue(n.data)):a().fire({icon:"error",text:n.message})})}onParentMenuDropdownChange(n){null!=n&&0!==n.length?(this.subMenuData=null==this.menuDataDropdown?[]:this.menuDataDropdown.filter(o=>n.some(r=>r.id==o.parent_menu_id)),this.form.controls.sub_menu.setValue(this.form.value.sub_menu.filter(o=>this.subMenuData.some(r=>r.id==o)))):(this.form.controls.sub_menu.setValue(null),this.subMenuData=null)}getMenuDropdown(){this.menuRoleService.getMenuDropdownData().subscribe(n=>{1==n.success?this.menuData=n.data:a().fire({icon:"error",text:n.message})})}getSubMenuDropdown(){this.menuRoleService.getSubMenuDropdownData().subscribe(n=>{1==n.success?(this.menuDataDropdown=n.data,this.form.value.menu.length>0&&null!=this.form.value.menu&&(this.subMenuData=this.menuDataDropdown.filter(o=>this.form.value.menu.some(r=>r.id==o.parent_menu_id)))):a().fire({icon:"error",text:n.message})})}addMenuRole(){this.checkFormValid=!0,this.transition_border=!0,null!=this.form.value.is_active?this.form.valid&&this.checkFormValid?(this.addMenuRoleData={menu_role_id:this.menuRoleService.menu_role_id,created_by:localStorage.getItem("user_id"),name:this.form.value.name,description:this.form.value.description,sub_menu_id:this.form.value.sub_menu,menu_id:this.form.value.menu,is_active:this.form.value.is_active},null!=this.menuRoleService.menu_role_id&&null!=this.menuRoleService.menu_role_id?this.menuRoleService.updateMenuRole(this.addMenuRoleData).subscribe(n=>{1==n.success?(a().fire({icon:"success",text:n.message}),this.buildForm(),this.router.navigate(["/menu-role-search"])):a().fire({icon:"error",text:n.message})}):this.menuRoleService.addMenuRole(this.addMenuRoleData).subscribe(n=>{1==n.success?(a().fire({icon:"success",text:n.message}),this.buildForm(),this.router.navigate(["/menu-role-search"])):a().fire({icon:"error",text:n.message})})):a().fire({icon:"error",text:"Check all required feilds."}):a().fire({icon:"error",text:"Select Active or Inactive"})}cancel(){this.menuRoleService.menu_role_id=null,this.router.navigate(["/menu-role-search"]),this.buildForm()}clear(){this.buildForm()}buildForm(){this.form=this.formBuilder.group({name:[{value:null,disabled:this.disableInput},[l.kI.required]],description:[{value:null,disabled:this.disableInput}],menu:[{value:[],disabled:this.disableInput},[l.kI.required]],sub_menu:[{value:[],disabled:this.disableInput},[l.kI.required]],is_active:[{value:"1",disabled:this.disableInput},[l.kI.required]]})}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(l.QS),e.Y36(s.F0),e.Y36(_.K),e.Y36(R.H),e.Y36(D.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-menu-roles"]],decls:33,vars:10,consts:[["nz-row","",1,"add-device"],["nz-form","",1,"login-form",3,"formGroup"],[1,"formBox-full","viewMinWidth"],[1,"screen-header"],["class","screen-name",4,"ngIf"],[1,"button-container"],["ngbTooltip","Clear","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-left","margin-right",3,"click"],["ngbTooltip","Save","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-left","margin-right",3,"click"],[1,"fa","fa-floppy-disk","icon-padding"],["ngbTooltip","Cancel","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-xmark","icon-padding"],["nz-col","",1,"screen-criteria"],[1,"main"],[1,"row"],[1,"col-lg-3","col-md-3","col-lg-5","col-lg-6"],["type","text","placeholder","Name","label","Name *","formControlName","name","align_icon","left",3,"validations"],["label","Menu *","formControlName","menu","dropdown_placeholder","Menu","bindLabel","name","align_icon","left",3,"validations","multiple","dropdownListData","onModelChange"],["label","Sub Menu *","formControlName","sub_menu","dropdown_placeholder","Sub Menu","bindLabel","name","align_icon","left",3,"validations","multiple","dropdownListData"],["formControlName","is_active"],["nz-radio","","nzValue","1"],["nz-radio","","nzValue","0"],[1,"col-lg-12","col-md-12","col-lg-12","col-lg-12"],["placeholder","Description","label","Description","formControlName","description","align_icon","left"],[1,"screen-name"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3),e.YNc(4,S,2,0,"div",4),e.YNc(5,T,2,0,"div",4),e.qZA(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return o.clear()}),e._uU(8," Clear "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return o.addMenuRole()}),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return o.cancel()}),e._UZ(12,"i",10),e.qZA()(),e.TgZ(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14),e._UZ(17,"app-ad-custom-input",15),e.qZA(),e.TgZ(18,"div",14)(19,"app-ad-custom-dropdown",16),e.NdJ("onModelChange",function(d){return o.onParentMenuDropdownChange(d)}),e.qZA()()(),e.TgZ(20,"div",13)(21,"div",14),e._UZ(22,"app-ad-custom-dropdown",17),e.qZA(),e.TgZ(23,"div",14)(24,"nz-form-item")(25,"nz-radio-group",18)(26,"label",19),e._uU(27,"Active"),e.qZA(),e.TgZ(28,"label",20),e._uU(29,"Inactive"),e.qZA()()()()(),e.TgZ(30,"div",13)(31,"div",21),e._UZ(32,"app-ad-custom-text-area",22),e.qZA()()()()()()()),2&n&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("ngIf","create"==o.method),e.xp6(1),e.Q6J("ngIf","update"==o.method),e.xp6(12),e.Q6J("validations",!(o.transition_border&&null==o.form.value.name||""==o.form.value.name)),e.xp6(2),e.Q6J("validations",!(o.transition_border&&(null==o.form.value.menu||""==o.form.value.menu||null==o.form.value.menu)))("multiple",!0)("dropdownListData",o.menuData),e.xp6(3),e.Q6J("validations",!(o.transition_border&&(null==o.form.value.sub_menu||""==o.form.value.sub_menu||null==o.form.value.sub_menu)))("multiple",!0)("dropdownListData",o.subMenuData))},dependencies:[c.O5,p.t3,p.SK,h.Lr,h.Nx,v.Of,v.Dg,l._Y,l.JJ,l.JL,l.sg,l.u,f._L,C.y,A.v,Z.E],styles:[".main[_ngcontent-%COMP%]{background-color:#e8dbfa;border-radius:10px;padding:2% 4% 2% 2%;margin:25px}.sections[_ngcontent-%COMP%]{background-color:#e8dbfa;border-radius:0 10px 10px;padding:2% 4% 2% 2%;margin:25px}.screen-criteria[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(185,136,255,.5)}.add-provider[_ngcontent-%COMP%]{margin-left:5%;margin-top:5%}.error-message[_ngcontent-%COMP%]{position:absolute;left:13px;bottom:-13px;font-size:10px;color:#bd123e;line-height:1;font-weight:700}"]}),i})()}];let z=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.ez,g.T,s.Bz.forChild(I),l.u5,l.UX,f.IJ,b.m,s.Bz]}),i})()}}]);