"use strict";(self.webpackChunktemplate_rpm_adnare=self.webpackChunktemplate_rpm_adnare||[]).push([[463],{2463:(P,m,l)=>{l.r(m),l.d(m,{ProviderReportsModule:()=>M});var d=l(6895),T=l(2510),f=l(433),D=l(6773),A=l(9193),E=l(1083),o=l(9671),i=l(5226),s=l.n(i),a=l(8938),e=l(4650),u=l(1684),g=l(9503),_=l(7044),h=l(7423),v=l(269),L=l(1237),O=l(1453),F=l(728),U=l(827);function R(c,b){if(1&c){const n=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"td")(22,"div",30)(23,"i",31),e.NdJ("click",function(){const r=e.CHM(n).$implicit,S=e.oxw();return e.KtG(S.downloadReport(r.rpm_billing_id))}),e.qZA()()()()}if(2&c){const n=b.$implicit;e.xp6(2),e.Oqu(n.entity),e.xp6(2),e.lnq("",n.first_name," ",n.middle_name," ",n.last_name,""),e.xp6(2),e.Oqu(e.xi3(7,10,n.billed_date,"MM/dd/yyyy")),e.xp6(3),e.Oqu(e.xi3(10,13,n.billed_from,"MM/dd/yyyy")),e.xp6(3),e.Oqu(e.xi3(13,16,n.billed_to,"MM/dd/yyyy")),e.xp6(3),e.Oqu(n.billed_type),e.xp6(2),e.Oqu(n.billing_insurance),e.xp6(2),e.Oqu(e.xi3(20,19,n.last_downloaded,"MM/dd/yyyy"))}}const Z=[{path:"",component:(()=>{class c{constructor(n,t,p,r){this.router=n,this.billingService=t,this.patientService=p,this.datepipe=r,this.enterpriseDropdownData=[],this.providerDropdownData=[],this.statusDropdownData=[],this.billingInsuranceDropdownData=[],this.pageSizeOptions=[10,15,20,25,30],this.pageIndex=1,this.pageSize=10,this.total=1e3,this.changePageSize=10,this.get_all_data=!1,this.billing_start_date=null,this.billing_end_date=null}ngOnInit(){this.initData()}initData(){this.getBillingStatusDropdown(),this.getBillingInsuranceDropdown(),this.getEnterpriseSearchDropdown()}handleClear(){this.status=null,this.billing_insurance=null,this.billing_start_date=null,this.billing_end_date=null,this.entity=null,this.provider=null}search(){(null!=this.entity||null!=this.provider||null!=this.status||null!=this.billing_insurance||null!=this.billing_start_date||null!=this.billing_end_date)&&(this.pageIndex=1),this.getProviderReports()}onQueryParamsChange(n){var t=this;return(0,o.Z)(function*(){t.changePageSize=t.pageSize,t.prev_pageIndex=null!=t.savedParams?t.savedParams.pageIndex:null,t.savedParams=n;const{pageIndex:r,sort:S}=n,y=S.find(C=>null!==C.value);t.sortField=y&&y.key||null,t.sortOrder=y&&y.value||null,t.pageIndex=r,(null!=t.prev_pageIndex&&t.prev_pageIndex!=t.pageIndex||null!=t.provider_reports&&null!=t.sortField&&null!=t.sortOrder||t.changePageSize!=t.pageSize)&&t.getProviderReports()})()}getProviderReports(){if(this.provider){const n=this.provider.split(" ");n.length>1?(this.provider_first_name=n[0].toLowerCase(),this.provider_last_name=n[n.length-1].toLowerCase()):this.provider_name=this.provider.toLowerCase()}this.search_model={sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,get_all_data:this.get_all_data,enterprise_id:this.entity??"",provider_first_name:this.provider_first_name??"",provider_last_name:this.provider_last_name??"",provider_name:this.provider_name??"",lkp_billing_status_id:this.status??"",lkp_billing_insurance_type_id:this.billing_insurance??"",user_id:localStorage.getItem("user_id"),billing_start_date:null===this.billing_start_date?"":this.convert(this.billing_start_date),billing_end_date:null===this.billing_end_date?"":this.convert(this.billing_end_date)},this.billingService.getProviderReport(this.search_model).subscribe(n=>{1==n.success?(this.provider_reports=n.data,this.totalReports=n.data.length>0?n.data[0].total_record_count:0):s().fire({icon:"error",text:n.message})})}convert(n){const t=new Date(n),p=("0"+(t.getMonth()+1)).slice(-2),r=("0"+t.getDate()).slice(-2),S=("0"+t.getHours()).slice(-2),z=("0"+t.getHours()).slice(-2),y=("0"+t.getHours()).slice(-2);return[[t.getFullYear(),p,r].join("-"),[S,z,y].join(":")].join(" ")}downloadReport(n){null!=this.provider_reports&&0!=this.provider_reports.length?this.downloadAllProviderReports(n):s().fire({icon:"error",text:"No Record to Download"})}downloadAllProviderReports(n){var t=this;return(0,o.Z)(function*(){t.billingService.downloadProviderReport(n).subscribe(p=>{1==p.success?(t.providerReportExportData=p.data.map(r=>({"Patient First Name":r.patient_first_name,"Patient Last Name":r.patient_last_name,DOB:t.datepipe.transform(r.patient_dob,"MM/dd/yyyy"),Account:r.account,Address:r.address,Provider:r.provider_first_name+" "+(r.provider_middle_name??"")+" "+r.provider_last_name,"Billed Type":r.billed_type,"Billing Start Date":t.datepipe.transform(r.billing_start_date,"MM/dd/yyyy"),"Billed Date":t.datepipe.transform(r.billed_date,"MM/dd/yyyy"),Units:r.units,"Calculated Units":r.calculated_unit,CPT:r.cpt,Entity:r.entity,"Report Type":r.billing_insurance.trim(),"Inusrance Name":r.insurance_name,"Inusrance Type":r.insurance_type.trim(),"Policy Id":r.policy_id,"Insured Relation":r.insured_relation,"Subscriber First Name":r.subscriber_first_name,"Subscriber Last Name":r.subscriber_last_name,"Subscriber's City":r.subscriber_city,"Subscriber's State":r.subscriber_state,"Subscriber's ZipCode":r.subscriber_zipcode,"Subscriber's Gender":r.subscriber_gender})),t.exportToCsv(t.providerReportExportData),t.getProviderReports()):s().fire({icon:"error",text:p.message})})})()}exportToCsv(n){new a.Sv(n,"Provider Reports",{fieldSeparator:",",quoteStrings:'"',decimalseparator:".",title:"",useBom:!0,noDownload:!1,headers:["Patient First Name","Patient Last Name","DOB","Account","Address","Provider","Billed Type","Billing Start Date","Billed Date","Units","Calculated Units","CPT","Entity","Report Type","Inusrance Name","Inusrance Type","Policy Id","Insured Relation","Subscriber First Name","Subscriber Last Name","Subscriber's City","Subscriber's State","Subscriber's ZipCode","Subscriber's Gender"]})}getEnterpriseSearchDropdown(){this.userId=localStorage.getItem("user_id"),this.patientService.getActiveEnterpriseDropdownData(this.userId).subscribe(n=>{1==n.success?(this.enterpriseDropdownData=n.data,1==this.enterpriseDropdownData.length&&(this.entity=this.enterpriseDropdownData[0].id)):s().fire({icon:"error",text:n.message})})}getBillingStatusDropdown(){this.billingService.getBillingStatusDropdown().subscribe(n=>{1==n.success?this.statusDropdownData=n.data:s().fire({icon:"error",text:n.message})})}getBillingInsuranceDropdown(){this.billingService.getBillingInsuranceDropdown().subscribe(n=>{1==n.success?this.billingInsuranceDropdownData=n.data:s().fire({icon:"error",text:n.message})})}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(T.F0),e.Y36(u.j),e.Y36(g.e),e.Y36(d.uU))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-provider-reports"]],decls:55,vars:28,consts:[[1,"screen"],[1,"screen-header"],[1,"screen-name"],["ngbTooltip","Search","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-search"],[1,"screen-header-btn","margin-right",3,"click"],[1,"screen-search-criteria-div"],[1,"row"],[1,"col-lg-2","col-md-2","col-sm-6","col-xs-6"],["label","Entity","dropdown_placeholder","Entity","bindLabel","name","icon","fa fa-square-plus","align_icon","left",3,"ngModel","dropdownListData","ngModelChange"],["type","text","placeholder","Provider Name","label","Provider Name","icon","fa fa-user","accesskey","P","align_icon","left",3,"ngModel","ngModelChange"],["label","Status","dropdown_placeholder","Status","bindLabel","name","icon","fa fa-book-medical","align_icon","left",3,"ngModel","dropdownListData","ngModelChange"],["label","Billing Insurance","dropdown_placeholder","Billing Insurance","bindLabel","name","icon","fa fa-shield","align_icon","left",3,"ngModel","dropdownListData","ngModelChange"],["label","Billing Start Date","icon","fa fa-calendar","accesskey","S","align_icon","left",3,"ngModel","ngModelChange"],["label","Billing End Date","accesskey","B","icon","fa fa-calendar","align_icon","left",3,"ngModel","ngModelChange"],[1,"table-div"],["nzShowSizeChanger","",1,"ch-table",3,"nzPageSizeOptions","nzFrontPagination","nzTotal","nzPageIndex","nzPageSize","nzData","nzQueryParams","nzPageIndexChange","nzPageSizeChange"],["nzTable","","sortTable","","filterTable",""],["nzColumnKey","entity",3,"nzSortFn"],["nzColumnKey","provider",3,"nzSortFn"],["nzColumnKey","billed_date",3,"nzSortFn"],["nzColumnKey","billed_from",3,"nzSortFn"],["nzColumnKey","billed_to",3,"nzSortFn"],["nzColumnKey","billed_type",3,"nzSortFn"],["nzColumnKey","billing_insurance",3,"nzSortFn"],["nzColumnKey","status",3,"nzSortFn"],[4,"ngFor","ngForOf"],[1,"total"],[3,"src"],[1,"total-span"],[2,"text-align-last","center"],["nz-icon","","nzType","download","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Download",1,"table-coloumn-icons",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3," Provider Reports "),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return t.search()}),e._UZ(6,"span",4),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return t.handleClear()}),e._uU(8,"Clear All"),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"app-ad-custom-dropdown",9),e.NdJ("ngModelChange",function(r){return t.entity=r}),e.qZA()(),e.TgZ(13,"div",8)(14,"app-ad-custom-input",10),e.NdJ("ngModelChange",function(r){return t.provider=r}),e.qZA()(),e.TgZ(15,"div",8)(16,"app-ad-custom-dropdown",11),e.NdJ("ngModelChange",function(r){return t.status=r}),e.qZA()(),e.TgZ(17,"div",8)(18,"app-ad-custom-dropdown",12),e.NdJ("ngModelChange",function(r){return t.billing_insurance=r}),e.qZA()(),e.TgZ(19,"div",8)(20,"app-ad-custom-date",13),e.NdJ("ngModelChange",function(r){return t.billing_start_date=r}),e.qZA()(),e.TgZ(21,"div",8)(22,"app-ad-custom-date",14),e.NdJ("ngModelChange",function(r){return t.billing_end_date=r}),e.qZA()()()(),e.TgZ(23,"div",15)(24,"nz-table",16,17),e.NdJ("nzQueryParams",function(r){return t.onQueryParamsChange(r)})("nzPageIndexChange",function(r){return t.pageIndex=r})("nzPageSizeChange",function(r){return t.pageSize=r}),e.TgZ(28,"thead")(29,"tr")(30,"th",18),e._uU(31,"Entity"),e.qZA(),e.TgZ(32,"th",19),e._uU(33,"Provider"),e.qZA(),e.TgZ(34,"th",20),e._uU(35,"Billed Date"),e.qZA(),e.TgZ(36,"th",21),e._uU(37,"Billed From"),e.qZA(),e.TgZ(38,"th",22),e._uU(39,"Billed To"),e.qZA(),e.TgZ(40,"th",23),e._uU(41,"Billed Type"),e.qZA(),e.TgZ(42,"th",24),e._uU(43,"Billing Insurance"),e.qZA(),e.TgZ(44,"th",25),e._uU(45,"Last Downloaded"),e.qZA(),e.TgZ(46,"th"),e._uU(47,"Action"),e.qZA()()(),e.TgZ(48,"tbody"),e.YNc(49,R,24,22,"tr",26),e.qZA()(),e.TgZ(50,"div",27),e._UZ(51,"img",28),e.ALo(52,"assetsSource"),e.TgZ(53,"span",29),e._uU(54),e.qZA()()()()),2&n&&(e.xp6(12),e.Q6J("ngModel",t.entity)("dropdownListData",t.enterpriseDropdownData),e.xp6(2),e.Q6J("ngModel",t.provider),e.xp6(2),e.Q6J("ngModel",t.status)("dropdownListData",t.statusDropdownData),e.xp6(2),e.Q6J("ngModel",t.billing_insurance)("dropdownListData",t.billingInsuranceDropdownData),e.xp6(2),e.Q6J("ngModel",t.billing_start_date),e.xp6(2),e.Q6J("ngModel",t.billing_end_date),e.xp6(2),e.Q6J("nzPageSizeOptions",t.pageSizeOptions)("nzFrontPagination",!1)("nzTotal",t.totalReports)("nzPageIndex",t.pageIndex)("nzPageSize",t.pageSize)("nzData",t.provider_reports),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(5),e.Q6J("ngForOf",t.provider_reports),e.xp6(2),e.Q6J("src",e.lcZ(52,26,"total.png"),e.LSH),e.xp6(3),e.Oqu(t.totalReports))},dependencies:[d.sg,_.w,h.Ls,v.N8,v.qD,v.Uo,v._C,v.Om,v.p0,v.$Z,f.JJ,f.On,D._L,L.y,O.m,F.v,d.uU,U.n]}),c})()}];let M=(()=>{class c{}return c.\u0275fac=function(n){return new(n||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[d.ez,E.T,T.Bz.forChild(Z),f.u5,f.UX,D.IJ,A.m,T.Bz]}),c})()},8938:(P,m)=>{var d=function(){function o(){}return o.EOL="\r\n",o.BOM="\ufeff",o.DEFAULT_FIELD_SEPARATOR=",",o.DEFAULT_DECIMAL_SEPARATOR=".",o.DEFAULT_QUOTE='"',o.DEFAULT_SHOW_TITLE=!1,o.DEFAULT_TITLE="My Report",o.DEFAULT_FILENAME="mycsv.csv",o.DEFAULT_SHOW_LABELS=!1,o.DEFAULT_USE_BOM=!0,o.DEFAULT_HEADER=[],o.DEFAULT_OBJ_HEADER={},o.DEFAULT_USE_OBJ_HEADER=!1,o.DEFAULT_USE_HEADER=!1,o.DEFAULT_NO_DOWNLOAD=!1,o.DEFAULT_NULL_TO_EMPTY_STRING=!1,o}();m.hd={filename:d.DEFAULT_FILENAME,fieldSeparator:d.DEFAULT_FIELD_SEPARATOR,quoteStrings:d.DEFAULT_QUOTE,decimalseparator:d.DEFAULT_DECIMAL_SEPARATOR,showLabels:d.DEFAULT_SHOW_LABELS,showTitle:d.DEFAULT_SHOW_TITLE,title:d.DEFAULT_TITLE,useBom:d.DEFAULT_USE_BOM,headers:d.DEFAULT_HEADER,objHeader:d.DEFAULT_OBJ_HEADER,useObjHeader:d.DEFAULT_USE_OBJ_HEADER,useHeader:d.DEFAULT_USE_HEADER,noDownload:d.DEFAULT_NO_DOWNLOAD,nullToEmptyString:d.DEFAULT_NULL_TO_EMPTY_STRING};var T=function(){function o(i,s,a){this.csv="";var e=a||{};this.data="object"!=typeof i?JSON.parse(i):i,this._options=function E(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];for(var a,u,e=A(o),g=1;g<arguments.length;g++){for(var _ in a=Object(arguments[g]))f.call(a,_)&&(e[_]=a[_]);if(Object.getOwnPropertySymbols){u=Object.getOwnPropertySymbols(a);for(var h=0;h<u.length;h++)D.call(a,u[h])&&(e[u[h]]=a[u[h]])}}return e}({},m.hd,e),this._options.filename&&(this._options.filename=s),this.generateCsv()}return o.prototype.generateCsv=function(){if(this._options.useBom&&(this.csv+=d.BOM),this._options.showTitle&&(this.csv+=this._options.title+"\r\n\n"),this._options.useObjHeader&&Object.keys(this._options.objHeader).length>0?(this.getHeaderFromObj(),this.getBodyAccordingHeader()):(this.getHeaders(),this.getBody()),""!=this.csv){if(this._options.noDownload)return this.csv;var i=new Blob([this.csv],{type:"text/csv;charset=utf8;"});if(navigator.msSaveBlob){var s=this._options.filename.replace(/ /g,"_")+".csv";navigator.msSaveBlob(i,s)}else{encodeURI(this.csv);var e=document.createElement("a");e.href=URL.createObjectURL(i),e.setAttribute("target","_blank"),e.setAttribute("visibility","hidden"),e.download=this._options.filename.replace(/ /g,"_")+".csv",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}else console.log("Invalid data")},o.prototype.getHeaders=function(){var i=this;if(this._options.headers.length>0){var a=this._options.headers.reduce(function(e,u){return e+u+i._options.fieldSeparator},"");a=a.slice(0,-1),this.csv+=a+d.EOL}},o.prototype.getHeaderFromObj=function(){var i=this;if(Object.keys(this._options.objHeader).length>0){var s="";Object.keys(this._options.objHeader).forEach(function(a){s+=i._options.objHeader[a]+i._options.fieldSeparator}),s=s.slice(0,-1),this.csv+=s+d.EOL}},o.prototype.getBodyAccordingHeader=function(){for(var i=this,s=function(u){var g="";a._options.useObjHeader&&Object.keys(a._options.objHeader).length>0&&Object.keys(a._options.objHeader).forEach(function(_){g+=i.formatData(i.data[u][_])+i._options.fieldSeparator}),g=g.slice(0,-1),a.csv+=g+d.EOL},a=this,e=0;e<this.data.length;e++)s(e)},o.prototype.getBody=function(){for(var i=0;i<this.data.length;i++){var s="";if(this._options.useHeader&&this._options.headers.length>0)for(var a=0,e=this._options.headers;a<e.length;a++)s+=this.formatData(this.data[i][u=e[a]])+this._options.fieldSeparator;else for(var u in this.data[i])s+=this.formatData(this.data[i][u])+this._options.fieldSeparator;s=s.slice(0,-1),this.csv+=s+d.EOL}},o.prototype.formatData=function(i){return"locale"===this._options.decimalseparator&&o.isFloat(i)?i.toLocaleString():"."!==this._options.decimalseparator&&o.isFloat(i)?i.toString().replace(".",this._options.decimalseparator):"string"==typeof i?(i=i.replace(/"/g,'""'),(this._options.quoteStrings||i.indexOf(",")>-1||i.indexOf("\n")>-1||i.indexOf("\r")>-1)&&(i=this._options.quoteStrings+i+this._options.quoteStrings),i):this._options.nullToEmptyString?i||(i=""):"boolean"==typeof i?i?"TRUE":"FALSE":i},o.prototype.getCsvData=function(){return this.csv},o.isFloat=function(i){return+i===i&&(!isFinite(i)||Boolean(i%1))},o}();m.Sv=T;var f=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;function A(o){if(null==o)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}}}]);