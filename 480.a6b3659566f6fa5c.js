"use strict";(self.webpackChunktemplate_rpm_adnare=self.webpackChunktemplate_rpm_adnare||[]).push([[480],{8480:(O,f,o)=>{o.r(f),o.d(f,{MacroSearchModule:()=>E});var h=o(36895),m=o(62510),z=o(91083),u=o(90433),p=o(46773),M=o(29193),_=o(49671),D=o(88938),y=o(35226),c=o.n(y),S=o(54641),b=o(58493),e=o(94650),C=o(39503),T=o(23023),Z=o(47044),x=o(47423),d=o(40269),A=o(31237),I=o(80728),P=o(70827);function w(s,l){if(1&s){const n=e.EpF();e.TgZ(0,"tbody")(1,"tr"),e.ynx(2),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"div",35)(11,"i",36),e.NdJ("click",function(){const r=e.CHM(n).$implicit,a=e.oxw();return e.KtG(a.deleteMacros(r))}),e.qZA(),e.TgZ(12,"i",37),e.NdJ("click",function(){const r=e.CHM(n).$implicit,a=e.oxw();return e.KtG(a.editMacros(r))}),e.qZA()()(),e.BQk(),e.qZA()()}if(2&s){const n=l.$implicit;e.xp6(4),e.Oqu(n.enterprise_name),e.xp6(2),e.hij("",n.short_cut_key," "),e.xp6(2),e.Oqu(n.description)}}function J(s,l){1&s&&e._UZ(0,"tbody")}S.vfs=b.I.vfs;const U=[{path:"",component:(()=>{class s{constructor(n,t,i,r){this.patientService=n,this.macroService=t,this.router=i,this.datepipe=r,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[10,15,20,25,30],this.get_all_data=!1,this.totalMacros=0,this.changePageSize=10}ngOnInit(){this.is_active="",this.getEnterpriseSearchDropdown(),this.getLocationsSearchDropdown()}onPracticeDropdownChange(n){null!=n&&(this.locationDropdownData=null==this.locationData?[]:this.locationData.filter(t=>t.practice_id==n.id&&t.enterprise_id==this.enterprise))}getLocationsSearchDropdown(){this.userId=localStorage.getItem("user_id"),this.patientService.getLocationDropdownData(this.userId).subscribe(n=>{1==n.success?(this.locationData=n.data,this.locationDropdownData=null!=this.enterprise&&null!=this.enterprise?this.locationData.filter(t=>t.enterprise_id==this.enterprise):this.locationData):c().fire({icon:"error",text:n.message})})}buildTableBody(n,t){var i=[];return i.push(t),n.forEach(r=>{var a=[];t.forEach(function(v){a.push(r[v.text])}),i.push(a)}),i}table(n,t){return{table:{headerRows:1,body:this.buildTableBody(n,t),dontBreakRows:!0,fontSize:12}}}downloadAllEntityData(n){var t=this;return(0,_.Z)(function*(){t.search_model={user_id:localStorage.getItem("user_id"),sort_order:t.sortOrder??"",sort_coloumn:t.sortField??"",page_number:t.pageIndex,page_size:t.pageSize,enterprise_id:t.enterprise??"",shortcut_key:t.shortcut_key??"",description:t.description??"",get_all_data:!0},t.macroService.getMacrosGridData(t.search_model).subscribe(i=>{1==i.success?(t.entityExportData=i.data.map(r=>({Entity:r.enterprise_name,Shortcut:r.short_cut_key,Description:r.description})),"pdf"==n&&t.exportToPdf(t.entityExportData),"csv"==n&&t.exportToCsv(t.entityExportData)):c().fire({icon:"error",text:i.message})})})()}downloadEntityData(n){null!=this.macrosData&&0!=this.macrosData.length?this.downloadAllEntityData(n):c().fire({icon:"error",text:"No Record to Download"})}exportToCsv(n){new D.Sv(n,"Macros",{fieldSeparator:",",quoteStrings:'"',decimalseparator:".",title:"",useBom:!0,noDownload:!1,headers:["Entity","Shortcut","Description"]})}exportToPdf(n){var i={content:[{text:"Macros",fontSize:12,bold:!0},this.table(n,[{text:"Entity",style:"tableHeader"},{text:"Shortcut",style:"tableHeader"},{text:"Description",style:"tableHeader"}])],defaultStyle:{fontSize:12},styles:{tableHeader:{bold:!0,fontSize:9,color:"white",fillColor:"#4A2D73"}}};S.createPdf(i).download("Macros.pdf")}getEnterpriseSearchDropdown(){this.userId=localStorage.getItem("user_id"),this.patientService.getActiveEnterpriseDropdownData(this.userId).subscribe(n=>{1==n.success?(this.enterpriseData=n.data,1==this.enterpriseData.length&&(this.enterprise=this.enterpriseData[0].id)):c().fire({icon:"error",text:n.message})})}onQueryParamsChange(n){var t=this;return(0,_.Z)(function*(){t.prev_pageIndex=null!=t.savedParams?t.savedParams.pageIndex:null,t.savedParams=n;const{pageIndex:r,sort:a}=n,g=a.find(F=>null!==F.value);t.sortField=g&&g.key||null,t.sortOrder=g&&g.value||null,t.pageIndex=r,(null!=t.macrosData&&null!=t.sortField&&null!=t.sortOrder||null!=t.prev_pageIndex&&t.prev_pageIndex!=t.pageIndex||t.changePageSize!=t.pageSize)&&t.getMacrosGridData(),t.changePageSize=t.pageSize})()}getMacrosGridData(){this.search_model={user_id:localStorage.getItem("user_id"),sort_order:this.sortOrder??"",sort_coloumn:this.sortField??"",page_number:this.pageIndex,page_size:this.pageSize,enterprise_id:this.enterprise??"",shortcut_key:this.shortcut_key??"",description:this.description??"",get_all_data:this.get_all_data},this.macroService.getMacrosGridData(this.search_model).subscribe(n=>{1==n.success?(this.macrosData=n.data,this.totalMacros=n.data.length>0?n.data[0].total_record_count:0):c().fire({icon:"error",text:n.message})})}search(){this.pageIndex=1,this.getMacrosGridData()}handleClear(){this.shortcut_key="",this.description="",this.enterprise=void 0,this.getMacrosGridData()}addMacros(){this.macroService.macros_id=null,this.macroService.method="create",this.router.navigate(["/add-macros"])}editMacros(n){this.macroService.method="update",this.macroService.macros_id=n.macros_id,this.router.navigate(["/add-macros"])}deleteMacros(n){this.macroService.deleteMacros(n.macros_id).subscribe(t=>{1==t.success?(c().fire({icon:"success",text:t.message}),this.pageIndex=1,this.getMacrosGridData()):c().fire({icon:"error",text:t.message})})}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(C.e),e.Y36(T.f),e.Y36(m.F0),e.Y36(h.uU))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-macros-search"]],decls:60,vars:25,consts:[[1,"screen"],[1,"screen-header"],[1,"screen-name"],["ngbTooltip","Search","tooltipClass","custom-search-tooltip-color",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-search"],[1,"screen-header-btn","margin-right",3,"click"],[1,"pipe"],["ngbDropdown","",1,"d-inline-block"],["Export","ngbDropdown"],["id","dropdownManual2",1,"screen-header-btn","margin-right",3,"focus"],[3,"src"],[1,"pipe-inside-btn"],[1,"fa","fa-chevron-down"],["ngbDropdownMenu","","aria-labelledby","dropdownManual2"],["ngbDropdownItem","",1,"screen-header-btn","margin-right",3,"click"],[1,"fa","fa-file-csv"],[1,"fa","fa-file-pdf"],[1,"screen-header-btn",3,"click"],[1,"screen-search-criteria-div"],[1,"row"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],["label","Entity","dropdown_placeholder","Entity","bindLabel","name","icon","fa fa-square-plus","align_icon","left",3,"ngModel","dropdownListData","ngModelChange"],["type","text","placeholder","Shortcut","label","Shortcut","align_icon","left",3,"ngModel","ngModelChange"],["type","text","placeholder","Description","label","Description","align_icon","left",3,"ngModel","ngModelChange"],[1,"table-div"],["nzShowSizeChanger","",1,"ch-table",3,"nzPageSizeOptions","nzFrontPagination","nzTotal","nzPageIndex","nzPageSize","nzData","nzQueryParams","nzPageIndexChange","nzPageSizeChange"],["nzTable","","sortTable","","filterTable",""],["nzColumnKey","enterprise","width","10%",3,"nzSortFn"],["nzColumnKey","created_by","width","15%",3,"nzSortFn"],["nzColumnKey","created_on","width","65%",3,"nzSortFn"],["width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"total"],[1,"total-span"],[1,"table-icon-container"],["nz-icon","","nzType","delete","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Delete",1,"table-coloumn-icons",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline","nzTooltipPlacement","top","ngbTooltip","Edit",1,"table-coloumn-icons",3,"click"]],template:function(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3," Macros Search "),e.qZA(),e.TgZ(4,"div")(5,"button",3),e.NdJ("click",function(){return t.search()}),e._UZ(6,"span",4),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return t.handleClear()}),e._uU(8,"Clear All"),e.qZA(),e._UZ(9,"span",6),e.TgZ(10,"div",7,8)(12,"button",9),e.NdJ("focus",function(){e.CHM(i);const a=e.MAs(11);return e.KtG(a.open())}),e._UZ(13,"img",10),e.ALo(14,"assetsSource"),e._uU(15," Export "),e._UZ(16,"span",11)(17,"span",12),e.qZA(),e.TgZ(18,"div",13)(19,"button",14),e.NdJ("click",function(){return t.downloadEntityData("csv")}),e._UZ(20,"i",15),e._uU(21," CSV "),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return t.downloadEntityData("pdf")}),e._UZ(23,"i",16),e._uU(24," PDF "),e.qZA()()(),e._UZ(25,"span",6),e.TgZ(26,"button",17),e.NdJ("click",function(){return t.addMacros()}),e._UZ(27,"img",10),e.ALo(28,"assetsSource"),e._uU(29," Macros "),e.qZA()()(),e.TgZ(30,"div",18)(31,"div",19)(32,"div",20)(33,"app-ad-custom-dropdown",21),e.NdJ("ngModelChange",function(a){return t.enterprise=a}),e.qZA()(),e.TgZ(34,"div",20)(35,"app-ad-custom-input",22),e.NdJ("ngModelChange",function(a){return t.shortcut_key=a}),e.qZA()(),e.TgZ(36,"div",20)(37,"app-ad-custom-input",23),e.NdJ("ngModelChange",function(a){return t.description=a}),e.qZA()()(),e.TgZ(38,"div",24)(39,"nz-table",25,26),e.NdJ("nzQueryParams",function(a){return t.onQueryParamsChange(a)})("nzPageIndexChange",function(a){return t.pageIndex=a})("nzPageSizeChange",function(a){return t.pageSize=a}),e.TgZ(43,"thead")(44,"tr")(45,"th",27),e._uU(46,"Entity"),e.qZA(),e.TgZ(47,"th",28),e._uU(48,"Shortcut"),e.qZA(),e.TgZ(49,"th",29),e._uU(50,"Description"),e.qZA(),e.TgZ(51,"th",30),e._uU(52,"Actions"),e.qZA()()(),e.YNc(53,w,13,3,"tbody",31),e.YNc(54,J,1,0,"tbody",32),e.qZA(),e.TgZ(55,"div",33),e._UZ(56,"img",10),e.ALo(57,"assetsSource"),e.TgZ(58,"span",34),e._uU(59),e.qZA()()()()()}if(2&n){const i=e.MAs(41);e.xp6(13),e.Q6J("src",e.lcZ(14,19,"export.png"),e.LSH),e.xp6(14),e.Q6J("src",e.lcZ(28,21,"patient.png"),e.LSH),e.xp6(6),e.Q6J("ngModel",t.enterprise)("dropdownListData",t.enterpriseData),e.xp6(2),e.Q6J("ngModel",t.shortcut_key),e.xp6(2),e.Q6J("ngModel",t.description),e.xp6(2),e.Q6J("nzPageSizeOptions",t.pageSizeOptions)("nzFrontPagination",!1)("nzTotal",t.totalMacros)("nzPageIndex",t.pageIndex)("nzPageSize",t.pageSize)("nzData",t.macrosData),e.xp6(6),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(2),e.Q6J("nzSortFn",!0),e.xp6(4),e.Q6J("ngForOf",i.data),e.xp6(1),e.Q6J("ngIf",0==i.data.length),e.xp6(2),e.Q6J("src",e.lcZ(57,23,"total.png"),e.LSH),e.xp6(3),e.Oqu(t.totalMacros)}},dependencies:[h.sg,h.O5,Z.w,x.Ls,d.N8,d.qD,d.Uo,d._C,d.Om,d.p0,d.$Z,u.JJ,u.On,p.jt,p.Vi,p.TH,p._L,A.y,I.v,P.n],styles:[".margin-top-left[_ngcontent-%COMP%]{margin-top:17px}"]}),s})()}];let E=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[h.ez,z.T,m.Bz.forChild(U),u.u5,u.UX,p.IJ,M.m,m.Bz]}),s})()}}]);